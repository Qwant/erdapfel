{"version":3,"sources":["webpack:///./src/adapters/pois_styles.ts","webpack:///./local_modules/mapbox_style_configure/index.js","webpack:///./src/mapbox/locale.ts","webpack:///./src/components/PoiPopup.jsx","webpack:///./src/adapters/poi_popup.js","webpack:///./src/mapbox/mobile_compass_control.js","webpack:///./src/mapbox/extended_scale_control.js","webpack:///./src/mapbox/extended_attribution_control.js","webpack:///./src/libs/renderStaticReact.js","webpack:///./src/mapbox/extended_geolocate_control.js","webpack:///./src/mapbox/extended_nav_control.js","webpack:///./src/adapters/poi/map_poi.js","webpack:///./src/adapters/scene_config.js","webpack:///./src/panel/direction/RouteLabel/index.jsx","webpack:///./src/adapters/route_styles.js","webpack:///./local_modules/alt-route-labeller/index.js","webpack:///./src/adapters/scene_direction.js","webpack:///./src/adapters/scene_category.js","webpack:///./src/adapters/scene.js"],"names":["module","exports","configure","style","mapStyleConfig","lang","JSON","parse","replace","baseMapUrl","poiMapUrl","spritesUrl","fontsUrl","PoiPopup","_ref","poi","_useFavorites","useFavorites","isInFavorites","removeFromFavorites","addToFavorites","isDirectionActive","useConfig","enabled","openDirection","Telemetry","sendPoiEvent","window","app","navigateTo","onClickPhoneNumber","source","meta","buildInteractionData","id","template","zone","element","toggleStorePoi","e","preventDefault","isFavorite","stored","React","createElement","className","onMouseEnter","fire","onMouseLeave","PoiItem","withOpeningHours","withImage","inList","ActionButtons","isPoiInFavorite","_regeneratorRuntime","t","r","Object","prototype","n","hasOwnProperty","o","defineProperty","value","i","Symbol","a","iterator","c","asyncIterator","u","toStringTag","define","enumerable","configurable","writable","wrap","Generator","create","Context","makeInvokeMethod","tryCatch","type","arg","call","h","l","f","s","y","GeneratorFunction","GeneratorFunctionPrototype","p","d","getPrototypeOf","v","values","g","defineIteratorMethods","forEach","_invoke","AsyncIterator","invoke","resolve","__await","then","callInvokeWithMethodAndArg","Error","done","method","delegate","maybeInvokeDelegate","sent","_sent","dispatchException","abrupt","return","TypeError","resultName","next","nextLoc","pushTryEntry","tryLoc","catchLoc","finallyLoc","afterLoc","tryEntries","push","resetTryEntry","completion","reset","isNaN","length","displayName","isGeneratorFunction","constructor","name","mark","setPrototypeOf","__proto__","awrap","async","Promise","keys","reverse","pop","prev","charAt","slice","stop","rval","handle","complete","finish","catch","_catch","delegateYield","asyncGeneratorStep","gen","reject","_next","_throw","key","info","error","_asyncToGenerator","fn","self","args","arguments","apply","err","undefined","WAIT_BEFORE_DISPLAY","WAIT_BEFORE_CLOSE","init","map","popupHandle","timeOutHandler","activePoiId","closeTimeoutHandler","listen","isMobileDevice","isTouchEvent","createPJPopup","close","clearTimeout","setTimeout","addListener","layer","_this","on","features","properties","global_id","createOSMPopup","originalEvent","_callee","_callee$","_context","_ref2","_callee2","layerPoi","event","_callee2$","_context2","ApiPoi","poiApiLoad","qwant_id","simple","showPopup","_x","_x2","popupOptions","closeButton","maxWidth","offset","anchor","getPopupAnchor","Popup","setLngLat","latLon","setHTML","addTo","popupWrapper","document","querySelector","ReactDOM","render","ReactPoiPopup","VERTICAL_OFFSET","HORIZONTAL_OFFSET","canvasWidth","innerWidth","anchorFragments","clientY","clientX","join","unmountComponentAtNode","remove","sourceCapabilities","firesTouchEvents","MobileCompassControl","_classCallCheck","_container","compassClass","_compass","_createButton","_resetNorthAndTilt","compassIndicatorClass","_compassIndicator","_createIcon","appendChild","_createClass","onAdd","_map","textContent","_pitchAndRotateCompassArrow","bind","onRemove","parentNode","removeChild","_geolocate","navigator","geolocation","getCurrentPosition","position","flyTo","center","coords","longitude","latitude","maximumAge","ariaLabel","setAttribute","addEventListener","easeTo","pitch","bearing","getPitch","transform","angle","classList","add","scale","rotation","Math","PI","concat","ExtendedScaleControl","_ScaleControl","_inherits","options","container","_callSuper","parentContainer","_onMove","_get","_getPrototypeOf","ScaleControl","ExtendedAttributionControl","_AttributionControl","AttributionControl","reactElement","ReactDOMServer","renderToStaticMarkup","instance","Constructor","_defineProperties","target","props","descriptor","_toPropertyKey","protoProps","staticProps","_toPrimitive","String","toPrimitive","Number","_possibleConstructorReturn","_isNativeReflectConstruct","Reflect","construct","_assertThisInitialized","ReferenceError","Boolean","valueOf","get","property","receiver","base","_superPropBase","desc","getOwnPropertyDescriptor","object","subClass","superClass","_setPrototypeOf","ExtendedGeolocateControl","_GeolocateControl","addOnce","LOCALISE_TRIGGER","_setupUI","onReady","cb","_onReady","_trigger","state","Geolocation","PROMPT","store","openPendingGeolocateModal","trigger","supported","_this$_geolocateButto","_geolocateButton","firstChild","innerHTML","renderStaticReact","IconGeoloc","fill","width","_onError","disabled","GeolocateControl","ExtendedControl","topButtonGroup","bottomButtonGroup","directionShortcutCallback","_zoomInButton","MAP_ZOOM_IN","zoomIn","IconPlus","_zoomOutButton","MAP_ZOOM_OUT","zoomOut","IconMinus","_direction","MAP_ITINERARY","geolocControl","GeolocControl","positionOptions","enableHighAccuracy","trackUserLocation","showAccuracyCircle","addControl","scaleAttributionContainer","extendedScaleControl","unit","extendedAttributionControl","unListen","MapPoi","_Poi","feature","_feature$properties","subClassName","subclass","ll","LngLat","convert","geometry","coordinates","POI_TYPE","Poi","nconf","mapStyle","baseUrl","system","sceneConfig","assign","URI","toAbsoluteUrl","location","origin","getStyle","stringify","qwantStyle","getBaseLang","code","PublicTransportIcon","mode","getTransportTypeIcon","PublicTransportStepIcons","route","nonWalkLegs","legs","filter","leg","index","RouteLabel","_ref3","vehicle","isPublicTransport","VehicleIcon","formatDuration","duration","formatDistance","distance","darkenColor","hex","Color","mix","safeHexColor","prepareRouteColor","lineColor","_objectSpread","outlineColor","getColorExpression","isActive","isOutline","getRouteStyle","layout","visibility","paint","setActiveRouteStyle","layerId","setLayoutProperty","setPaintProperty","TOLERANCE","floatEquals","f1","f2","abs","coordEquals","c1","c2","asKey","coord","toFixed","last","array","project","ratio","ls","lineLength","lngLat","getCoord","along","localLineBearing","distinctSegment","coordCounts","adjacentCoordsUsedOnce","longestDistinctSegment","reduce","longest","current","tmp","lineString","findDistinctSegments","linestrings","featuresCoords","coordAll","Map","_toConsumableArray","set","toSimpleLinestring","allCoordsWithNoDups","noDups","prevCoord","optimizeAnchors","positions","others","splice","othersBearing","getBearingFromOtherPoints","getAnchor","other","avg","_index","otherBearing","axis","getLabelPositions","routes","featuresOrGeoms","Array","isArray","lineStrings","segments","createMarker","Marker","createRouteLabel","onclick","getLabelsBbbox","labelPositions","routesBbox","smallScreen","shift","latShift","getNorth","getSouth","lngShift","getEast","getWest","labelsBbbox","LngLatBounds","shiftLabelPosition","labelPosition","extend","_lngLat","_slicedToArray","lng","lat","SceneDirection","_defineProperty","originMarker","cx","draggable","refreshDirection","getLngLat","routeMarkers","destinationMarker","routeLabels","fullBbox","mapFeaturesByRoute","iconsBaseUrl","addMapImage","pixelRatio","_ref4","_ref4$activeRouteId","activeRouteId","displayRoutes","_ref5","routeId","fitView","setMainRoute","step","computeBBox","highlightStep","unhighlightStep","setOrigin","setDestination","addMarkerSteps","getAllSteps","idx","stepMarker","maneuver","getElement","getAllStops","stopMarker","title","mainRoute","_ref6","outlineLayerId","moveLayer","routes_layer","updateMarkers","updateRouteLabels","marker","_originDestinationCoo","originDestinationCoords","destination","addRouteFeatures","_ref7","_ref8","querySelectorAll","routeLabel","dataset","toString","newPoint","LatLonPoi","_ref9","sourceId","removeLayer","removeSource","getDataSources","featureCollection","normalizeToFeatureCollection","sources","walkFeatures","nonWalkFeatures","data","addSource","layerStyle","outlineLayerStyle","addLayer","getCanvas","cursor","_ref10","_bbox","bbox","_bbox2","minX","minY","maxX","maxY","url","loadImage","image","sendOnce","addImage","poisToGeoJSON","pois","poiFeature","poiToGeoJSON","iconName","IconManager","iconClass","SceneCategory","hoveredPoi","hoveredMarker","createPinIcon","disablePointerEvents","selectedPoi","selectedMarker","createMapGLIcon","imageData","sourceName","emptyFeatureCollection","promoteId","showNamesWithPins","labelLayerId","FILTERED_POIS_LABEL_STYLES","layers","pinLayerId","FILTERED_POIS_PIN_STYLES","layerName","handleLayerMarkerClick","handleLayerMarkerMouseOver","handleLayerMarkerMouseLeave","mapMouseEvent","find","poiFilters","isEcoResponsible","isEcoResponsibleCategory","category","toUrl","centerMap","selectPoiMarker","stopPropagation","getPointedPoi","selectPoi","_this$selectedPoi","highlightPoiMarker","setOsmPoisVisibility","getSource","setData","displayed","constants","pois_layers","setFeatureState","highlight","setPoiFeatureState","hovered","selected","initActiveStateMarkers","initDynamicPoiLayers","addCategoryMarkers","removeCategoryMarkers","ownKeys","getOwnPropertySymbols","getOwnPropertyDescriptors","defineProperties","obj","LONG_TOUCH_DELAY_MS","MOBILE_IDLE_DELAY_MS","MOBILE_IDLE_TIMEOUT","Scene","currentMarker","popup","savedLocation","getPoiView","zoom","getBestZoom","bounds","hideMobileScale","item","showMobileScale","getMapInitOptions","locationHash","parseBboxString","console","hotLoadPoi","lastLocation","getLastLocation","initialBbox","fitBoundsOptions","maxZoom","mapConfig","initMapBox","times","Date","now","compilationHash","__config","setRTLTextPlugin","send","mb","attributionControl","hash","locale","setPadding","getCurrentMapPaddings","interactiveLayers","DOUBLE_TAP_DELAY_MS","lastDoubleTapTimeStamp","lastTouchEndTimeStamp","timeStamp","onHashChange","interactiveLayer","setPoiHoverStyle","hover","clickDelayHandler","cancelBubble","detail","queryRenderedFeatures","point","clickOnMap","longTouchTimeout","touches","longTouch","cancelClickAfterLongTouch","longTouchCancellingEvents","cancelLongTouch","_this$mb$getCenter","getCenter","getZoom","setLastLocation","updateHash","getLocationHash","execOnMapLoaded","forceAnimate","fitMap","ensureMarkerIsVisible","addMarker","cleanMarker","saveLocation","restoreLocation","bottom","moveMobileBottomUI","moveMobileGeolocationButton","visible","mobileButtonVisibility","clickedFeature","_ref3$longTouch","_parseMapHash","parseMapHash","flyOptions","animate","screenSpeed","clamp","min","max","isBBoxInExtendedViewport","viewport","getBounds","height","setNorthEast","setSouthWest","contains","getNorthWest","getNorthEast","getSouthEast","getSouthWest","fitBbox","fitBounds","isWindowedPoi","isMobile","isPoiUnderPanel","isPositionUnderUI","maxDuration","createDefaultPin","_this$mb$getCenter2","getMapHash","restoreFromHash","zll","onhashchange","translateUIControl","selector","uiControls","uiControl"],"mappings":";;;;;;AAAa;AACb,8CAA8C,cAAc;AAC5D;AACA,eAAe,mBAAO,CAAC,EAAiB;AACxC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mJAAmJ,kBAAkB;AACrK;AACA;;;;;;;;ACpDAA,MAAM,CAACC,OAAO,GAAG,SAASC,SAASA,CAACC,KAAK,EAAEC,cAAc,EAAEC,IAAI,EAAE;EAC/D,OAAOC,IAAI,CAACC,KAAK,CAACJ,KAAK,CACpBK,OAAO,CAAC,aAAa,EAAEH,IAAI,CAAC,CAC5BG,OAAO,CAAC,qBAAqB,EAAEJ,cAAc,CAACK,UAAU,CAAC,CACzDD,OAAO,CAAC,oBAAoB,EAAEJ,cAAc,CAACM,SAAS,CAAC,CACvDF,OAAO,CAAC,gBAAgB,EAAEJ,cAAc,CAACO,UAAU,CAAC,CACpDH,OAAO,CAAC,cAAc,EAAEJ,cAAc,CAACQ,QAAQ,CAClD,CAAC;AACH,CAAC,C;;;;;;;;ACRY;AACb;AACA,8CAA8C,cAAc;AAC5D;AACA;AACA;AACA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACN0B;AACM;AACa;AACU;AACb;AACS;AAEnD,IAAMC,QAAQ,GAAGC,IAAA,IAAa;EAAA,IAAVC,GAAG,GAAAD,IAAA,CAAHC,GAAG;EACrB,IAAAC,aAAA,GAA+DC,6BAAY,CAAC,CAAC;IAArEC,aAAa,GAAAF,aAAA,CAAbE,aAAa;IAAEC,mBAAmB,GAAAH,aAAA,CAAnBG,mBAAmB;IAAEC,cAAc,GAAAJ,aAAA,CAAdI,cAAc;EAC1D,IAAMC,iBAAiB,GAAGC,0BAAS,CAAC,WAAW,CAAC,CAACC,OAAO;EAExD,IAAMC,aAAa,GAAGA,CAAA,KAAM;IAC1BC,mBAAS,CAACC,YAAY,CAACX,GAAG,EAAE,WAAW,CAAC;IACxCY,MAAM,CAACC,GAAG,CAACC,UAAU,CAAC,UAAU,EAAE;MAAEd;IAAI,CAAC,CAAC;EAC5C,CAAC;EAED,IAAMe,kBAAkB,GAAGA,CAAA,KAAM;IAC/B,IAAMC,MAAM,GAAGhB,GAAG,CAACiB,IAAI,IAAIjB,GAAG,CAACiB,IAAI,CAACD,MAAM;IAC1C,IAAIA,MAAM,EAAE;MACVN,mBAAS,CAACC,YAAY,CACpBX,GAAG,EACH,OAAO,EACPU,mBAAS,CAACQ,oBAAoB,CAAC;QAC7BC,EAAE,EAAEnB,GAAG,CAACmB,EAAE;QACVH,MAAM;QACNI,QAAQ,EAAE,QAAQ;QAClBC,IAAI,EAAE,QAAQ;QACdC,OAAO,EAAE;MACX,CAAC,CACH,CAAC;IACH;EACF,CAAC;EAED,IAAMC,cAAc,GAAGC,CAAC,IAAI;IAC1BA,CAAC,aAADA,CAAC,eAADA,CAAC,CAAEC,cAAc,CAAC,CAAC;IACnB,IAAMC,UAAU,GAAGvB,aAAa,CAACH,GAAG,CAAC;IACrCU,mBAAS,CAACC,YAAY,CAACX,GAAG,EAAE,UAAU,EAAE;MAAE2B,MAAM,EAAE,CAACD;IAAW,CAAC,CAAC;IAChE,IAAIA,UAAU,EAAE;MACdtB,mBAAmB,CAACJ,GAAG,CAAC;IAC1B,CAAC,MAAM;MACLK,cAAc,CAACL,GAAG,CAAC;IACrB;EACF,CAAC;EAED,oBACE4B,eAAA,CAAAC,aAAA;IACEC,SAAS,EAAC,WAAW;IACrBC,YAAY,EAAEA,CAAA,KAAM;MAClBC,4BAAI,CAAC,0BAA0B,CAAC;IAClC,CAAE;IACFC,YAAY,EAAEA,CAAA,KAAM;MAClBD,4BAAI,CAAC,aAAa,CAAC;IACrB;EAAE,gBAEFJ,eAAA,CAAAC,aAAA;IAAKC,SAAS,EAAC;EAAQ,gBACrBF,eAAA,CAAAC,aAAA,CAACK,0BAAO;IAAClC,GAAG,EAAEA,GAAI;IAACmC,gBAAgB;IAACC,SAAS;IAACC,MAAM;EAAA,CAAE,CACnD,CAAC,eACNT,eAAA,CAAAC,aAAA,CAACS,gCAAa;IACZtC,GAAG,EAAEA,GAAI;IACTM,iBAAiB,EAAEA,iBAAkB;IACrCG,aAAa,EAAEA,aAAc;IAC7BM,kBAAkB,EAAEA,kBAAmB;IACvCwB,eAAe,EAAEpC,aAAa,CAACH,GAAG,CAAE;IACpCuB,cAAc,EAAEA;EAAe,CAChC,CACE,CAAC;AAEV,CAAC;AAEczB,gEAAQ,E;;+CCpEvB,qJAAA0C,mBAAA,YAAAA,oBAAA,WAAAhB,CAAA,SAAAiB,CAAA,EAAAjB,CAAA,OAAAkB,CAAA,GAAAC,MAAA,CAAAC,SAAA,EAAAC,CAAA,GAAAH,CAAA,CAAAI,cAAA,EAAAC,CAAA,GAAAJ,MAAA,CAAAK,cAAA,cAAAP,CAAA,EAAAjB,CAAA,EAAAkB,CAAA,IAAAD,CAAA,CAAAjB,CAAA,IAAAkB,CAAA,CAAAO,KAAA,KAAAC,CAAA,wBAAAC,MAAA,GAAAA,MAAA,OAAAC,CAAA,GAAAF,CAAA,CAAAG,QAAA,kBAAAC,CAAA,GAAAJ,CAAA,CAAAK,aAAA,uBAAAC,CAAA,GAAAN,CAAA,CAAAO,WAAA,8BAAAC,OAAAjB,CAAA,EAAAjB,CAAA,EAAAkB,CAAA,WAAAC,MAAA,CAAAK,cAAA,CAAAP,CAAA,EAAAjB,CAAA,IAAAyB,KAAA,EAAAP,CAAA,EAAAiB,UAAA,MAAAC,YAAA,MAAAC,QAAA,SAAApB,CAAA,CAAAjB,CAAA,WAAAkC,MAAA,mBAAAjB,CAAA,IAAAiB,MAAA,YAAAA,OAAAjB,CAAA,EAAAjB,CAAA,EAAAkB,CAAA,WAAAD,CAAA,CAAAjB,CAAA,IAAAkB,CAAA,gBAAAoB,KAAArB,CAAA,EAAAjB,CAAA,EAAAkB,CAAA,EAAAG,CAAA,QAAAK,CAAA,GAAA1B,CAAA,IAAAA,CAAA,CAAAoB,SAAA,YAAAmB,SAAA,GAAAvC,CAAA,GAAAuC,SAAA,EAAAX,CAAA,GAAAT,MAAA,CAAAqB,MAAA,CAAAd,CAAA,CAAAN,SAAA,GAAAU,CAAA,OAAAW,OAAA,CAAApB,CAAA,gBAAAE,CAAA,CAAAK,CAAA,eAAAH,KAAA,EAAAiB,gBAAA,CAAAzB,CAAA,EAAAC,CAAA,EAAAY,CAAA,MAAAF,CAAA,aAAAe,SAAA1B,CAAA,EAAAjB,CAAA,EAAAkB,CAAA,mBAAA0B,IAAA,YAAAC,GAAA,EAAA5B,CAAA,CAAA6B,IAAA,CAAA9C,CAAA,EAAAkB,CAAA,cAAAD,CAAA,aAAA2B,IAAA,WAAAC,GAAA,EAAA5B,CAAA,QAAAjB,CAAA,CAAAsC,IAAA,GAAAA,IAAA,MAAAS,CAAA,qBAAAC,CAAA,qBAAAC,CAAA,gBAAAC,CAAA,gBAAAC,CAAA,gBAAAZ,UAAA,cAAAa,kBAAA,cAAAC,2BAAA,SAAAC,CAAA,OAAApB,MAAA,CAAAoB,CAAA,EAAA1B,CAAA,qCAAA2B,CAAA,GAAApC,MAAA,CAAAqC,cAAA,EAAAC,CAAA,GAAAF,CAAA,IAAAA,CAAA,CAAAA,CAAA,CAAAG,MAAA,QAAAD,CAAA,IAAAA,CAAA,KAAAvC,CAAA,IAAAG,CAAA,CAAAyB,IAAA,CAAAW,CAAA,EAAA7B,CAAA,MAAA0B,CAAA,GAAAG,CAAA,OAAAE,CAAA,GAAAN,0BAAA,CAAAjC,SAAA,GAAAmB,SAAA,CAAAnB,SAAA,GAAAD,MAAA,CAAAqB,MAAA,CAAAc,CAAA,YAAAM,sBAAA3C,CAAA,gCAAA4C,OAAA,WAAA7D,CAAA,IAAAkC,MAAA,CAAAjB,CAAA,EAAAjB,CAAA,YAAAiB,CAAA,gBAAA6C,OAAA,CAAA9D,CAAA,EAAAiB,CAAA,sBAAA8C,cAAA9C,CAAA,EAAAjB,CAAA,aAAAgE,OAAA9C,CAAA,EAAAK,CAAA,EAAAG,CAAA,EAAAE,CAAA,QAAAE,CAAA,GAAAa,QAAA,CAAA1B,CAAA,CAAAC,CAAA,GAAAD,CAAA,EAAAM,CAAA,mBAAAO,CAAA,CAAAc,IAAA,QAAAZ,CAAA,GAAAF,CAAA,CAAAe,GAAA,EAAAE,CAAA,GAAAf,CAAA,CAAAP,KAAA,SAAAsB,CAAA,uBAAAA,CAAA,IAAA1B,CAAA,CAAAyB,IAAA,CAAAC,CAAA,eAAA/C,CAAA,CAAAiE,OAAA,CAAAlB,CAAA,CAAAmB,OAAA,EAAAC,IAAA,WAAAlD,CAAA,IAAA+C,MAAA,SAAA/C,CAAA,EAAAS,CAAA,EAAAE,CAAA,gBAAAX,CAAA,IAAA+C,MAAA,UAAA/C,CAAA,EAAAS,CAAA,EAAAE,CAAA,QAAA5B,CAAA,CAAAiE,OAAA,CAAAlB,CAAA,EAAAoB,IAAA,WAAAlD,CAAA,IAAAe,CAAA,CAAAP,KAAA,GAAAR,CAAA,EAAAS,CAAA,CAAAM,CAAA,gBAAAf,CAAA,WAAA+C,MAAA,UAAA/C,CAAA,EAAAS,CAAA,EAAAE,CAAA,SAAAA,CAAA,CAAAE,CAAA,CAAAe,GAAA,SAAA3B,CAAA,EAAAK,CAAA,oBAAAE,KAAA,WAAAA,MAAAR,CAAA,EAAAI,CAAA,aAAA+C,2BAAA,eAAApE,CAAA,WAAAA,CAAA,EAAAkB,CAAA,IAAA8C,MAAA,CAAA/C,CAAA,EAAAI,CAAA,EAAArB,CAAA,EAAAkB,CAAA,gBAAAA,CAAA,GAAAA,CAAA,GAAAA,CAAA,CAAAiD,IAAA,CAAAC,0BAAA,EAAAA,0BAAA,IAAAA,0BAAA,qBAAA1B,iBAAA1C,CAAA,EAAAkB,CAAA,EAAAG,CAAA,QAAAE,CAAA,GAAAwB,CAAA,mBAAArB,CAAA,EAAAE,CAAA,QAAAL,CAAA,KAAA0B,CAAA,YAAAoB,KAAA,sCAAA9C,CAAA,KAAA2B,CAAA,oBAAAxB,CAAA,QAAAE,CAAA,WAAAH,KAAA,EAAAR,CAAA,EAAAqD,IAAA,eAAAjD,CAAA,CAAAkD,MAAA,GAAA7C,CAAA,EAAAL,CAAA,CAAAwB,GAAA,GAAAjB,CAAA,UAAAE,CAAA,GAAAT,CAAA,CAAAmD,QAAA,MAAA1C,CAAA,QAAAE,CAAA,GAAAyC,mBAAA,CAAA3C,CAAA,EAAAT,CAAA,OAAAW,CAAA,QAAAA,CAAA,KAAAmB,CAAA,mBAAAnB,CAAA,qBAAAX,CAAA,CAAAkD,MAAA,EAAAlD,CAAA,CAAAqD,IAAA,GAAArD,CAAA,CAAAsD,KAAA,GAAAtD,CAAA,CAAAwB,GAAA,sBAAAxB,CAAA,CAAAkD,MAAA,QAAAhD,CAAA,KAAAwB,CAAA,QAAAxB,CAAA,GAAA2B,CAAA,EAAA7B,CAAA,CAAAwB,GAAA,EAAAxB,CAAA,CAAAuD,iBAAA,CAAAvD,CAAA,CAAAwB,GAAA,uBAAAxB,CAAA,CAAAkD,MAAA,IAAAlD,CAAA,CAAAwD,MAAA,WAAAxD,CAAA,CAAAwB,GAAA,GAAAtB,CAAA,GAAA0B,CAAA,MAAAK,CAAA,GAAAX,QAAA,CAAA3C,CAAA,EAAAkB,CAAA,EAAAG,CAAA,oBAAAiC,CAAA,CAAAV,IAAA,QAAArB,CAAA,GAAAF,CAAA,CAAAiD,IAAA,GAAApB,CAAA,GAAAF,CAAA,EAAAM,CAAA,CAAAT,GAAA,KAAAM,CAAA,qBAAA1B,KAAA,EAAA6B,CAAA,CAAAT,GAAA,EAAAyB,IAAA,EAAAjD,CAAA,CAAAiD,IAAA,kBAAAhB,CAAA,CAAAV,IAAA,KAAArB,CAAA,GAAA2B,CAAA,EAAA7B,CAAA,CAAAkD,MAAA,YAAAlD,CAAA,CAAAwB,GAAA,GAAAS,CAAA,CAAAT,GAAA,mBAAA4B,oBAAAzE,CAAA,EAAAkB,CAAA,QAAAG,CAAA,GAAAH,CAAA,CAAAqD,MAAA,EAAAhD,CAAA,GAAAvB,CAAA,CAAA6B,QAAA,CAAAR,CAAA,OAAAE,CAAA,KAAAN,CAAA,SAAAC,CAAA,CAAAsD,QAAA,qBAAAnD,CAAA,IAAArB,CAAA,CAAA6B,QAAA,CAAAiD,MAAA,KAAA5D,CAAA,CAAAqD,MAAA,aAAArD,CAAA,CAAA2B,GAAA,GAAA5B,CAAA,EAAAwD,mBAAA,CAAAzE,CAAA,EAAAkB,CAAA,eAAAA,CAAA,CAAAqD,MAAA,kBAAAlD,CAAA,KAAAH,CAAA,CAAAqD,MAAA,YAAArD,CAAA,CAAA2B,GAAA,OAAAkC,SAAA,uCAAA1D,CAAA,iBAAA8B,CAAA,MAAAzB,CAAA,GAAAiB,QAAA,CAAApB,CAAA,EAAAvB,CAAA,CAAA6B,QAAA,EAAAX,CAAA,CAAA2B,GAAA,mBAAAnB,CAAA,CAAAkB,IAAA,SAAA1B,CAAA,CAAAqD,MAAA,YAAArD,CAAA,CAAA2B,GAAA,GAAAnB,CAAA,CAAAmB,GAAA,EAAA3B,CAAA,CAAAsD,QAAA,SAAArB,CAAA,MAAAvB,CAAA,GAAAF,CAAA,CAAAmB,GAAA,SAAAjB,CAAA,GAAAA,CAAA,CAAA0C,IAAA,IAAApD,CAAA,CAAAlB,CAAA,CAAAgF,UAAA,IAAApD,CAAA,CAAAH,KAAA,EAAAP,CAAA,CAAA+D,IAAA,GAAAjF,CAAA,CAAAkF,OAAA,eAAAhE,CAAA,CAAAqD,MAAA,KAAArD,CAAA,CAAAqD,MAAA,WAAArD,CAAA,CAAA2B,GAAA,GAAA5B,CAAA,GAAAC,CAAA,CAAAsD,QAAA,SAAArB,CAAA,IAAAvB,CAAA,IAAAV,CAAA,CAAAqD,MAAA,YAAArD,CAAA,CAAA2B,GAAA,OAAAkC,SAAA,sCAAA7D,CAAA,CAAAsD,QAAA,SAAArB,CAAA,cAAAgC,aAAAlE,CAAA,QAAAjB,CAAA,KAAAoF,MAAA,EAAAnE,CAAA,YAAAA,CAAA,KAAAjB,CAAA,CAAAqF,QAAA,GAAApE,CAAA,WAAAA,CAAA,KAAAjB,CAAA,CAAAsF,UAAA,GAAArE,CAAA,KAAAjB,CAAA,CAAAuF,QAAA,GAAAtE,CAAA,WAAAuE,UAAA,CAAAC,IAAA,CAAAzF,CAAA,cAAA0F,cAAAzE,CAAA,QAAAjB,CAAA,GAAAiB,CAAA,CAAA0E,UAAA,QAAA3F,CAAA,CAAA4C,IAAA,oBAAA5C,CAAA,CAAA6C,GAAA,EAAA5B,CAAA,CAAA0E,UAAA,GAAA3F,CAAA,aAAAyC,QAAAxB,CAAA,SAAAuE,UAAA,MAAAJ,MAAA,aAAAnE,CAAA,CAAA4C,OAAA,CAAAsB,YAAA,cAAAS,KAAA,iBAAAlC,OAAA1D,CAAA,QAAAA,CAAA,WAAAA,CAAA,QAAAkB,CAAA,GAAAlB,CAAA,CAAA4B,CAAA,OAAAV,CAAA,SAAAA,CAAA,CAAA4B,IAAA,CAAA9C,CAAA,4BAAAA,CAAA,CAAAiF,IAAA,SAAAjF,CAAA,OAAA6F,KAAA,CAAA7F,CAAA,CAAA8F,MAAA,SAAAvE,CAAA,OAAAG,CAAA,YAAAuD,KAAA,aAAA1D,CAAA,GAAAvB,CAAA,CAAA8F,MAAA,OAAAzE,CAAA,CAAAyB,IAAA,CAAA9C,CAAA,EAAAuB,CAAA,UAAA0D,IAAA,CAAAxD,KAAA,GAAAzB,CAAA,CAAAuB,CAAA,GAAA0D,IAAA,CAAAX,IAAA,OAAAW,IAAA,SAAAA,IAAA,CAAAxD,KAAA,GAAAR,CAAA,EAAAgE,IAAA,CAAAX,IAAA,OAAAW,IAAA,YAAAvD,CAAA,CAAAuD,IAAA,GAAAvD,CAAA,gBAAAqD,SAAA,QAAA/E,CAAA,iCAAAoD,iBAAA,CAAAhC,SAAA,GAAAiC,0BAAA,EAAA9B,CAAA,CAAAoC,CAAA,mBAAAlC,KAAA,EAAA4B,0BAAA,EAAAjB,YAAA,SAAAb,CAAA,CAAA8B,0BAAA,mBAAA5B,KAAA,EAAA2B,iBAAA,EAAAhB,YAAA,SAAAgB,iBAAA,CAAA2C,WAAA,GAAA7D,MAAA,CAAAmB,0BAAA,EAAArB,CAAA,wBAAAhC,CAAA,CAAAgG,mBAAA,aAAA/E,CAAA,QAAAjB,CAAA,wBAAAiB,CAAA,IAAAA,CAAA,CAAAgF,WAAA,WAAAjG,CAAA,KAAAA,CAAA,KAAAoD,iBAAA,6BAAApD,CAAA,CAAA+F,WAAA,IAAA/F,CAAA,CAAAkG,IAAA,OAAAlG,CAAA,CAAAmG,IAAA,aAAAlF,CAAA,WAAAE,MAAA,CAAAiF,cAAA,GAAAjF,MAAA,CAAAiF,cAAA,CAAAnF,CAAA,EAAAoC,0BAAA,KAAApC,CAAA,CAAAoF,SAAA,GAAAhD,0BAAA,EAAAnB,MAAA,CAAAjB,CAAA,EAAAe,CAAA,yBAAAf,CAAA,CAAAG,SAAA,GAAAD,MAAA,CAAAqB,MAAA,CAAAmB,CAAA,GAAA1C,CAAA,KAAAjB,CAAA,CAAAsG,KAAA,aAAArF,CAAA,aAAAiD,OAAA,EAAAjD,CAAA,OAAA2C,qBAAA,CAAAG,aAAA,CAAA3C,SAAA,GAAAc,MAAA,CAAA6B,aAAA,CAAA3C,SAAA,EAAAU,CAAA,iCAAA9B,CAAA,CAAA+D,aAAA,GAAAA,aAAA,EAAA/D,CAAA,CAAAuG,KAAA,aAAAtF,CAAA,EAAAC,CAAA,EAAAG,CAAA,EAAAE,CAAA,EAAAG,CAAA,eAAAA,CAAA,KAAAA,CAAA,GAAA8E,OAAA,OAAA5E,CAAA,OAAAmC,aAAA,CAAAzB,IAAA,CAAArB,CAAA,EAAAC,CAAA,EAAAG,CAAA,EAAAE,CAAA,GAAAG,CAAA,UAAA1B,CAAA,CAAAgG,mBAAA,CAAA9E,CAAA,IAAAU,CAAA,GAAAA,CAAA,CAAAqD,IAAA,GAAAd,IAAA,WAAAlD,CAAA,WAAAA,CAAA,CAAAqD,IAAA,GAAArD,CAAA,CAAAQ,KAAA,GAAAG,CAAA,CAAAqD,IAAA,WAAArB,qBAAA,CAAAD,CAAA,GAAAzB,MAAA,CAAAyB,CAAA,EAAA3B,CAAA,gBAAAE,MAAA,CAAAyB,CAAA,EAAA/B,CAAA,iCAAAM,MAAA,CAAAyB,CAAA,6DAAA3D,CAAA,CAAAyG,IAAA,aAAAxF,CAAA,QAAAjB,CAAA,GAAAmB,MAAA,CAAAF,CAAA,GAAAC,CAAA,gBAAAG,CAAA,IAAArB,CAAA,EAAAkB,CAAA,CAAAuE,IAAA,CAAApE,CAAA,UAAAH,CAAA,CAAAwF,OAAA,aAAAzB,KAAA,WAAA/D,CAAA,CAAA4E,MAAA,SAAA7E,CAAA,GAAAC,CAAA,CAAAyF,GAAA,QAAA1F,CAAA,IAAAjB,CAAA,SAAAiF,IAAA,CAAAxD,KAAA,GAAAR,CAAA,EAAAgE,IAAA,CAAAX,IAAA,OAAAW,IAAA,WAAAA,IAAA,CAAAX,IAAA,OAAAW,IAAA,QAAAjF,CAAA,CAAA0D,MAAA,GAAAA,MAAA,EAAAjB,OAAA,CAAArB,SAAA,KAAA6E,WAAA,EAAAxD,OAAA,EAAAmD,KAAA,WAAAA,MAAA5F,CAAA,aAAA4G,IAAA,WAAA3B,IAAA,WAAAP,IAAA,QAAAC,KAAA,GAAA1D,CAAA,OAAAqD,IAAA,YAAAE,QAAA,cAAAD,MAAA,gBAAA1B,GAAA,GAAA5B,CAAA,OAAAuE,UAAA,CAAA3B,OAAA,CAAA6B,aAAA,IAAA1F,CAAA,WAAAkB,CAAA,kBAAAA,CAAA,CAAA2F,MAAA,OAAAxF,CAAA,CAAAyB,IAAA,OAAA5B,CAAA,MAAA2E,KAAA,EAAA3E,CAAA,CAAA4F,KAAA,cAAA5F,CAAA,IAAAD,CAAA,MAAA8F,IAAA,WAAAA,KAAA,SAAAzC,IAAA,WAAArD,CAAA,QAAAuE,UAAA,IAAAG,UAAA,kBAAA1E,CAAA,CAAA2B,IAAA,QAAA3B,CAAA,CAAA4B,GAAA,cAAAmE,IAAA,KAAApC,iBAAA,WAAAA,kBAAA5E,CAAA,aAAAsE,IAAA,QAAAtE,CAAA,MAAAkB,CAAA,kBAAA+F,OAAA5F,CAAA,EAAAE,CAAA,WAAAK,CAAA,CAAAgB,IAAA,YAAAhB,CAAA,CAAAiB,GAAA,GAAA7C,CAAA,EAAAkB,CAAA,CAAA+D,IAAA,GAAA5D,CAAA,EAAAE,CAAA,KAAAL,CAAA,CAAAqD,MAAA,WAAArD,CAAA,CAAA2B,GAAA,GAAA5B,CAAA,KAAAM,CAAA,aAAAA,CAAA,QAAAiE,UAAA,CAAAM,MAAA,MAAAvE,CAAA,SAAAA,CAAA,QAAAG,CAAA,QAAA8D,UAAA,CAAAjE,CAAA,GAAAK,CAAA,GAAAF,CAAA,CAAAiE,UAAA,iBAAAjE,CAAA,CAAA0D,MAAA,SAAA6B,MAAA,aAAAvF,CAAA,CAAA0D,MAAA,SAAAwB,IAAA,QAAA9E,CAAA,GAAAT,CAAA,CAAAyB,IAAA,CAAApB,CAAA,eAAAM,CAAA,GAAAX,CAAA,CAAAyB,IAAA,CAAApB,CAAA,qBAAAI,CAAA,IAAAE,CAAA,aAAA4E,IAAA,GAAAlF,CAAA,CAAA2D,QAAA,SAAA4B,MAAA,CAAAvF,CAAA,CAAA2D,QAAA,gBAAAuB,IAAA,GAAAlF,CAAA,CAAA4D,UAAA,SAAA2B,MAAA,CAAAvF,CAAA,CAAA4D,UAAA,cAAAxD,CAAA,aAAA8E,IAAA,GAAAlF,CAAA,CAAA2D,QAAA,SAAA4B,MAAA,CAAAvF,CAAA,CAAA2D,QAAA,qBAAArD,CAAA,YAAAqC,KAAA,qDAAAuC,IAAA,GAAAlF,CAAA,CAAA4D,UAAA,SAAA2B,MAAA,CAAAvF,CAAA,CAAA4D,UAAA,YAAAT,MAAA,WAAAA,OAAA5D,CAAA,EAAAjB,CAAA,aAAAkB,CAAA,QAAAsE,UAAA,CAAAM,MAAA,MAAA5E,CAAA,SAAAA,CAAA,QAAAK,CAAA,QAAAiE,UAAA,CAAAtE,CAAA,OAAAK,CAAA,CAAA6D,MAAA,SAAAwB,IAAA,IAAAvF,CAAA,CAAAyB,IAAA,CAAAvB,CAAA,wBAAAqF,IAAA,GAAArF,CAAA,CAAA+D,UAAA,QAAA5D,CAAA,GAAAH,CAAA,aAAAG,CAAA,iBAAAT,CAAA,mBAAAA,CAAA,KAAAS,CAAA,CAAA0D,MAAA,IAAApF,CAAA,IAAAA,CAAA,IAAA0B,CAAA,CAAA4D,UAAA,KAAA5D,CAAA,cAAAE,CAAA,GAAAF,CAAA,GAAAA,CAAA,CAAAiE,UAAA,cAAA/D,CAAA,CAAAgB,IAAA,GAAA3B,CAAA,EAAAW,CAAA,CAAAiB,GAAA,GAAA7C,CAAA,EAAA0B,CAAA,SAAA6C,MAAA,gBAAAU,IAAA,GAAAvD,CAAA,CAAA4D,UAAA,EAAAnC,CAAA,SAAA+D,QAAA,CAAAtF,CAAA,MAAAsF,QAAA,WAAAA,SAAAjG,CAAA,EAAAjB,CAAA,oBAAAiB,CAAA,CAAA2B,IAAA,QAAA3B,CAAA,CAAA4B,GAAA,qBAAA5B,CAAA,CAAA2B,IAAA,mBAAA3B,CAAA,CAAA2B,IAAA,QAAAqC,IAAA,GAAAhE,CAAA,CAAA4B,GAAA,gBAAA5B,CAAA,CAAA2B,IAAA,SAAAoE,IAAA,QAAAnE,GAAA,GAAA5B,CAAA,CAAA4B,GAAA,OAAA0B,MAAA,kBAAAU,IAAA,yBAAAhE,CAAA,CAAA2B,IAAA,IAAA5C,CAAA,UAAAiF,IAAA,GAAAjF,CAAA,GAAAmD,CAAA,KAAAgE,MAAA,WAAAA,OAAAlG,CAAA,aAAAjB,CAAA,QAAAwF,UAAA,CAAAM,MAAA,MAAA9F,CAAA,SAAAA,CAAA,QAAAkB,CAAA,QAAAsE,UAAA,CAAAxF,CAAA,OAAAkB,CAAA,CAAAoE,UAAA,KAAArE,CAAA,cAAAiG,QAAA,CAAAhG,CAAA,CAAAyE,UAAA,EAAAzE,CAAA,CAAAqE,QAAA,GAAAG,aAAA,CAAAxE,CAAA,GAAAiC,CAAA,OAAAiE,KAAA,WAAAC,OAAApG,CAAA,aAAAjB,CAAA,QAAAwF,UAAA,CAAAM,MAAA,MAAA9F,CAAA,SAAAA,CAAA,QAAAkB,CAAA,QAAAsE,UAAA,CAAAxF,CAAA,OAAAkB,CAAA,CAAAkE,MAAA,KAAAnE,CAAA,QAAAI,CAAA,GAAAH,CAAA,CAAAyE,UAAA,kBAAAtE,CAAA,CAAAuB,IAAA,QAAArB,CAAA,GAAAF,CAAA,CAAAwB,GAAA,EAAA6C,aAAA,CAAAxE,CAAA,YAAAK,CAAA,gBAAA8C,KAAA,8BAAAiD,aAAA,WAAAA,cAAAtH,CAAA,EAAAkB,CAAA,EAAAG,CAAA,gBAAAmD,QAAA,KAAA3C,QAAA,EAAA6B,MAAA,CAAA1D,CAAA,GAAAgF,UAAA,EAAA9D,CAAA,EAAAgE,OAAA,EAAA7D,CAAA,oBAAAkD,MAAA,UAAA1B,GAAA,GAAA5B,CAAA,GAAAkC,CAAA,OAAAnD,CAAA;AAAA,SAAAuH,mBAAAC,GAAA,EAAAvD,OAAA,EAAAwD,MAAA,EAAAC,KAAA,EAAAC,MAAA,EAAAC,GAAA,EAAA/E,GAAA,cAAAgF,IAAA,GAAAL,GAAA,CAAAI,GAAA,EAAA/E,GAAA,OAAApB,KAAA,GAAAoG,IAAA,CAAApG,KAAA,WAAAqG,KAAA,IAAAL,MAAA,CAAAK,KAAA,iBAAAD,IAAA,CAAAvD,IAAA,IAAAL,OAAA,CAAAxC,KAAA,YAAA+E,OAAA,CAAAvC,OAAA,CAAAxC,KAAA,EAAA0C,IAAA,CAAAuD,KAAA,EAAAC,MAAA;AAAA,SAAAI,kBAAAC,EAAA,6BAAAC,IAAA,SAAAC,IAAA,GAAAC,SAAA,aAAA3B,OAAA,WAAAvC,OAAA,EAAAwD,MAAA,QAAAD,GAAA,GAAAQ,EAAA,CAAAI,KAAA,CAAAH,IAAA,EAAAC,IAAA,YAAAR,MAAAjG,KAAA,IAAA8F,kBAAA,CAAAC,GAAA,EAAAvD,OAAA,EAAAwD,MAAA,EAAAC,KAAA,EAAAC,MAAA,UAAAlG,KAAA,cAAAkG,OAAAU,GAAA,IAAAd,kBAAA,CAAAC,GAAA,EAAAvD,OAAA,EAAAwD,MAAA,EAAAC,KAAA,EAAAC,MAAA,WAAAU,GAAA,KAAAX,KAAA,CAAAY,SAAA;AAD0B;AACO;AACG;AACC;AACY;AACG;AACC;AAErD,IAAMC,mBAAmB,GAAG,GAAG;AAC/B,IAAMC,iBAAiB,GAAG,GAAG;AAE7B,SAASlK,kBAAQA,CAAA,EAAG;EAClB,OAAOgK,SAAS;AAClB;AAEAhK,kBAAQ,CAAC8C,SAAS,CAACqH,IAAI,GAAG,UAAUC,GAAG,EAAE;EACvC,IAAI,CAACA,GAAG,GAAGA,GAAG;EACd,IAAI,CAACC,WAAW,GAAG,IAAI;EACvB,IAAI,CAACC,cAAc,GAAG,IAAI;EAC1B,IAAI,CAACC,WAAW,GAAG,IAAI;EACvB,IAAI,CAACC,mBAAmB,GAAG,IAAI;EAE/BC,8BAAM,CAAC,YAAY,EAAE,CAACvK,GAAG,EAAEwB,CAAC,KAAK;IAC/B,IAAIgJ,wCAAc,CAAC,CAAC,IAAIC,YAAY,CAACjJ,CAAC,CAAC,EAAE;MACvC;IACF;IACA,IAAI,CAACkJ,aAAa,CAAC1K,GAAG,EAAEwB,CAAC,CAAC;IAC1BQ,4BAAI,CAAC,0BAA0B,CAAC;EAClC,CAAC,CAAC;EACFuI,8BAAM,CAAC,aAAa,EAAE,MAAM,IAAI,CAACI,KAAK,CAAC,CAAC,CAAC;EACzCJ,8BAAM,CAAC,cAAc,EAAE,MAAM;IAC3B,IAAI,CAACI,KAAK,CAAC,CAAC;IACZ,IAAI,CAACN,WAAW,GAAG,IAAI;EACzB,CAAC,CAAC;EAEFE,8BAAM,CAAC,0BAA0B,EAAE,MAAMK,YAAY,CAAC,IAAI,CAACN,mBAAmB,CAAC,CAAC;EAChFC,8BAAM,CAAC,2BAA2B,EAAE,MAAM;IACxCK,YAAY,CAAC,IAAI,CAACN,mBAAmB,CAAC;IACtC,IAAI,CAACA,mBAAmB,GAAGO,UAAU,CAAC,MAAM;MAC1C7I,4BAAI,CAAC,aAAa,CAAC;IACrB,CAAC,EAAEgI,iBAAiB,CAAC;EACvB,CAAC,CAAC;AACJ,CAAC;AAEDlK,kBAAQ,CAAC8C,SAAS,CAACkI,WAAW,GAAG,UAAUC,KAAK,EAAE;EAAA,IAAAC,KAAA;EAChD,IAAI,CAACd,GAAG,CAACe,EAAE,CAAC,YAAY,EAAEF,KAAK,EAAEvJ,CAAC,IAAI;IACpC,IAAIgJ,wCAAc,CAAC,CAAC,IAAIC,YAAY,CAACjJ,CAAC,CAAC,EAAE;MACvC;IACF;IACA,IAAI,CAAC4I,cAAc,GAAGS,UAAU,CAAC,MAAM;MACrC,IAAM7K,GAAG,GAAGwB,CAAC,CAAC0J,QAAQ,CAAC,CAAC,CAAC;MACzB,IAAI,IAAI,CAACb,WAAW,KAAKrK,GAAG,CAACmL,UAAU,CAACC,SAAS,EAAE;QACjD;MACF;MACA,IAAI,CAACC,cAAc,CAACrL,GAAG,EAAEwB,CAAC,CAAC8J,aAAa,CAAC;IAC3C,CAAC,EAAEvB,mBAAmB,CAAC;EACzB,CAAC,CAAC;EAEF,IAAI,CAACG,GAAG,CAACe,EAAE,CAAC,OAAO,EAAE,MAAM;IACzB,IAAI,CAACN,KAAK,CAAC,CAAC;EACd,CAAC,CAAC;EAEF,IAAI,CAACT,GAAG,CAACe,EAAE,CAAC,YAAY,EAAEF,KAAK,eAAAxB,iBAAA,eAAA/G,mBAAA,GAAAmF,IAAA,CAAE,SAAA4D,QAAA;IAAA,OAAA/I,mBAAA,GAAAsB,IAAA,UAAA0H,SAAAC,QAAA;MAAA,kBAAAA,QAAA,CAAArD,IAAA,GAAAqD,QAAA,CAAAhF,IAAA;QAAA;UAC/BmE,YAAY,CAACI,KAAI,CAACZ,cAAc,CAAC;UACjCpI,4BAAI,CAAC,2BAA2B,CAAC;QAAC;QAAA;UAAA,OAAAyJ,QAAA,CAAAlD,IAAA;MAAA;IAAA,GAAAgD,OAAA;EAAA,CACnC,GAAC;AACJ,CAAC;AAEDzL,kBAAQ,CAAC8C,SAAS,CAACyI,cAAc;EAAA,IAAAK,KAAA,GAAAnC,iBAAA,eAAA/G,mBAAA,GAAAmF,IAAA,CAAG,SAAAgE,SAAgBC,QAAQ,EAAEC,KAAK;IAAA,IAAA7L,GAAA;IAAA,OAAAwC,mBAAA,GAAAsB,IAAA,UAAAgI,UAAAC,SAAA;MAAA,kBAAAA,SAAA,CAAA3D,IAAA,GAAA2D,SAAA,CAAAtF,IAAA;QAAA;UAAAsF,SAAA,CAAAtF,IAAA;UAAA,OAC/CuF,mBAAM,CAACC,UAAU,CACjC;YAAE9K,EAAE,EAAEyK,QAAQ,CAACT,UAAU,CAACC,SAAS;YAAEc,QAAQ,EAAEN,QAAQ,CAACT,UAAU,CAACe;UAAS,CAAC,EAC7E;YAAEC,MAAM,EAAE;UAAK,CACjB,CAAC;QAAA;UAHKnM,GAAG,GAAA+L,SAAA,CAAA7F,IAAA;UAIT,IAAIlG,GAAG,EAAE;YACP,IAAI,CAACoM,SAAS,CAACpM,GAAG,EAAE6L,KAAK,CAAC;UAC5B;QAAC;QAAA;UAAA,OAAAE,SAAA,CAAAxD,IAAA;MAAA;IAAA,GAAAoD,QAAA;EAAA,CACF;EAAA,iBAAAU,EAAA,EAAAC,GAAA;IAAA,OAAAZ,KAAA,CAAA9B,KAAA,OAAAD,SAAA;EAAA;AAAA;AAED7J,kBAAQ,CAAC8C,SAAS,CAAC8H,aAAa,GAAG,UAAU1K,GAAG,EAAE6L,KAAK,EAAE;EACvD,IAAI7L,GAAG,EAAE;IACP,IAAI,CAACoM,SAAS,CAACpM,GAAG,EAAE6L,KAAK,CAAC;EAC5B;AACF,CAAC;AAED/L,kBAAQ,CAAC8C,SAAS,CAACwJ,SAAS,GAAG,UAAUpM,GAAG,EAAE6L,KAAK,EAAE;EACnD,IAAI,CAAClB,KAAK,CAAC,CAAC;EAEZ,IAAM4B,YAAY,GAAG;IACnBzK,SAAS,EAAE,sBAAsB;IACjC0K,WAAW,EAAE,KAAK;IAClBC,QAAQ,EAAE,MAAM;IAChBC,MAAM,EAAE,EAAE;IAAE;IACZC,MAAM,EAAE,IAAI,CAACC,cAAc,CAACf,KAAK;EACnC,CAAC;EAED,IAAI,CAAC1B,WAAW,GAAG,IAAI0C,oBAAK,CAACN,YAAY,CAAC,CACvCO,SAAS,CAAC9M,GAAG,CAAC+M,MAAM,CAAC,CACrBC,OAAO,CAAC,yCAAyC,CAAC,CAClDC,KAAK,CAAC,IAAI,CAAC/C,GAAG,CAAC;EAElB,IAAMgD,YAAY,GAAGC,QAAQ,CAACC,aAAa,CAAC,qBAAqB,CAAC;EAClE,IAAIF,YAAY,EAAE;IAChBG,mBAAQ,CAACC,MAAM,eAAC1L,eAAA,CAAAC,aAAA,CAAC0L,mBAAa;MAACvN,GAAG,EAAEA;IAAI,CAAE,CAAC,EAAEkN,YAAY,CAAC;EAC5D;AACF,CAAC;AAEDpN,kBAAQ,CAAC8C,SAAS,CAACgK,cAAc,GAAG,UAAUf,KAAK,EAAE;EACnD,IAAM2B,eAAe,GAAG,GAAG;EAC3B,IAAMC,iBAAiB,GAAG,GAAG;EAC7B,IAAMC,WAAW,GAAG9M,MAAM,CAAC+M,UAAU;EACrC,IAAMC,eAAe,GAAG,EAAE;EAE1B,IAAI/B,KAAK,EAAE;IACT,IAAIA,KAAK,CAACgC,OAAO,GAAGL,eAAe,EAAE;MACnCI,eAAe,CAAC3G,IAAI,CAAC,QAAQ,CAAC;IAChC,CAAC,MAAM;MACL2G,eAAe,CAAC3G,IAAI,CAAC,KAAK,CAAC;IAC7B;IAEA,IAAI4E,KAAK,CAACiC,OAAO,GAAGJ,WAAW,GAAGD,iBAAiB,EAAE;MACnDG,eAAe,CAAC3G,IAAI,CAAC,MAAM,CAAC;IAC9B,CAAC,MAAM;MACL2G,eAAe,CAAC3G,IAAI,CAAC,OAAO,CAAC;IAC/B;EACF,CAAC,MAAM;IACL2G,eAAe,CAAC3G,IAAI,CAAC,QAAQ,CAAC;IAC9B2G,eAAe,CAAC3G,IAAI,CAAC,MAAM,CAAC;EAC9B;EAEA,OAAO2G,eAAe,CAACG,IAAI,CAAC,GAAG,CAAC;AAClC,CAAC;AAEDjO,kBAAQ,CAAC8C,SAAS,CAAC+H,KAAK,GAAG,YAAY;EACrC,IAAI,IAAI,CAACR,WAAW,EAAE;IACpBnI,4BAAI,CAAC,0BAA0B,CAAC;IAChC,IAAMkL,YAAY,GAAGC,QAAQ,CAACC,aAAa,CAAC,qBAAqB,CAAC;IAClE,IAAIF,YAAY,EAAE;MAChBG,mBAAQ,CAACW,sBAAsB,CAACd,YAAY,CAAC;IAC/C;IACA,IAAI,CAAC/C,WAAW,CAAC8D,MAAM,CAAC,CAAC;IACzB,IAAI,CAAC9D,WAAW,GAAG,IAAI;EACzB;AACF,CAAC;;AAED;AACA,SAASM,YAAYA,CAACoB,KAAK,EAAE;EAC3B,IAAIA,KAAK,IAAIA,KAAK,CAACP,aAAa,IAAIO,KAAK,CAACP,aAAa,CAAC4C,kBAAkB,EAAE;IAC1E,OAAOrC,KAAK,CAACP,aAAa,CAAC4C,kBAAkB,CAACC,gBAAgB,KAAK,IAAI;EACzE;EACA,OAAO,KAAK;AACd;AAEerO,gEAAQ,E;;;;;;;ICxJFsO,oBAAoB;EACvC,SAAAA,qBAAA,EAAc;IAAAC,eAAA,OAAAD,oBAAA;IACZ,IAAI,CAACE,UAAU,GAAGnB,QAAQ,CAACtL,aAAa,CAAC,KAAK,CAAC;IAC/C,IAAM0M,YAAY,GAAG,4CAA4C;IACjE,IAAI,CAACC,QAAQ,GAAG,IAAI,CAACC,aAAa,CAACF,YAAY,EAAE,aAAa,EAAE,MAAM;MACpE,IAAI,CAACG,kBAAkB,CAAC,CAAC;IAC3B,CAAC,CAAC;IAEF,IAAMC,qBAAqB,GAAG,+DAA+D;IAC7F,IAAI,CAACC,iBAAiB,GAAG,IAAI,CAACC,WAAW,CAACF,qBAAqB,CAAC;IAChE,IAAI,CAACH,QAAQ,CAACM,WAAW,CAAC,IAAI,CAACF,iBAAiB,CAAC;EACnD;EAACG,YAAA,CAAAX,oBAAA;IAAAhF,GAAA;IAAAnG,KAAA,EAED,SAAA+L,MAAM9E,GAAG,EAAE;MACT,IAAI,CAAC+E,IAAI,GAAG/E,GAAG;MACf,IAAI,CAACoE,UAAU,CAACxM,SAAS,GAAG,mBAAmB;MAC/C,IAAI,CAACwM,UAAU,CAACY,WAAW,GAAG,EAAE;MAChC,IAAI,CAACZ,UAAU,CAACQ,WAAW,CAAC,IAAI,CAACN,QAAQ,CAAC;MAC1C,IAAMW,2BAA2B,GAAG,IAAI,CAACA,2BAA2B,CAACC,IAAI,CAAC,IAAI,CAAC;MAE/ED,2BAA2B,CAAC,CAAC;MAE7B,IAAI,CAACF,IAAI,CAAChE,EAAE,CAAC,QAAQ,EAAEkE,2BAA2B,CAAC;MACnD,IAAI,CAACF,IAAI,CAAChE,EAAE,CAAC,OAAO,EAAEkE,2BAA2B,CAAC;MAElD,OAAO,IAAI,CAACb,UAAU;IACxB;EAAC;IAAAlF,GAAA;IAAAnG,KAAA,EAED,SAAAoM,SAAA,EAAW;MACT,IAAI,CAACf,UAAU,CAACgB,UAAU,CAACC,WAAW,CAAC,IAAI,CAACjB,UAAU,CAAC;MACvD,IAAI,CAACW,IAAI,GAAGnF,SAAS;IACvB;EAAC;IAAAV,GAAA;IAAAnG,KAAA,EAED,SAAAuM,WAAA,EAAa;MACXC,SAAS,CAACC,WAAW,CAACC,kBAAkB,CACtCC,QAAQ,IAAI;QACV,IAAI,CAACX,IAAI,CAACY,KAAK,CAAC;UAAEC,MAAM,EAAE,CAACF,QAAQ,CAACG,MAAM,CAACC,SAAS,EAAEJ,QAAQ,CAACG,MAAM,CAACE,QAAQ;QAAE,CAAC,CAAC;MACpF,CAAC,EACD,MAAMnG,SAAS,EACf;QAAEoG,UAAU,EAAE;MAAM,CACtB,CAAC;IACH;EAAC;IAAA9G,GAAA;IAAAnG,KAAA,EAED,SAAAwL,cAAc3M,SAAS,EAAEqO,SAAS,EAAE3G,EAAE,EAAE;MACtC,IAAMpG,CAAC,GAAG+J,QAAQ,CAACtL,aAAa,CAAC,QAAQ,CAAC;MAC1CuB,CAAC,CAACgN,YAAY,CAAC,OAAO,EAAEtO,SAAS,CAAC;MAClCsB,CAAC,CAACgN,YAAY,CAAC,YAAY,EAAED,SAAS,CAAC;MACvC/M,CAAC,CAACiN,gBAAgB,CAAC,OAAO,EAAE7G,EAAE,CAAC;MAC/B,IAAI,CAAC8E,UAAU,CAACQ,WAAW,CAAC1L,CAAC,CAAC;MAC9B,OAAOA,CAAC;IACV;EAAC;IAAAgG,GAAA;IAAAnG,KAAA,EAED,SAAA4L,YAAY/M,SAAS,EAAE;MACrB,IAAMsB,CAAC,GAAG+J,QAAQ,CAACtL,aAAa,CAAC,MAAM,CAAC;MACxCuB,CAAC,CAACgN,YAAY,CAAC,OAAO,EAAEtO,SAAS,CAAC;MAClC,OAAOsB,CAAC;IACV;EAAC;IAAAgG,GAAA;IAAAnG,KAAA,EAED,SAAAyL,mBAAA,EAAqB;MACnB,IAAI,CAACO,IAAI,CAACqB,MAAM,CAAC;QAAEC,KAAK,EAAE,CAAC;QAAEC,OAAO,EAAE;MAAE,CAAC,CAAC;IAC5C;EAAC;IAAApH,GAAA;IAAAnG,KAAA,EAED,SAAAkM,4BAAA,EAA8B;MAC5B,IAAI,IAAI,CAACF,IAAI,CAACwB,QAAQ,CAAC,CAAC,KAAK,CAAC,IAAI,IAAI,CAACxB,IAAI,CAACyB,SAAS,CAACC,KAAK,KAAK,CAAC,EAAE;QACjE,IAAI,CAACnC,QAAQ,CAACoC,SAAS,CAACC,GAAG,CAAC,gBAAgB,CAAC;MAC/C,CAAC,MAAM;QACL,IAAI,CAACrC,QAAQ,CAACoC,SAAS,CAAC3C,MAAM,CAAC,gBAAgB,CAAC;MAClD;MACA,IAAM6C,KAAK,GAAG,CAAC,GAAG,IAAI,CAAC7B,IAAI,CAACwB,QAAQ,CAAC,CAAC,GAAG,GAAG;MAC5C,IAAMM,QAAQ,GAAG,IAAI,CAAC9B,IAAI,CAACyB,SAAS,CAACC,KAAK,IAAI,GAAG,GAAGK,IAAI,CAACC,EAAE,CAAC;MAC5D,IAAI,CAACrC,iBAAiB,CAACxP,KAAK,CAACsR,SAAS,eAAAQ,MAAA,CAAeJ,KAAK,eAAAI,MAAA,CAAYH,QAAQ,SAAM;IACtF;EAAC;EAAA,OAAA3C,oBAAA;AAAA;;;;;;;;;;;;;;;;;ACvEwC;;AAE3C;AACA;AACA;AACA;AAHA,IAIqB+C,oBAAoB,0BAAAC,aAAA;EAAAC,SAAA,CAAAF,oBAAA,EAAAC,aAAA;EACvC,SAAAD,qBAAYG,OAAO,EAAEC,SAAS,EAAE;IAAA,IAAAvG,KAAA;IAAAqD,qCAAA,OAAA8C,oBAAA;IAC9BnG,KAAA,GAAAwG,UAAA,OAAAL,oBAAA,GAAMG,OAAO;IACbtG,KAAA,CAAKyG,eAAe,GAAGF,SAAS;IAAC,OAAAvG,KAAA;EACnC;EAAC+D,kCAAA,CAAAoC,oBAAA;IAAA/H,GAAA;IAAAnG,KAAA,EAED,SAAA+L,MAAM9E,GAAG,EAAE;MACT,IAAI,CAAC+E,IAAI,GAAG/E,GAAG;MACf,IAAI,CAACoE,UAAU,GAAGnB,QAAQ,CAACtL,aAAa,CAAC,KAAK,CAAC;MAC/C,IAAI,CAACyM,UAAU,CAACxM,SAAS,GAAG,0DAA0D;MAEtF,IAAI,CAAC2P,eAAe,CAAC3C,WAAW,CAAC,IAAI,CAACR,UAAU,CAAC;MAEjD,IAAI,CAACW,IAAI,CAAChE,EAAE,CAAC,MAAM,EAAE,IAAI,CAACyG,OAAO,CAAC;MAClCC,IAAA,CAAAC,eAAA,CAAAT,oBAAA,CAAAvO,SAAA,oBAAA0B,IAAA;MAEA,OAAO,IAAI,CAACmN,eAAe;IAC7B;EAAC;EAAA,OAAAN,oBAAA;AAAA,EAjB+CU,2BAAY;;;;;;;;;;;;;;;;;ACNb;;AAEjD;AACA;AACA;AACA;AAHA,IAIqBC,0BAA0B,0BAAAC,mBAAA;EAAAV,qCAAA,CAAAS,0BAAA,EAAAC,mBAAA;EAC7C,SAAAD,2BAAYR,OAAO,EAAEC,SAAS,EAAE;IAAA,IAAAvG,KAAA;IAAAqD,2CAAA,OAAAyD,0BAAA;IAC9B9G,KAAA,GAAAwG,sCAAA,OAAAM,0BAAA,GAAMR,OAAO;IACbtG,KAAA,CAAKyG,eAAe,GAAGF,SAAS;IAAC,OAAAvG,KAAA;EACnC;EAAC+D,wCAAA,CAAA+C,0BAAA;IAAA1I,GAAA;IAAAnG,KAAA,EAED,SAAA+L,MAAM9E,GAAG,EAAE;MACT,IAAMqH,SAAS,GAAAI,gCAAA,CAAAC,2CAAA,CAAAE,0BAAA,CAAAlP,SAAA,kBAAA0B,IAAA,OAAe4F,GAAG,CAAC;MAClC,IAAIqH,SAAS,EAAE;QACb,IAAI,CAACE,eAAe,CAAC3C,WAAW,CAACyC,SAAS,CAAC;MAC7C;MACA,OAAO,IAAI,CAACE,eAAe;IAC7B;EAAC;EAAA,OAAAK,0BAAA;AAAA,EAZqDE,iCAAkB;;;;;;;;;;;;;;;;ACN5B;AAE/BC,kEAAY,IAAIC,wBAAc,CAACC,oBAAoB,CAACF,YAAY,CAAC,E;;;;;yECDhF,qJAAAzP,6CAAA,YAAAA,oBAAA,WAAAhB,CAAA,SAAAiB,CAAA,EAAAjB,CAAA,OAAAkB,CAAA,GAAAC,MAAA,CAAAC,SAAA,EAAAC,CAAA,GAAAH,CAAA,CAAAI,cAAA,EAAAC,CAAA,GAAAJ,MAAA,CAAAK,cAAA,cAAAP,CAAA,EAAAjB,CAAA,EAAAkB,CAAA,IAAAD,CAAA,CAAAjB,CAAA,IAAAkB,CAAA,CAAAO,KAAA,KAAAC,CAAA,wBAAAC,MAAA,GAAAA,MAAA,OAAAC,CAAA,GAAAF,CAAA,CAAAG,QAAA,kBAAAC,CAAA,GAAAJ,CAAA,CAAAK,aAAA,uBAAAC,CAAA,GAAAN,CAAA,CAAAO,WAAA,8BAAAC,OAAAjB,CAAA,EAAAjB,CAAA,EAAAkB,CAAA,WAAAC,MAAA,CAAAK,cAAA,CAAAP,CAAA,EAAAjB,CAAA,IAAAyB,KAAA,EAAAP,CAAA,EAAAiB,UAAA,MAAAC,YAAA,MAAAC,QAAA,SAAApB,CAAA,CAAAjB,CAAA,WAAAkC,MAAA,mBAAAjB,CAAA,IAAAiB,MAAA,YAAAA,OAAAjB,CAAA,EAAAjB,CAAA,EAAAkB,CAAA,WAAAD,CAAA,CAAAjB,CAAA,IAAAkB,CAAA,gBAAAoB,KAAArB,CAAA,EAAAjB,CAAA,EAAAkB,CAAA,EAAAG,CAAA,QAAAK,CAAA,GAAA1B,CAAA,IAAAA,CAAA,CAAAoB,SAAA,YAAAmB,SAAA,GAAAvC,CAAA,GAAAuC,SAAA,EAAAX,CAAA,GAAAT,MAAA,CAAAqB,MAAA,CAAAd,CAAA,CAAAN,SAAA,GAAAU,CAAA,OAAAW,OAAA,CAAApB,CAAA,gBAAAE,CAAA,CAAAK,CAAA,eAAAH,KAAA,EAAAiB,gBAAA,CAAAzB,CAAA,EAAAC,CAAA,EAAAY,CAAA,MAAAF,CAAA,aAAAe,SAAA1B,CAAA,EAAAjB,CAAA,EAAAkB,CAAA,mBAAA0B,IAAA,YAAAC,GAAA,EAAA5B,CAAA,CAAA6B,IAAA,CAAA9C,CAAA,EAAAkB,CAAA,cAAAD,CAAA,aAAA2B,IAAA,WAAAC,GAAA,EAAA5B,CAAA,QAAAjB,CAAA,CAAAsC,IAAA,GAAAA,IAAA,MAAAS,CAAA,qBAAAC,CAAA,qBAAAC,CAAA,gBAAAC,CAAA,gBAAAC,CAAA,gBAAAZ,UAAA,cAAAa,kBAAA,cAAAC,2BAAA,SAAAC,CAAA,OAAApB,MAAA,CAAAoB,CAAA,EAAA1B,CAAA,qCAAA2B,CAAA,GAAApC,MAAA,CAAAqC,cAAA,EAAAC,CAAA,GAAAF,CAAA,IAAAA,CAAA,CAAAA,CAAA,CAAAG,MAAA,QAAAD,CAAA,IAAAA,CAAA,KAAAvC,CAAA,IAAAG,CAAA,CAAAyB,IAAA,CAAAW,CAAA,EAAA7B,CAAA,MAAA0B,CAAA,GAAAG,CAAA,OAAAE,CAAA,GAAAN,0BAAA,CAAAjC,SAAA,GAAAmB,SAAA,CAAAnB,SAAA,GAAAD,MAAA,CAAAqB,MAAA,CAAAc,CAAA,YAAAM,sBAAA3C,CAAA,gCAAA4C,OAAA,WAAA7D,CAAA,IAAAkC,MAAA,CAAAjB,CAAA,EAAAjB,CAAA,YAAAiB,CAAA,gBAAA6C,OAAA,CAAA9D,CAAA,EAAAiB,CAAA,sBAAA8C,cAAA9C,CAAA,EAAAjB,CAAA,aAAAgE,OAAA9C,CAAA,EAAAK,CAAA,EAAAG,CAAA,EAAAE,CAAA,QAAAE,CAAA,GAAAa,QAAA,CAAA1B,CAAA,CAAAC,CAAA,GAAAD,CAAA,EAAAM,CAAA,mBAAAO,CAAA,CAAAc,IAAA,QAAAZ,CAAA,GAAAF,CAAA,CAAAe,GAAA,EAAAE,CAAA,GAAAf,CAAA,CAAAP,KAAA,SAAAsB,CAAA,uBAAAA,CAAA,IAAA1B,CAAA,CAAAyB,IAAA,CAAAC,CAAA,eAAA/C,CAAA,CAAAiE,OAAA,CAAAlB,CAAA,CAAAmB,OAAA,EAAAC,IAAA,WAAAlD,CAAA,IAAA+C,MAAA,SAAA/C,CAAA,EAAAS,CAAA,EAAAE,CAAA,gBAAAX,CAAA,IAAA+C,MAAA,UAAA/C,CAAA,EAAAS,CAAA,EAAAE,CAAA,QAAA5B,CAAA,CAAAiE,OAAA,CAAAlB,CAAA,EAAAoB,IAAA,WAAAlD,CAAA,IAAAe,CAAA,CAAAP,KAAA,GAAAR,CAAA,EAAAS,CAAA,CAAAM,CAAA,gBAAAf,CAAA,WAAA+C,MAAA,UAAA/C,CAAA,EAAAS,CAAA,EAAAE,CAAA,SAAAA,CAAA,CAAAE,CAAA,CAAAe,GAAA,SAAA3B,CAAA,EAAAK,CAAA,oBAAAE,KAAA,WAAAA,MAAAR,CAAA,EAAAI,CAAA,aAAA+C,2BAAA,eAAApE,CAAA,WAAAA,CAAA,EAAAkB,CAAA,IAAA8C,MAAA,CAAA/C,CAAA,EAAAI,CAAA,EAAArB,CAAA,EAAAkB,CAAA,gBAAAA,CAAA,GAAAA,CAAA,GAAAA,CAAA,CAAAiD,IAAA,CAAAC,0BAAA,EAAAA,0BAAA,IAAAA,0BAAA,qBAAA1B,iBAAA1C,CAAA,EAAAkB,CAAA,EAAAG,CAAA,QAAAE,CAAA,GAAAwB,CAAA,mBAAArB,CAAA,EAAAE,CAAA,QAAAL,CAAA,KAAA0B,CAAA,YAAAoB,KAAA,sCAAA9C,CAAA,KAAA2B,CAAA,oBAAAxB,CAAA,QAAAE,CAAA,WAAAH,KAAA,EAAAR,CAAA,EAAAqD,IAAA,eAAAjD,CAAA,CAAAkD,MAAA,GAAA7C,CAAA,EAAAL,CAAA,CAAAwB,GAAA,GAAAjB,CAAA,UAAAE,CAAA,GAAAT,CAAA,CAAAmD,QAAA,MAAA1C,CAAA,QAAAE,CAAA,GAAAyC,mBAAA,CAAA3C,CAAA,EAAAT,CAAA,OAAAW,CAAA,QAAAA,CAAA,KAAAmB,CAAA,mBAAAnB,CAAA,qBAAAX,CAAA,CAAAkD,MAAA,EAAAlD,CAAA,CAAAqD,IAAA,GAAArD,CAAA,CAAAsD,KAAA,GAAAtD,CAAA,CAAAwB,GAAA,sBAAAxB,CAAA,CAAAkD,MAAA,QAAAhD,CAAA,KAAAwB,CAAA,QAAAxB,CAAA,GAAA2B,CAAA,EAAA7B,CAAA,CAAAwB,GAAA,EAAAxB,CAAA,CAAAuD,iBAAA,CAAAvD,CAAA,CAAAwB,GAAA,uBAAAxB,CAAA,CAAAkD,MAAA,IAAAlD,CAAA,CAAAwD,MAAA,WAAAxD,CAAA,CAAAwB,GAAA,GAAAtB,CAAA,GAAA0B,CAAA,MAAAK,CAAA,GAAAX,QAAA,CAAA3C,CAAA,EAAAkB,CAAA,EAAAG,CAAA,oBAAAiC,CAAA,CAAAV,IAAA,QAAArB,CAAA,GAAAF,CAAA,CAAAiD,IAAA,GAAApB,CAAA,GAAAF,CAAA,EAAAM,CAAA,CAAAT,GAAA,KAAAM,CAAA,qBAAA1B,KAAA,EAAA6B,CAAA,CAAAT,GAAA,EAAAyB,IAAA,EAAAjD,CAAA,CAAAiD,IAAA,kBAAAhB,CAAA,CAAAV,IAAA,KAAArB,CAAA,GAAA2B,CAAA,EAAA7B,CAAA,CAAAkD,MAAA,YAAAlD,CAAA,CAAAwB,GAAA,GAAAS,CAAA,CAAAT,GAAA,mBAAA4B,oBAAAzE,CAAA,EAAAkB,CAAA,QAAAG,CAAA,GAAAH,CAAA,CAAAqD,MAAA,EAAAhD,CAAA,GAAAvB,CAAA,CAAA6B,QAAA,CAAAR,CAAA,OAAAE,CAAA,KAAAN,CAAA,SAAAC,CAAA,CAAAsD,QAAA,qBAAAnD,CAAA,IAAArB,CAAA,CAAA6B,QAAA,CAAAiD,MAAA,KAAA5D,CAAA,CAAAqD,MAAA,aAAArD,CAAA,CAAA2B,GAAA,GAAA5B,CAAA,EAAAwD,mBAAA,CAAAzE,CAAA,EAAAkB,CAAA,eAAAA,CAAA,CAAAqD,MAAA,kBAAAlD,CAAA,KAAAH,CAAA,CAAAqD,MAAA,YAAArD,CAAA,CAAA2B,GAAA,OAAAkC,SAAA,uCAAA1D,CAAA,iBAAA8B,CAAA,MAAAzB,CAAA,GAAAiB,QAAA,CAAApB,CAAA,EAAAvB,CAAA,CAAA6B,QAAA,EAAAX,CAAA,CAAA2B,GAAA,mBAAAnB,CAAA,CAAAkB,IAAA,SAAA1B,CAAA,CAAAqD,MAAA,YAAArD,CAAA,CAAA2B,GAAA,GAAAnB,CAAA,CAAAmB,GAAA,EAAA3B,CAAA,CAAAsD,QAAA,SAAArB,CAAA,MAAAvB,CAAA,GAAAF,CAAA,CAAAmB,GAAA,SAAAjB,CAAA,GAAAA,CAAA,CAAA0C,IAAA,IAAApD,CAAA,CAAAlB,CAAA,CAAAgF,UAAA,IAAApD,CAAA,CAAAH,KAAA,EAAAP,CAAA,CAAA+D,IAAA,GAAAjF,CAAA,CAAAkF,OAAA,eAAAhE,CAAA,CAAAqD,MAAA,KAAArD,CAAA,CAAAqD,MAAA,WAAArD,CAAA,CAAA2B,GAAA,GAAA5B,CAAA,GAAAC,CAAA,CAAAsD,QAAA,SAAArB,CAAA,IAAAvB,CAAA,IAAAV,CAAA,CAAAqD,MAAA,YAAArD,CAAA,CAAA2B,GAAA,OAAAkC,SAAA,sCAAA7D,CAAA,CAAAsD,QAAA,SAAArB,CAAA,cAAAgC,aAAAlE,CAAA,QAAAjB,CAAA,KAAAoF,MAAA,EAAAnE,CAAA,YAAAA,CAAA,KAAAjB,CAAA,CAAAqF,QAAA,GAAApE,CAAA,WAAAA,CAAA,KAAAjB,CAAA,CAAAsF,UAAA,GAAArE,CAAA,KAAAjB,CAAA,CAAAuF,QAAA,GAAAtE,CAAA,WAAAuE,UAAA,CAAAC,IAAA,CAAAzF,CAAA,cAAA0F,cAAAzE,CAAA,QAAAjB,CAAA,GAAAiB,CAAA,CAAA0E,UAAA,QAAA3F,CAAA,CAAA4C,IAAA,oBAAA5C,CAAA,CAAA6C,GAAA,EAAA5B,CAAA,CAAA0E,UAAA,GAAA3F,CAAA,aAAAyC,QAAAxB,CAAA,SAAAuE,UAAA,MAAAJ,MAAA,aAAAnE,CAAA,CAAA4C,OAAA,CAAAsB,YAAA,cAAAS,KAAA,iBAAAlC,OAAA1D,CAAA,QAAAA,CAAA,WAAAA,CAAA,QAAAkB,CAAA,GAAAlB,CAAA,CAAA4B,CAAA,OAAAV,CAAA,SAAAA,CAAA,CAAA4B,IAAA,CAAA9C,CAAA,4BAAAA,CAAA,CAAAiF,IAAA,SAAAjF,CAAA,OAAA6F,KAAA,CAAA7F,CAAA,CAAA8F,MAAA,SAAAvE,CAAA,OAAAG,CAAA,YAAAuD,KAAA,aAAA1D,CAAA,GAAAvB,CAAA,CAAA8F,MAAA,OAAAzE,CAAA,CAAAyB,IAAA,CAAA9C,CAAA,EAAAuB,CAAA,UAAA0D,IAAA,CAAAxD,KAAA,GAAAzB,CAAA,CAAAuB,CAAA,GAAA0D,IAAA,CAAAX,IAAA,OAAAW,IAAA,SAAAA,IAAA,CAAAxD,KAAA,GAAAR,CAAA,EAAAgE,IAAA,CAAAX,IAAA,OAAAW,IAAA,YAAAvD,CAAA,CAAAuD,IAAA,GAAAvD,CAAA,gBAAAqD,SAAA,QAAA/E,CAAA,iCAAAoD,iBAAA,CAAAhC,SAAA,GAAAiC,0BAAA,EAAA9B,CAAA,CAAAoC,CAAA,mBAAAlC,KAAA,EAAA4B,0BAAA,EAAAjB,YAAA,SAAAb,CAAA,CAAA8B,0BAAA,mBAAA5B,KAAA,EAAA2B,iBAAA,EAAAhB,YAAA,SAAAgB,iBAAA,CAAA2C,WAAA,GAAA7D,MAAA,CAAAmB,0BAAA,EAAArB,CAAA,wBAAAhC,CAAA,CAAAgG,mBAAA,aAAA/E,CAAA,QAAAjB,CAAA,wBAAAiB,CAAA,IAAAA,CAAA,CAAAgF,WAAA,WAAAjG,CAAA,KAAAA,CAAA,KAAAoD,iBAAA,6BAAApD,CAAA,CAAA+F,WAAA,IAAA/F,CAAA,CAAAkG,IAAA,OAAAlG,CAAA,CAAAmG,IAAA,aAAAlF,CAAA,WAAAE,MAAA,CAAAiF,cAAA,GAAAjF,MAAA,CAAAiF,cAAA,CAAAnF,CAAA,EAAAoC,0BAAA,KAAApC,CAAA,CAAAoF,SAAA,GAAAhD,0BAAA,EAAAnB,MAAA,CAAAjB,CAAA,EAAAe,CAAA,yBAAAf,CAAA,CAAAG,SAAA,GAAAD,MAAA,CAAAqB,MAAA,CAAAmB,CAAA,GAAA1C,CAAA,KAAAjB,CAAA,CAAAsG,KAAA,aAAArF,CAAA,aAAAiD,OAAA,EAAAjD,CAAA,OAAA2C,qBAAA,CAAAG,aAAA,CAAA3C,SAAA,GAAAc,MAAA,CAAA6B,aAAA,CAAA3C,SAAA,EAAAU,CAAA,iCAAA9B,CAAA,CAAA+D,aAAA,GAAAA,aAAA,EAAA/D,CAAA,CAAAuG,KAAA,aAAAtF,CAAA,EAAAC,CAAA,EAAAG,CAAA,EAAAE,CAAA,EAAAG,CAAA,eAAAA,CAAA,KAAAA,CAAA,GAAA8E,OAAA,OAAA5E,CAAA,OAAAmC,aAAA,CAAAzB,IAAA,CAAArB,CAAA,EAAAC,CAAA,EAAAG,CAAA,EAAAE,CAAA,GAAAG,CAAA,UAAA1B,CAAA,CAAAgG,mBAAA,CAAA9E,CAAA,IAAAU,CAAA,GAAAA,CAAA,CAAAqD,IAAA,GAAAd,IAAA,WAAAlD,CAAA,WAAAA,CAAA,CAAAqD,IAAA,GAAArD,CAAA,CAAAQ,KAAA,GAAAG,CAAA,CAAAqD,IAAA,WAAArB,qBAAA,CAAAD,CAAA,GAAAzB,MAAA,CAAAyB,CAAA,EAAA3B,CAAA,gBAAAE,MAAA,CAAAyB,CAAA,EAAA/B,CAAA,iCAAAM,MAAA,CAAAyB,CAAA,6DAAA3D,CAAA,CAAAyG,IAAA,aAAAxF,CAAA,QAAAjB,CAAA,GAAAmB,MAAA,CAAAF,CAAA,GAAAC,CAAA,gBAAAG,CAAA,IAAArB,CAAA,EAAAkB,CAAA,CAAAuE,IAAA,CAAApE,CAAA,UAAAH,CAAA,CAAAwF,OAAA,aAAAzB,KAAA,WAAA/D,CAAA,CAAA4E,MAAA,SAAA7E,CAAA,GAAAC,CAAA,CAAAyF,GAAA,QAAA1F,CAAA,IAAAjB,CAAA,SAAAiF,IAAA,CAAAxD,KAAA,GAAAR,CAAA,EAAAgE,IAAA,CAAAX,IAAA,OAAAW,IAAA,WAAAA,IAAA,CAAAX,IAAA,OAAAW,IAAA,QAAAjF,CAAA,CAAA0D,MAAA,GAAAA,MAAA,EAAAjB,OAAA,CAAArB,SAAA,KAAA6E,WAAA,EAAAxD,OAAA,EAAAmD,KAAA,WAAAA,MAAA5F,CAAA,aAAA4G,IAAA,WAAA3B,IAAA,WAAAP,IAAA,QAAAC,KAAA,GAAA1D,CAAA,OAAAqD,IAAA,YAAAE,QAAA,cAAAD,MAAA,gBAAA1B,GAAA,GAAA5B,CAAA,OAAAuE,UAAA,CAAA3B,OAAA,CAAA6B,aAAA,IAAA1F,CAAA,WAAAkB,CAAA,kBAAAA,CAAA,CAAA2F,MAAA,OAAAxF,CAAA,CAAAyB,IAAA,OAAA5B,CAAA,MAAA2E,KAAA,EAAA3E,CAAA,CAAA4F,KAAA,cAAA5F,CAAA,IAAAD,CAAA,MAAA8F,IAAA,WAAAA,KAAA,SAAAzC,IAAA,WAAArD,CAAA,QAAAuE,UAAA,IAAAG,UAAA,kBAAA1E,CAAA,CAAA2B,IAAA,QAAA3B,CAAA,CAAA4B,GAAA,cAAAmE,IAAA,KAAApC,iBAAA,WAAAA,kBAAA5E,CAAA,aAAAsE,IAAA,QAAAtE,CAAA,MAAAkB,CAAA,kBAAA+F,OAAA5F,CAAA,EAAAE,CAAA,WAAAK,CAAA,CAAAgB,IAAA,YAAAhB,CAAA,CAAAiB,GAAA,GAAA7C,CAAA,EAAAkB,CAAA,CAAA+D,IAAA,GAAA5D,CAAA,EAAAE,CAAA,KAAAL,CAAA,CAAAqD,MAAA,WAAArD,CAAA,CAAA2B,GAAA,GAAA5B,CAAA,KAAAM,CAAA,aAAAA,CAAA,QAAAiE,UAAA,CAAAM,MAAA,MAAAvE,CAAA,SAAAA,CAAA,QAAAG,CAAA,QAAA8D,UAAA,CAAAjE,CAAA,GAAAK,CAAA,GAAAF,CAAA,CAAAiE,UAAA,iBAAAjE,CAAA,CAAA0D,MAAA,SAAA6B,MAAA,aAAAvF,CAAA,CAAA0D,MAAA,SAAAwB,IAAA,QAAA9E,CAAA,GAAAT,CAAA,CAAAyB,IAAA,CAAApB,CAAA,eAAAM,CAAA,GAAAX,CAAA,CAAAyB,IAAA,CAAApB,CAAA,qBAAAI,CAAA,IAAAE,CAAA,aAAA4E,IAAA,GAAAlF,CAAA,CAAA2D,QAAA,SAAA4B,MAAA,CAAAvF,CAAA,CAAA2D,QAAA,gBAAAuB,IAAA,GAAAlF,CAAA,CAAA4D,UAAA,SAAA2B,MAAA,CAAAvF,CAAA,CAAA4D,UAAA,cAAAxD,CAAA,aAAA8E,IAAA,GAAAlF,CAAA,CAAA2D,QAAA,SAAA4B,MAAA,CAAAvF,CAAA,CAAA2D,QAAA,qBAAArD,CAAA,YAAAqC,KAAA,qDAAAuC,IAAA,GAAAlF,CAAA,CAAA4D,UAAA,SAAA2B,MAAA,CAAAvF,CAAA,CAAA4D,UAAA,YAAAT,MAAA,WAAAA,OAAA5D,CAAA,EAAAjB,CAAA,aAAAkB,CAAA,QAAAsE,UAAA,CAAAM,MAAA,MAAA5E,CAAA,SAAAA,CAAA,QAAAK,CAAA,QAAAiE,UAAA,CAAAtE,CAAA,OAAAK,CAAA,CAAA6D,MAAA,SAAAwB,IAAA,IAAAvF,CAAA,CAAAyB,IAAA,CAAAvB,CAAA,wBAAAqF,IAAA,GAAArF,CAAA,CAAA+D,UAAA,QAAA5D,CAAA,GAAAH,CAAA,aAAAG,CAAA,iBAAAT,CAAA,mBAAAA,CAAA,KAAAS,CAAA,CAAA0D,MAAA,IAAApF,CAAA,IAAAA,CAAA,IAAA0B,CAAA,CAAA4D,UAAA,KAAA5D,CAAA,cAAAE,CAAA,GAAAF,CAAA,GAAAA,CAAA,CAAAiE,UAAA,cAAA/D,CAAA,CAAAgB,IAAA,GAAA3B,CAAA,EAAAW,CAAA,CAAAiB,GAAA,GAAA7C,CAAA,EAAA0B,CAAA,SAAA6C,MAAA,gBAAAU,IAAA,GAAAvD,CAAA,CAAA4D,UAAA,EAAAnC,CAAA,SAAA+D,QAAA,CAAAtF,CAAA,MAAAsF,QAAA,WAAAA,SAAAjG,CAAA,EAAAjB,CAAA,oBAAAiB,CAAA,CAAA2B,IAAA,QAAA3B,CAAA,CAAA4B,GAAA,qBAAA5B,CAAA,CAAA2B,IAAA,mBAAA3B,CAAA,CAAA2B,IAAA,QAAAqC,IAAA,GAAAhE,CAAA,CAAA4B,GAAA,gBAAA5B,CAAA,CAAA2B,IAAA,SAAAoE,IAAA,QAAAnE,GAAA,GAAA5B,CAAA,CAAA4B,GAAA,OAAA0B,MAAA,kBAAAU,IAAA,yBAAAhE,CAAA,CAAA2B,IAAA,IAAA5C,CAAA,UAAAiF,IAAA,GAAAjF,CAAA,GAAAmD,CAAA,KAAAgE,MAAA,WAAAA,OAAAlG,CAAA,aAAAjB,CAAA,QAAAwF,UAAA,CAAAM,MAAA,MAAA9F,CAAA,SAAAA,CAAA,QAAAkB,CAAA,QAAAsE,UAAA,CAAAxF,CAAA,OAAAkB,CAAA,CAAAoE,UAAA,KAAArE,CAAA,cAAAiG,QAAA,CAAAhG,CAAA,CAAAyE,UAAA,EAAAzE,CAAA,CAAAqE,QAAA,GAAAG,aAAA,CAAAxE,CAAA,GAAAiC,CAAA,OAAAiE,KAAA,WAAAC,OAAApG,CAAA,aAAAjB,CAAA,QAAAwF,UAAA,CAAAM,MAAA,MAAA9F,CAAA,SAAAA,CAAA,QAAAkB,CAAA,QAAAsE,UAAA,CAAAxF,CAAA,OAAAkB,CAAA,CAAAkE,MAAA,KAAAnE,CAAA,QAAAI,CAAA,GAAAH,CAAA,CAAAyE,UAAA,kBAAAtE,CAAA,CAAAuB,IAAA,QAAArB,CAAA,GAAAF,CAAA,CAAAwB,GAAA,EAAA6C,aAAA,CAAAxE,CAAA,YAAAK,CAAA,gBAAA8C,KAAA,8BAAAiD,aAAA,WAAAA,cAAAtH,CAAA,EAAAkB,CAAA,EAAAG,CAAA,gBAAAmD,QAAA,KAAA3C,QAAA,EAAA6B,MAAA,CAAA1D,CAAA,GAAAgF,UAAA,EAAA9D,CAAA,EAAAgE,OAAA,EAAA7D,CAAA,oBAAAkD,MAAA,UAAA1B,GAAA,GAAA5B,CAAA,GAAAkC,CAAA,OAAAnD,CAAA;AAAA,SAAAuH,8CAAAC,GAAA,EAAAvD,OAAA,EAAAwD,MAAA,EAAAC,KAAA,EAAAC,MAAA,EAAAC,GAAA,EAAA/E,GAAA,cAAAgF,IAAA,GAAAL,GAAA,CAAAI,GAAA,EAAA/E,GAAA,OAAApB,KAAA,GAAAoG,IAAA,CAAApG,KAAA,WAAAqG,KAAA,IAAAL,MAAA,CAAAK,KAAA,iBAAAD,IAAA,CAAAvD,IAAA,IAAAL,OAAA,CAAAxC,KAAA,YAAA+E,OAAA,CAAAvC,OAAA,CAAAxC,KAAA,EAAA0C,IAAA,CAAAuD,KAAA,EAAAC,MAAA;AAAA,SAAAI,4CAAAC,EAAA,6BAAAC,IAAA,SAAAC,IAAA,GAAAC,SAAA,aAAA3B,OAAA,WAAAvC,OAAA,EAAAwD,MAAA,QAAAD,GAAA,GAAAQ,EAAA,CAAAI,KAAA,CAAAH,IAAA,EAAAC,IAAA,YAAAR,MAAAjG,KAAA,IAAA8F,6CAAA,CAAAC,GAAA,EAAAvD,OAAA,EAAAwD,MAAA,EAAAC,KAAA,EAAAC,MAAA,UAAAlG,KAAA,cAAAkG,OAAAU,GAAA,IAAAd,6CAAA,CAAAC,GAAA,EAAAvD,OAAA,EAAAwD,MAAA,EAAAC,KAAA,EAAAC,MAAA,WAAAU,GAAA,KAAAX,KAAA,CAAAY,SAAA;AAAA,SAAAuE,0CAAA+D,QAAA,EAAAC,WAAA,UAAAD,QAAA,YAAAC,WAAA,eAAA9L,SAAA;AAAA,SAAA+L,4CAAAC,MAAA,EAAAC,KAAA,aAAAtP,CAAA,MAAAA,CAAA,GAAAsP,KAAA,CAAAlL,MAAA,EAAApE,CAAA,UAAAuP,UAAA,GAAAD,KAAA,CAAAtP,CAAA,GAAAuP,UAAA,CAAA9O,UAAA,GAAA8O,UAAA,CAAA9O,UAAA,WAAA8O,UAAA,CAAA7O,YAAA,wBAAA6O,UAAA,EAAAA,UAAA,CAAA5O,QAAA,SAAAlB,MAAA,CAAAK,cAAA,CAAAuP,MAAA,EAAAG,wCAAA,CAAAD,UAAA,CAAArJ,GAAA,GAAAqJ,UAAA;AAAA,SAAA1D,uCAAAsD,WAAA,EAAAM,UAAA,EAAAC,WAAA,QAAAD,UAAA,EAAAL,2CAAA,CAAAD,WAAA,CAAAzP,SAAA,EAAA+P,UAAA,OAAAC,WAAA,EAAAN,2CAAA,CAAAD,WAAA,EAAAO,WAAA,GAAAjQ,MAAA,CAAAK,cAAA,CAAAqP,WAAA,iBAAAxO,QAAA,mBAAAwO,WAAA;AAAA,SAAAK,yCAAAjQ,CAAA,QAAAS,CAAA,GAAA2P,sCAAA,CAAApQ,CAAA,uCAAAS,CAAA,GAAAA,CAAA,GAAA4P,MAAA,CAAA5P,CAAA;AAAA,SAAA2P,uCAAApQ,CAAA,EAAAC,CAAA,2BAAAD,CAAA,KAAAA,CAAA,SAAAA,CAAA,MAAAjB,CAAA,GAAAiB,CAAA,CAAAU,MAAA,CAAA4P,WAAA,kBAAAvR,CAAA,QAAA0B,CAAA,GAAA1B,CAAA,CAAA8C,IAAA,CAAA7B,CAAA,EAAAC,CAAA,uCAAAQ,CAAA,SAAAA,CAAA,YAAAqD,SAAA,yEAAA7D,CAAA,GAAAoQ,MAAA,GAAAE,MAAA,EAAAvQ,CAAA;AAAA,SAAA+O,qCAAA/O,CAAA,EAAAM,CAAA,EAAAvB,CAAA,WAAAuB,CAAA,GAAA6O,yCAAA,CAAA7O,CAAA,GAAAkQ,oDAAA,CAAAxQ,CAAA,EAAAyQ,mDAAA,KAAAC,OAAA,CAAAC,SAAA,CAAArQ,CAAA,EAAAvB,CAAA,QAAAoQ,yCAAA,CAAAnP,CAAA,EAAAgF,WAAA,IAAA1E,CAAA,CAAA6G,KAAA,CAAAnH,CAAA,EAAAjB,CAAA;AAAA,SAAAyR,qDAAAxJ,IAAA,EAAAnF,IAAA,QAAAA,IAAA,YAAAA,IAAA,wBAAAA,IAAA,2BAAAA,IAAA,aAAAA,IAAA,yBAAAiC,SAAA,uEAAA8M,gDAAA,CAAA5J,IAAA;AAAA,SAAA4J,iDAAA5J,IAAA,QAAAA,IAAA,yBAAA6J,cAAA,wEAAA7J,IAAA;AAAA,SAAAyJ,oDAAA,cAAAzQ,CAAA,IAAA8Q,OAAA,CAAA3Q,SAAA,CAAA4Q,OAAA,CAAAlP,IAAA,CAAA6O,OAAA,CAAAC,SAAA,CAAAG,OAAA,iCAAA9Q,CAAA,aAAAyQ,mDAAA,YAAAA,0BAAA,aAAAzQ,CAAA;AAAA,SAAAkP,+BAAA,eAAAwB,OAAA,oBAAAA,OAAA,CAAAM,GAAA,IAAA9B,8BAAA,GAAAwB,OAAA,CAAAM,GAAA,CAAArE,IAAA,aAAAuC,8BAAA,YAAAA,KAAAY,MAAA,EAAAmB,QAAA,EAAAC,QAAA,QAAAC,IAAA,GAAAC,wCAAA,CAAAtB,MAAA,EAAAmB,QAAA,QAAAE,IAAA,cAAAE,IAAA,GAAAnR,MAAA,CAAAoR,wBAAA,CAAAH,IAAA,EAAAF,QAAA,OAAAI,IAAA,CAAAL,GAAA,WAAAK,IAAA,CAAAL,GAAA,CAAAnP,IAAA,CAAAqF,SAAA,CAAArC,MAAA,OAAAiL,MAAA,GAAAoB,QAAA,YAAAG,IAAA,CAAA7Q,KAAA,cAAA0O,8BAAA,CAAA/H,KAAA,OAAAD,SAAA;AAAA,SAAAkK,yCAAAG,MAAA,EAAAN,QAAA,YAAA/Q,MAAA,CAAAC,SAAA,CAAAE,cAAA,CAAAwB,IAAA,CAAA0P,MAAA,EAAAN,QAAA,KAAAM,MAAA,GAAApC,yCAAA,CAAAoC,MAAA,OAAAA,MAAA,2BAAAA,MAAA;AAAA,SAAApC,0CAAA7O,CAAA,IAAA6O,yCAAA,GAAAjP,MAAA,CAAAiF,cAAA,GAAAjF,MAAA,CAAAqC,cAAA,CAAAoK,IAAA,cAAAwC,gBAAA7O,CAAA,WAAAA,CAAA,CAAA8E,SAAA,IAAAlF,MAAA,CAAAqC,cAAA,CAAAjC,CAAA,aAAA6O,yCAAA,CAAA7O,CAAA;AAAA,SAAAsO,oCAAA4C,QAAA,EAAAC,UAAA,eAAAA,UAAA,mBAAAA,UAAA,uBAAA3N,SAAA,0DAAA0N,QAAA,CAAArR,SAAA,GAAAD,MAAA,CAAAqB,MAAA,CAAAkQ,UAAA,IAAAA,UAAA,CAAAtR,SAAA,IAAA6E,WAAA,IAAAxE,KAAA,EAAAgR,QAAA,EAAApQ,QAAA,QAAAD,YAAA,aAAAjB,MAAA,CAAAK,cAAA,CAAAiR,QAAA,iBAAApQ,QAAA,gBAAAqQ,UAAA,EAAAC,yCAAA,CAAAF,QAAA,EAAAC,UAAA;AAAA,SAAAC,0CAAApR,CAAA,EAAA+B,CAAA,IAAAqP,yCAAA,GAAAxR,MAAA,CAAAiF,cAAA,GAAAjF,MAAA,CAAAiF,cAAA,CAAAwH,IAAA,cAAA+E,gBAAApR,CAAA,EAAA+B,CAAA,IAAA/B,CAAA,CAAA8E,SAAA,GAAA/C,CAAA,SAAA/B,CAAA,YAAAoR,yCAAA,CAAApR,CAAA,EAAA+B,CAAA;AAD0B;AACyB;AACT;AAC8B;AAC5B;AACe;AACN;AACJ;AAEF;;AAE/C;AACA;AACA;AAFA,IAIqBsP,mDAAwB,0BAAAC,iBAAA;EAAAhD,mCAAA,CAAA+C,wBAAA,EAAAC,iBAAA;EAC3C,SAAAD,yBAAY9C,OAAO,EAAEC,SAAS,EAAE;IAAA,IAAAvG,KAAA;IAAAqD,yCAAA,OAAA+F,wBAAA;IAC9BpJ,KAAA,GAAAwG,oCAAA,OAAA4C,wBAAA,GAAM9C,OAAO;IACbtG,KAAA,CAAKsD,UAAU,GAAGiD,SAAS;IAC3BvG,KAAA,CAAKC,EAAE,CAAC,wBAAwB,EAAE,MAAM;MACtCvK,mBAAS,CAAC4T,OAAO,CAAC5T,mBAAS,CAAC6T,gBAAgB,CAAC;IAC/C,CAAC,CAAC;IAAC,OAAAvJ,KAAA;EACL;EAAC+D,sCAAA,CAAAqF,wBAAA;IAAAhL,GAAA;IAAAnG,KAAA,EAED,SAAA+L,MAAM9E,GAAG,EAAE;MACT,IAAI,CAAC+E,IAAI,GAAG/E,GAAG;MACf,IAAI,CAACsK,QAAQ,CAAC,CAAC;MACf,OAAO,IAAI,CAAClG,UAAU;IACxB;EAAC;IAAAlF,GAAA;IAAAnG,KAAA,EAED,SAAAwR,QAAQC,EAAE,EAAE;MACV,IAAI,CAACC,QAAQ,GAAGD,EAAE;IACpB;EAAC;IAAAtL,GAAA;IAAAnG,KAAA;MAAA,IAAA2R,QAAA,GAAArL,2CAAA,eAAA/G,6CAAA,GAAAmF,IAAA,CAED,SAAA4D,QAAA;QAAA,IAAAsJ,KAAA;QAAA,OAAArS,6CAAA,GAAAsB,IAAA,UAAA0H,SAAAC,QAAA;UAAA,kBAAAA,QAAA,CAAArD,IAAA,GAAAqD,QAAA,CAAAhF,IAAA;YAAA;cAAAgF,QAAA,CAAAhF,IAAA;cAAA,OACsBqO,+CAAoC,CAAC,CAAC;YAAA;cAApDD,KAAK,GAAApJ,QAAA,CAAAvF,IAAA;cAAA,MAET2O,KAAK,KAAKC,6CAAkC,CAACC,MAAM,IACnD,CAACC,YAAS,CAAC,iCAAiC,CAAC;gBAAAvJ,QAAA,CAAAhF,IAAA;gBAAA;cAAA;cAAAgF,QAAA,CAAAhF,IAAA;cAAA,OAEvCwO,6DAAyB,CAAC,CAAC;YAAA;cACjCD,YAAS,CAAC,iCAAiC,EAAE,IAAI,CAAC;YAAC;cAErDrD,8BAAA,CAAAC,yCAAA,CAAAwC,wBAAA,CAAAxR,SAAA,oBAAA0B,IAAA;YAAgB;YAAA;cAAA,OAAAmH,QAAA,CAAAlD,IAAA;UAAA;QAAA,GAAAgD,OAAA;MAAA,CACjB;MAAA,SAAA2J,QAAA;QAAA,OAAAN,QAAA,CAAAhL,KAAA,OAAAD,SAAA;MAAA;MAAA,OAAAuL,OAAA;IAAA;EAAA;IAAA9L,GAAA;IAAAnG,KAAA,EAED,SAAAuR,SAASW,SAAS,EAAE;MAAA,IAAAC,qBAAA;MAClBzD,8BAAA,CAAAC,yCAAA,CAAAwC,wBAAA,CAAAxR,SAAA,qBAAA0B,IAAA,OAAe6Q,SAAS;MACxB,KAAAC,qBAAA,GAAI,IAAI,CAACC,gBAAgB,cAAAD,qBAAA,eAArBA,qBAAA,CAAuBE,UAAU,EAAE;QACrC,IAAI,CAACD,gBAAgB,CAACC,UAAU,CAACC,SAAS,GAAGC,iBAAiB,eAC5D5T,eAAA,CAAAC,aAAA,CAAC4T,mBAAU;UAACC,IAAI,EAAC,cAAc;UAACC,KAAK,EAAEnL,wCAAc,CAAC,CAAC,GAAG,EAAE,GAAG;QAAG,CAAE,CACtE,CAAC;MACH;MACA,IAAI,CAACmK,QAAQ,CAAC,CAAC;IACjB;EAAC;IAAAvL,GAAA;IAAAnG,KAAA,EAED,SAAA2S,SAAStM,KAAK,EAAE;MACdwL,kCAAuB,CAACxL,KAAK,CAAC;MAC9BqI,8BAAA,CAAAC,yCAAA,CAAAwC,wBAAA,CAAAxR,SAAA,qBAAA0B,IAAA,OAAegF,KAAK;MACpB;MACA;MACA;MACA,IAAI,CAAC+L,gBAAgB,CAACQ,QAAQ,GAAG,KAAK;IACxC;EAAC;EAAA,OAAAzB,wBAAA;AAAA,EAhDmD0B,+BAAgB;;;;;;;;ACf5C;AACkC;AACY;AACf;AACd;AACa;AACG;AACG;AAAA,IAEzCC,oCAAe;EAClC,SAAAA,gBAAA,EAAc;IAAA1H,mCAAA,OAAA0H,eAAA;IACZ,IAAI,CAACzH,UAAU,GAAGnB,QAAQ,CAACtL,aAAa,CAAC,KAAK,CAAC;IAC/C,IAAI,CAACmU,cAAc,GAAG7I,QAAQ,CAACtL,aAAa,CAAC,KAAK,CAAC;IACnD,IAAI,CAACoU,iBAAiB,GAAG9I,QAAQ,CAACtL,aAAa,CAAC,KAAK,CAAC;;IAEtD;IACA;IACA;IACA,IAAI,CAACqU,yBAAyB,GAAG,IAAI;IACrC3L,8BAAM,CAAC,iCAAiC,EAAEmK,EAAE,IAAK,IAAI,CAACwB,yBAAyB,GAAGxB,EAAG,CAAC;IAEtF,IAAI,CAACyB,aAAa,GAAG,IAAI,CAAC1H,aAAa,CACrC,oDAAoD,EACpD,QAAQ,EACR,MAAM;MACJ/N,mBAAS,CAACmQ,GAAG,CAACnQ,mBAAS,CAAC0V,WAAW,CAAC;MACpC,IAAI,CAACnH,IAAI,CAACoH,MAAM,CAAC,CAAC;IACpB,CACF,CAAC;IACD,IAAI,CAACF,aAAa,CAACZ,SAAS,GAAGC,iBAAiB,eAAC5T,eAAA,CAAAC,aAAA,CAACyU,iBAAQ;MAACZ,IAAI,EAAC,cAAc;MAACC,KAAK,EAAE;IAAG,CAAE,CAAC,CAAC;IAE7F,IAAI,CAACY,cAAc,GAAG,IAAI,CAAC9H,aAAa,CACtC,qDAAqD,EACrD,QAAQ,EACR,MAAM;MACJ/N,mBAAS,CAACmQ,GAAG,CAACnQ,mBAAS,CAAC8V,YAAY,CAAC;MACrC,IAAI,CAACvH,IAAI,CAACwH,OAAO,CAAC,CAAC;IACrB,CACF,CAAC;IACD,IAAI,CAACF,cAAc,CAAChB,SAAS,GAAGC,iBAAiB,eAAC5T,eAAA,CAAAC,aAAA,CAAC6U,kBAAS;MAAChB,IAAI,EAAC,cAAc;MAACC,KAAK,EAAE;IAAG,CAAE,CAAC,CAAC;IAE/F,IAAMpH,YAAY,GAAG,oCAAoC;IACzD,IAAI,CAACC,QAAQ,GAAG,IAAI,CAACC,aAAa,CAACF,YAAY,EAAE,aAAa,EAAE,MAAM;MACpE,IAAI,CAACG,kBAAkB,CAAC,CAAC;IAC3B,CAAC,CAAC;IACF,IAAI,CAACiI,UAAU,GAAG,IAAI,CAAClI,aAAa,CAAC,2BAA2B,EAAE,WAAW,EAAE,MAAM;MACnF/N,mBAAS,CAACmQ,GAAG,CAACnQ,mBAAS,CAACkW,aAAa,CAAC;MACtC,IAAI,CAACV,yBAAyB,GAC1B,IAAI,CAACA,yBAAyB,CAAC,CAAC,GAChCtV,MAAM,CAACC,GAAG,CAACC,UAAU,CAAC,SAAS,CAAC,CAAC,CAAC;IACxC,CAAC,CAAC;IAEF,IAAI,CAAC8N,iBAAiB,GAAG,IAAI,CAACC,WAAW,CAAC,4BAA4B,CAAC;IACvE,IAAI,CAACL,QAAQ,CAACM,WAAW,CAAC,IAAI,CAACF,iBAAiB,CAAC;EACnD;EAACG,gCAAA,CAAAgH,eAAA;IAAA3M,GAAA;IAAAnG,KAAA,EAED,SAAA+L,MAAM9E,GAAG,EAAE;MACT,IAAI,CAAC+E,IAAI,GAAG/E,GAAG;MACf,IAAI,CAAC8L,cAAc,CAAClU,SAAS,GAAG,mBAAmB;MACnD,IAAI,CAACkU,cAAc,CAAC9G,WAAW,GAAG,EAAE;MACpC,IAAI,CAAC+G,iBAAiB,CAACnU,SAAS,GAAG,2DAA2D;MAC9F,IAAI,CAACmU,iBAAiB,CAAC/G,WAAW,GAAG,EAAE;MAEvC,IAAM2H,aAAa,GAAG,IAAIC,mDAAa,CACrC;QACEC,eAAe,EAAE;UACfC,kBAAkB,EAAE;QACtB,CAAC;QACDC,iBAAiB,EAAE,IAAI;QACvBC,kBAAkB,EAAE;MACtB,CAAC,EACD,IAAI,CAACjB,iBACP,CAAC;MAED,IAAI,CAACD,cAAc,CAAClH,WAAW,CAAC,IAAI,CAACN,QAAQ,CAAC;MAC9C,IAAI,CAACwH,cAAc,CAAClH,WAAW,CAAC,IAAI,CAAC6H,UAAU,CAAC;MAEhDE,aAAa,CAACpC,OAAO,CAAC,MAAM;QAC1B,IAAI,CAACwB,iBAAiB,CAACnH,WAAW,CAAC,IAAI,CAACqH,aAAa,CAAC;QACtD,IAAI,CAACF,iBAAiB,CAACnH,WAAW,CAAC,IAAI,CAACyH,cAAc,CAAC;MACzD,CAAC,CAAC;MAEF,IAAI,CAACtH,IAAI,CAACkI,UAAU,CAACN,aAAa,CAAC;MAEnC,IAAM1H,2BAA2B,GAAG,IAAI,CAACA,2BAA2B,CAACC,IAAI,CAAC,IAAI,CAAC;MAE/ED,2BAA2B,CAAC,CAAC;MAE7B,IAAI,CAACF,IAAI,CAAChE,EAAE,CAAC,QAAQ,EAAEkE,2BAA2B,CAAC;MACnD,IAAI,CAACF,IAAI,CAAChE,EAAE,CAAC,OAAO,EAAEkE,2BAA2B,CAAC;MAElD,IAAI,CAACiI,yBAAyB,GAAGjK,QAAQ,CAACtL,aAAa,CAAC,KAAK,CAAC;MAC9D,IAAI,CAACuV,yBAAyB,CAACtV,SAAS,GAAG,wCAAwC;MACnF,IAAI,CAACwM,UAAU,CAACQ,WAAW,CAAC,IAAI,CAACsI,yBAAyB,CAAC;MAE3D,IAAMC,oBAAoB,GAAG,IAAIlG,oBAAoB,CACnD;QACEmG,IAAI,EAAE;MACR,CAAC,EACD,IAAI,CAACF,yBACP,CAAC;MAED,IAAMG,0BAA0B,GAAG,IAAIzF,0BAA0B,CAC/D,CAAC,CAAC,EACF,IAAI,CAACsF,yBACP,CAAC;MACD,IAAI,CAAC9I,UAAU,CAACQ,WAAW,CAAC,IAAI,CAACkH,cAAc,CAAC;MAChD,IAAI,CAAC1H,UAAU,CAACQ,WAAW,CAAC,IAAI,CAACmH,iBAAiB,CAAC;MAEnD,IAAI,CAAC3H,UAAU,CAACQ,WAAW,CAAC,IAAI,CAACsI,yBAAyB,CAAC;MAC3D,IAAI,CAACnI,IAAI,CAACkI,UAAU,CAACE,oBAAoB,EAAE,cAAc,CAAC;MAC1D,IAAI,CAACpI,IAAI,CAACkI,UAAU,CAACI,0BAA0B,EAAE,cAAc,CAAC;MAChE,OAAO,IAAI,CAACjJ,UAAU;IACxB;EAAC;IAAAlF,GAAA;IAAAnG,KAAA,EAED,SAAAoM,SAAA,EAAW;MACT,IAAI,CAACf,UAAU,CAACgB,UAAU,CAACC,WAAW,CAAC,IAAI,CAACjB,UAAU,CAAC;MACvD,IAAI,CAACW,IAAI,GAAGnF,SAAS;MACrB0N,gCAAQ,CAAC,iCAAiC,CAAC;IAC7C;EAAC;IAAApO,GAAA;IAAAnG,KAAA,EAED,SAAAwL,cAAc3M,SAAS,EAAEqO,SAAS,EAAE3G,EAAE,EAAE;MACtC,IAAMpG,CAAC,GAAG+J,QAAQ,CAACtL,aAAa,CAAC,QAAQ,CAAC;MAC1CuB,CAAC,CAACgN,YAAY,CAAC,OAAO,EAAEtO,SAAS,CAAC;MAClCsB,CAAC,CAACgN,YAAY,CAAC,YAAY,EAAED,SAAS,CAAC;MACvC/M,CAAC,CAACgN,YAAY,CAAC,OAAO,EAAED,SAAS,CAAC;MAClC/M,CAAC,CAACiN,gBAAgB,CAAC,OAAO,EAAE7G,EAAE,CAAC;MAC/B,OAAOpG,CAAC;IACV;EAAC;IAAAgG,GAAA;IAAAnG,KAAA,EAED,SAAA4L,YAAY/M,SAAS,EAAE;MACrB,IAAMsB,CAAC,GAAG+J,QAAQ,CAACtL,aAAa,CAAC,MAAM,CAAC;MACxCuB,CAAC,CAACgN,YAAY,CAAC,OAAO,EAAEtO,SAAS,CAAC;MAClC,OAAOsB,CAAC;IACV;EAAC;IAAAgG,GAAA;IAAAnG,KAAA,EAED,SAAAyL,mBAAA,EAAqB;MACnB,IAAI,CAACO,IAAI,CAACqB,MAAM,CAAC;QAAEC,KAAK,EAAE,CAAC;QAAEC,OAAO,EAAE;MAAE,CAAC,CAAC;IAC5C;EAAC;IAAApH,GAAA;IAAAnG,KAAA,EAED,SAAAkM,4BAAA,EAA8B;MAC5B,IAAI,IAAI,CAACF,IAAI,CAACwB,QAAQ,CAAC,CAAC,KAAK,CAAC,IAAI,IAAI,CAACxB,IAAI,CAACyB,SAAS,CAACC,KAAK,KAAK,CAAC,EAAE;QACjE,IAAI,CAACnC,QAAQ,CAACoC,SAAS,CAACC,GAAG,CAAC,gBAAgB,CAAC;MAC/C,CAAC,MAAM;QACL,IAAI,CAACrC,QAAQ,CAACoC,SAAS,CAAC3C,MAAM,CAAC,gBAAgB,CAAC;MAClD;MACA,IAAM6C,KAAK,GAAG,CAAC,GAAG,IAAI,CAAC7B,IAAI,CAACwB,QAAQ,CAAC,CAAC,GAAG,GAAG;MAC5C,IAAMM,QAAQ,GAAG,IAAI,CAAC9B,IAAI,CAACyB,SAAS,CAACC,KAAK,IAAI,GAAG,GAAGK,IAAI,CAACC,EAAE,CAAC;MAC5D,IAAI,CAACrC,iBAAiB,CAACxP,KAAK,CAACsR,SAAS,eAAAQ,MAAA,CAAeJ,KAAK,eAAAI,MAAA,CAAYH,QAAQ,SAAM;IACtF;EAAC;EAAA,OAAAgF,eAAA;AAAA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACrJkC;AACC;AAAA,IAEjB0B,cAAM,0BAAAC,IAAA;EAAArG,gBAAA,CAAAoG,MAAA,EAAAC,IAAA;EACzB,SAAAD,OAAYE,OAAO,EAAE;IAAAtJ,sBAAA,OAAAoJ,MAAA;IACnB,IAAAG,mBAAA,GAMID,OAAO,CAACxM,UAAU;MALpBC,SAAS,GAAAwM,mBAAA,CAATxM,SAAS;MACEtJ,SAAS,GAAA8V,mBAAA,CAAnB,OAAO;MACEC,YAAY,GAAAD,mBAAA,CAAtBE,QAAQ;MACRpQ,IAAI,GAAAkQ,mBAAA,CAAJlQ,IAAI;MACJwE,QAAQ,GAAA0L,mBAAA,CAAR1L,QAAQ;IAEV,IAAM6L,EAAE,GAAGC,qBAAM,CAACC,OAAO,CAACN,OAAO,CAACO,QAAQ,CAACC,WAAW,CAAC;IAAC,OAAA3G,iBAAA,OAAAiG,MAAA,GAClDrM,SAAS,IAAIuM,OAAO,CAACxW,EAAE,EAAE+K,QAAQ,EAAExE,IAAI,EAAE0Q,mBAAQ,EAAEL,EAAE,EAAEjW,SAAS,EAAE+V,YAAY;EACtF;EAAC,OAAA9I,mBAAA,CAAA0I,MAAA;AAAA,EAXiCY,aAAG;;;;;;;;;;;;;;ACHC;AACc;AACzB;AACmC;AAEhE,IAAMhZ,cAAc,GAAGiZ,uBAAK,CAAC7E,GAAG,CAAC,CAAC,CAAC8E,QAAQ;AAC3C,IAAMC,OAAO,GAAGF,uBAAK,CAAC7E,GAAG,CAAC,CAAC,CAACgF,MAAM,CAACD,OAAO;AAE1C,SAASE,WAAWA,CAAA,EAAG;EACrB,OAAO/V,MAAM,CAACgW,MAAM,CAACtZ,cAAc,EAAE;IACnCO,UAAU,EAAEgZ,aAAG,CAACC,aAAa,CAACC,QAAQ,CAACC,MAAM,EAAEP,OAAO,EAAEnZ,cAAc,CAACO,UAAU,CAAC;IAClFC,QAAQ,EAAE+Y,aAAG,CAACC,aAAa,CAACC,QAAQ,CAACC,MAAM,EAAEP,OAAO,EAAEnZ,cAAc,CAACQ,QAAQ;EAC/E,CAAC,CAAC;AACJ;AAEe,SAASmZ,QAAQA,CAAA,EAAG;EACjC,OAAO7Z,gCAAS,CAACI,IAAI,CAAC0Z,SAAS,CAACC,KAAU,CAAC,EAAER,WAAW,CAAC,CAAC,EAAE9X,MAAM,CAACuY,WAAW,CAAC,CAAC,CAACC,IAAI,CAAC;AACxF,C;;;;;;;;;ACjB0B;AACkE;AACnD;AAEzC,IAAMC,mBAAmB,GAAGtZ,IAAA;EAAA,IAAGuZ,IAAI,GAAAvZ,IAAA,CAAJuZ,IAAI;EAAA,oBACjC1X,eAAA,CAAAC,aAAA;IACEC,SAAS,uDAAAoP,MAAA,CAAuDqI,2CAAoB,CAAC;MACnFD;IACF,CAAC,CAAC;EAAG,CACN,CAAC;AAAA,CACH;AAED,IAAME,wBAAwB,GAAG9N,KAAA,IAAe;EAAA,IAAZ+N,KAAK,GAAA/N,KAAA,CAAL+N,KAAK;EACvC,IAAMC,WAAW,GAAGD,KAAK,CAACE,IAAI,CAACC,MAAM,CAACC,GAAG,IAAIA,GAAG,CAACP,IAAI,KAAK,MAAM,CAAC;EAEjE,IAAII,WAAW,CAACpS,MAAM,IAAI,CAAC,EAAE;IAC3B,oBACE1F,eAAA,CAAAC,aAAA,cACG6X,WAAW,CAACxP,GAAG,CAAC,CAAC2P,GAAG,EAAEC,KAAK,kBAC1BlY,eAAA,CAAAC,aAAA,CAACwX,mBAAmB;MAACjQ,GAAG,EAAE0Q,KAAM;MAACR,IAAI,EAAEO,GAAG,CAACP;IAAK,CAAE,CACnD,CACE,CAAC;EAEV;EAEA,oBACE1X,eAAA,CAAAC,aAAA,2BACED,eAAA,CAAAC,aAAA,CAACwX,mBAAmB;IAACC,IAAI,EAAEI,WAAW,CAAC,CAAC,CAAC,CAACJ;EAAK,CAAE,CAAC,eAClD1X,eAAA,CAAAC,aAAA;IAAKC,SAAS,EAAC;EAA6E,gBAC1FF,eAAA,CAAAC,aAAA,cAAK,GAAC,EAAC6X,WAAW,CAACpS,MAAM,GAAG,CAAO,CAChC,CAAC,eACN1F,eAAA,CAAAC,aAAA,CAACwX,mBAAmB;IAACC,IAAI,EAAEI,WAAW,CAACA,WAAW,CAACpS,MAAM,GAAG,CAAC,CAAC,CAACgS;EAAK,CAAE,CACnE,CAAC;AAEV,CAAC;AAED,IAAMS,UAAU,GAAGC,KAAA,IAAgC;EAAA,IAA7BP,KAAK,GAAAO,KAAA,CAALP,KAAK;IAAEQ,OAAO,GAAAD,KAAA,CAAPC,OAAO;IAAEtN,MAAM,GAAAqN,KAAA,CAANrN,MAAM;EAC1C,IAAMuN,iBAAiB,GAAGD,OAAO,KAAK,iBAAiB;EACvD,oBACErY,eAAA,CAAAC,aAAA;IAAK,WAAS4X,KAAK,CAACtY,EAAG;IAACW,SAAS,4BAAAoP,MAAA,CAA4BvE,MAAM,mBAAAuE,MAAA,CAAgB+I,OAAO;EAAG,GAC1FC,iBAAiB,gBAChBtY,eAAA,CAAAC,aAAA,CAAC2X,wBAAwB;IAACC,KAAK,EAAEA;EAAM,CAAE,CAAC,gBAE1C7X,eAAA,CAAAC,aAAA;IAAKC,SAAS,EAAC;EAAwB,gBACrCF,eAAA,CAAAC,aAAA,CAACsY,qBAAW;IAACF,OAAO,EAAEA,OAAQ;IAACvE,IAAI,EAAC,cAAc;IAACC,KAAK,EAAE;EAAG,CAAE,CAC5D,CACN,eACD/T,eAAA,CAAAC,aAAA,2BACED,eAAA,CAAAC,aAAA;IAAKC,SAAS,EAAC;EAAqB,GAAEsY,qCAAc,CAACX,KAAK,CAACY,QAAQ,CAAO,CAAC,EAC1E,CAACH,iBAAiB,iBACjBtY,eAAA,CAAAC,aAAA;IAAKC,SAAS,EAAC;EAAqB,GAAEwY,qCAAc,CAACb,KAAK,CAACc,QAAQ,CAAO,CAEzE,CACF,CAAC;AAEV,CAAC;AAEcR,mEAAU,E;;;;;;;;;;;;;;;;;;;;;ACzDC;AAE1B,IAAMS,WAAW,GAAGC,GAAG,IAAIC,eAAK,CAACD,GAAG,CAAC,CAACE,GAAG,CAACD,eAAK,CAAC,OAAO,CAAC,EAAE,IAAI,CAAC,CAACD,GAAG,CAAC,CAAC;AACrE,IAAMG,YAAY,GAAGH,GAAG,IAAKA,GAAG,CAACpS,MAAM,CAAC,CAAC,CAAC,KAAK,GAAG,GAAGoS,GAAG,OAAAvJ,MAAA,CAAOuJ,GAAG,CAAG;AAE9D,SAASI,iBAAiBA,CAAClD,OAAO,EAAE;EAAA,IAAAC,mBAAA;EACzC,IAAMkD,SAAS,IAAAlD,mBAAA,GAAGD,OAAO,CAACxM,UAAU,cAAAyM,mBAAA,uBAAlBA,mBAAA,CAAoBkD,SAAS;EAC/C,OAAAC,aAAA,CAAAA,aAAA,KACKpD,OAAO;IACVxM,UAAU,EAAA4P,aAAA,CAAAA,aAAA,KACLpD,OAAO,CAACxM,UAAU;MACrB2P,SAAS,EAAEA,SAAS,GAAGF,YAAY,CAACE,SAAS,CAAC,GAAG,SAAS;MAC1DE,YAAY,EAAEF,SAAS,GAAGN,WAAW,CAACI,YAAY,CAACE,SAAS,CAAC,CAAC,GAAG;IAAS;EAC3E;AAEL;AAEA,SAASG,kBAAkBA,CAACC,QAAQ,EAAEC,SAAS,EAAE;EAC/C,IAAID,QAAQ,EAAE;IACZ,OAAOC,SAAS,GAAG,CAAC,KAAK,EAAE,cAAc,CAAC,GAAG,CAAC,KAAK,EAAE,WAAW,CAAC;EACnE;EACA,OAAOA,SAAS,GAAG,SAAS,GAAG,SAAS;AAC1C;AAEO,SAASC,aAAaA,CAACnB,OAAO,EAAEiB,QAAQ,EAAEC,SAAS,EAAE;EAC1D,IAAIlB,OAAO,KAAK,SAAS,EAAE;IACzB,OAAO;MACL7V,IAAI,EAAE,QAAQ;MACdiX,MAAM,EAAE;QACN,YAAY,EAAEH,QAAQ,GAAG,uBAAuB,GAAG,yBAAyB;QAC5E,kBAAkB,EAAE,MAAM;QAC1B,gBAAgB,EAAE,EAAE;QACpB,uBAAuB,EAAE,IAAI;QAC7B,oBAAoB,EAAE,IAAI;QAC1B,oBAAoB,EAAE;MACxB;IACF,CAAC;EACH;EAEA,OAAO;IACL9W,IAAI,EAAE,MAAM;IACZiX,MAAM,EAAE;MACN,WAAW,EAAE,OAAO;MACpB,UAAU,EAAE,OAAO;MACnBC,UAAU,EAAE;IACd,CAAC;IACDC,KAAK,EAAE;MACL,YAAY,EAAEN,kBAAkB,CAACC,QAAQ,EAAEC,SAAS,CAAC;MACrD,uBAAuB,EAAE;QAAEd,QAAQ,EAAE;MAAE,CAAC;MACxC,YAAY,EAAEc,SAAS,GAAG,CAAC,GAAG;IAChC;EACF,CAAC;AACH;AAEO,SAASK,mBAAmBA,CAACtR,GAAG,EAAEuR,OAAO,EAAExB,OAAO,EAAEiB,QAAQ,EAAEC,SAAS,EAAE;EAC9E,IAAIlB,OAAO,KAAK,SAAS,EAAE;IACzB/P,GAAG,CAACwR,iBAAiB,CACnBD,OAAO,EACP,YAAY,EACZP,QAAQ,GAAG,uBAAuB,GAAG,yBACvC,CAAC;EACH,CAAC,MAAM;IACLhR,GAAG,CAACyR,gBAAgB,CAACF,OAAO,EAAE,YAAY,EAAER,kBAAkB,CAACC,QAAQ,EAAEC,SAAS,CAAC,CAAC;EACtF;AACF,C;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AChEA;AACA;AACA;AACA;;AAEsC;AACK;AACA;AACX;AACM;AACF;AAEpC,IAAMS,SAAS,GAAG,QAAQ;AAC1B,IAAMC,WAAW,GAAGA,CAACC,EAAE,EAAEC,EAAE,KAAK/K,IAAI,CAACgL,GAAG,CAACF,EAAE,GAAGC,EAAE,CAAC,GAAGH,SAAS;AAC7D,IAAMK,WAAW,GAAG,SAAdA,WAAWA,CAAA;EAAA,IAAIC,EAAE,GAAAvS,SAAA,CAAArC,MAAA,QAAAqC,SAAA,QAAAG,SAAA,GAAAH,SAAA,MAAG,EAAE;EAAA,IAAEwS,EAAE,GAAAxS,SAAA,CAAArC,MAAA,QAAAqC,SAAA,QAAAG,SAAA,GAAAH,SAAA,MAAG,EAAE;EAAA,OAAKkS,WAAW,CAACK,EAAE,CAAC,CAAC,CAAC,EAAEC,EAAE,CAAC,CAAC,CAAC,CAAC,IAAIN,WAAW,CAACK,EAAE,CAAC,CAAC,CAAC,EAAEC,EAAE,CAAC,CAAC,CAAC,CAAC;AAAA;AAChG,IAAMC,KAAK,GAAGC,KAAK,OAAAnL,MAAA,CAAOmL,KAAK,CAAC,CAAC,CAAC,CAACC,OAAO,CAAC,CAAC,CAAC,OAAApL,MAAA,CAAImL,KAAK,CAAC,CAAC,CAAC,CAACC,OAAO,CAAC,CAAC,CAAC,CAAE;AACtE,IAAMC,IAAI,GAAG,SAAPA,IAAIA,CAAA;EAAA,IAAIC,KAAK,GAAA7S,SAAA,CAAArC,MAAA,QAAAqC,SAAA,QAAAG,SAAA,GAAAH,SAAA,MAAG,EAAE;EAAA,OAAK6S,KAAK,CAACA,KAAK,CAAClV,MAAM,GAAG,CAAC,CAAC;AAAA;;AAEpD;AACA,IAAMmV,OAAO,GAAGC,KAAK,IAAIC,EAAE,IAAI;EAC7B,IAAMrV,MAAM,GAAGsV,yCAAU,CAACD,EAAE,CAAC;EAC7B,IAAME,MAAM,GAAGC,6CAAQ,CAACC,wCAAK,CAACJ,EAAE,EAAErV,MAAM,GAAGoV,KAAK,CAAC,CAAC;EAClD;EACA,IAAMM,gBAAgB,GAAGxM,0CAAO,CAC9BuM,wCAAK,CAACJ,EAAE,EAAErV,MAAM,IAAIoV,KAAK,GAAG,GAAG,CAAC,CAAC,EACjCK,wCAAK,CAACJ,EAAE,EAAErV,MAAM,IAAIoV,KAAK,GAAG,GAAG,CAAC,CAClC,CAAC;EAED,OAAO;IAAEG,MAAM;IAAEG;EAAiB,CAAC;AACrC,CAAC;AAED,SAASC,eAAeA,CAAC9E,WAAW,EAAE+E,WAAW,EAAE;EACjD,IAAMC,sBAAsB,GAAG,CAAC,EAAE,CAAC;EACnChF,WAAW,CAAC9S,OAAO,CAACgX,KAAK,IAAI;IAC3B,IAAIa,WAAW,CAACzJ,GAAG,CAAC2I,KAAK,CAACC,KAAK,CAAC,CAAC,GAAG,CAAC,EAAE;MACrCc,sBAAsB,CAAClW,IAAI,CAAC,EAAE,CAAC;IACjC,CAAC,MAAM;MACLsV,IAAI,CAACY,sBAAsB,CAAC,CAAClW,IAAI,CAACoV,KAAK,CAAC;IAC1C;EACF,CAAC,CAAC;EACF,IAAMe,sBAAsB,GAAGD,sBAAsB,CAClDvD,MAAM,CAACxW,CAAC,IAAIA,CAAC,CAACkE,MAAM,GAAG,CAAC,CAAC,CACzB+V,MAAM,CAAC,CAACC,OAAO,EAAEC,OAAO,KAAMA,OAAO,CAACjW,MAAM,GAAGgW,OAAO,CAAChW,MAAM,GAAGiW,OAAO,GAAGD,OAAQ,EAAE,EAAE,CAAC;EAE1F,IAAME,GAAG,GAAGJ,sBAAsB,CAAC9V,MAAM,KAAK,CAAC,GAAG6Q,WAAW,GAAGiF,sBAAsB;EAEtF,IAAII,GAAG,CAAClW,MAAM,KAAK,CAAC,EAAEkW,GAAG,CAAC,CAAC,CAAC,GAAGA,GAAG,CAAC,CAAC,CAAC;EAErC,OAAOC,6CAAU,CAACD,GAAG,CAAC;AACxB;;AAEA;AACA;AACO,SAASE,oBAAoBA,CAACC,WAAW,EAAE;EAAA,IAAA5d,IAAA;EAChD,IAAI4d,WAAW,CAACrW,MAAM,GAAG,CAAC,EAAE;IAC1B,OAAOqW,WAAW;EACpB;EACA;EACA,IAAMC,cAAc,GAAGD,WAAW,CAACzT,GAAG,CAAC2T,2BAAQ,CAAC;EAChD;EACA,IAAMX,WAAW,GAAG,IAAIY,GAAG,CAAC,CAAC;EAC7B,CAAA/d,IAAA,KAAE,EAACmR,MAAM,CAAAtH,KAAA,CAAA7J,IAAA,EAAAge,kBAAA,CAAIH,cAAc,EAAC,CAACvY,OAAO,CAACgX,KAAK,IAAI;IAC5Ca,WAAW,CAACc,GAAG,CAAC5B,KAAK,CAACC,KAAK,CAAC,EAAE,CAACa,WAAW,CAACzJ,GAAG,CAAC2I,KAAK,CAACC,KAAK,CAAC,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;EACzE,CAAC,CAAC;EACF,OAAOuB,cAAc,CAAC1T,GAAG,CAACiO,WAAW,IAAI8E,eAAe,CAAC9E,WAAW,EAAE+E,WAAW,CAAC,CAAC;AACrF;AAEA,SAASe,kBAAkBA,CAACtG,OAAO,EAAE;EACnC,IAAMuG,mBAAmB,GAAGL,mCAAQ,CAAClG,OAAO,CAAC,CAAC0F,MAAM,CAAC,CAACc,MAAM,EAAE9B,KAAK,KAAK;IACtE,IAAM+B,SAAS,GAAG7B,IAAI,CAAC4B,MAAM,CAAC;IAC9B,IAAI,CAACC,SAAS,IAAI,CAACnC,WAAW,CAACmC,SAAS,EAAE/B,KAAK,CAAC,EAAE;MAChD8B,MAAM,CAAClX,IAAI,CAACoV,KAAK,CAAC;IACpB;IACA,OAAO8B,MAAM;EACf,CAAC,EAAE,EAAE,CAAC;EACN,OAAOV,6CAAU,CAACS,mBAAmB,CAAC;AACxC;;AAEA;AACA,SAASG,eAAeA,CAACC,SAAS,EAAE;EAClC,OAAOA,SAAS,CAACpU,GAAG,CAAC,CAAC0F,QAAQ,EAAEkK,KAAK,KAAK;IACxC,IAAMyE,MAAM,GAAGD,SAAS,CAAChW,KAAK,CAAC,CAAC;IAChCiW,MAAM,CAACC,MAAM,CAAC1E,KAAK,EAAE,CAAC,CAAC;IACvB,IAAM2E,aAAa,GAAGC,yBAAyB,CAAC9O,QAAQ,EAAE2O,MAAM,CAAC;IACjE,OAAO;MACL1B,MAAM,EAAEjN,QAAQ,CAACiN,MAAM;MACvBlQ,MAAM,EAAEgS,SAAS,CAAC/O,QAAQ,EAAE6O,aAAa;IAC3C,CAAC;EACH,CAAC,CAAC;AACJ;AAEA,SAASC,yBAAyBA,CAAC9O,QAAQ,EAAE2O,MAAM,EAAE;EACnD,OACEA,MAAM,CACHrU,GAAG,CAAC0U,KAAK,IAAIpO,0CAAO,CAACoO,KAAK,CAAC/B,MAAM,EAAEjN,QAAQ,CAACiN,MAAM,CAAC,CAAC,CACpDQ,MAAM,CAAC,CAACwB,GAAG,EAAE5b,KAAK,EAAE6b,MAAM,EAAApT,KAAA;IAAA,IAAIpE,MAAM,GAAAoE,KAAA,CAANpE,MAAM;IAAA,OAAOuX,GAAG,GAAG5b,KAAK,GAAGqE,MAAM;EAAA,GAAE,CAAC,CAAC;EAAI;EAC1E,CAAC;AAEL;AAEA,SAASqX,SAASA,CAAC/O,QAAQ,EAAEmP,YAAY,EAAE;EACzC,IAAMC,IAAI,GACRhO,IAAI,CAACgL,GAAG,CAACpM,QAAQ,CAACoN,gBAAgB,CAAC,GAAG,EAAE,IAAIhM,IAAI,CAACgL,GAAG,CAACpM,QAAQ,CAACoN,gBAAgB,CAAC,GAAG,GAAG,GACjF,UAAU,GACV,YAAY;EAElB,IAAIgC,IAAI,KAAK,UAAU,EAAE;IACvB,OAAOD,YAAY,GAAG,CAAC,GAAG,MAAM,GAAG,OAAO;EAC5C;EACA,OAAO/N,IAAI,CAACgL,GAAG,CAAC+C,YAAY,CAAC,GAAG,EAAE,GAAG,QAAQ,GAAG,KAAK;AACvD;;AAEA;AACO,SAASE,iBAAiBA,CAAA,EAAc;EAAA,IAAbC,MAAM,GAAAvV,SAAA,CAAArC,MAAA,QAAAqC,SAAA,QAAAG,SAAA,GAAAH,SAAA,MAAG,EAAE;EAC3C,IAAMwV,eAAe,GAAGC,KAAK,CAACC,OAAO,CAACH,MAAM,CAAC,GAAGA,MAAM,GAAGA,MAAM,CAAChU,QAAQ;EACxE,IAAMoU,WAAW,GAAGH,eAAe,CAACjV,GAAG,CAAC+T,kBAAkB,CAAC;EAC3D,IAAMsB,QAAQ,GAAG7B,oBAAoB,CAAC4B,WAAW,CAAC;EAClD,IAAMhB,SAAS,GAAGiB,QAAQ,CAACrV,GAAG,CAACuS,OAAO,CAAC,GAAG,CAAC,CAAC;EAC5C,OAAO4B,eAAe,CAACC,SAAS,CAAC;AACnC,C;;;;;;;;;;;;;;;;;;;;;;;;ACvH0B;AAC8B;AACL;AACrB;AACkC;AACf;AACE;AACoC;AACE;AACnD;AACE;AACa;AACiB;AACrB;AACU;AAC/B;AAE5B,IAAMkB,4BAAY,GAAG,SAAfA,YAAYA,CAAI3C,MAAM,EAAmC;EAAA,IAAjC/a,SAAS,GAAA6H,SAAA,CAAArC,MAAA,QAAAqC,SAAA,QAAAG,SAAA,GAAAH,SAAA,MAAG,EAAE;EAAA,IAAE2H,OAAO,GAAA3H,SAAA,CAAArC,MAAA,QAAAqC,SAAA,QAAAG,SAAA,GAAAH,SAAA,MAAG,CAAC,CAAC;EACxD,IAAMrI,OAAO,GAAG6L,QAAQ,CAACtL,aAAa,CAAC,KAAK,CAAC;EAC7CP,OAAO,CAACQ,SAAS,GAAGA,SAAS;EAC7B,OAAO,IAAI2d,qBAAM,CAAA1E,4BAAA,CAAAA,4BAAA,KAAMzJ,OAAO;IAAEhQ;EAAO,EAAE,CAAC,CAACwL,SAAS,CAAC+P,MAAM,CAAC;AAC9D,CAAC;AAED,IAAM6C,gBAAgB,GAAGA,CAACjG,KAAK,EAAEQ,OAAO,EAAAla,IAAA,KAAyB;EAAA,IAArB8c,MAAM,GAAA9c,IAAA,CAAN8c,MAAM;IAAElQ,MAAM,GAAA5M,IAAA,CAAN4M,MAAM;EACxD,IAAMrL,OAAO,GAAG6L,QAAQ,CAACtL,aAAa,CAAC,KAAK,CAAC;EAC7CP,OAAO,CAACiU,SAAS,GAAGC,iBAAiB,eACnC5T,eAAA,CAAAC,aAAA,CAACkY,oBAAU;IAACN,KAAK,EAAEA,KAAM;IAACQ,OAAO,EAAEA,OAAQ;IAACtN,MAAM,EAAEA;EAAO,CAAE,CAC/D,CAAC;EACDrL,OAAO,CAACQ,SAAS,GAAG,mBAAmB;EACvCR,OAAO,CAACqe,OAAO,GAAG,MAAM;IACtB3d,4BAAI,CAAC,iBAAiB,EAAEyX,KAAK,CAACtY,EAAE,CAAC;EACnC,CAAC;EACD,OAAO,IAAIse,qBAAM,CAAC;IAAEne,OAAO;IAAEqL;EAAO,CAAC,CAAC,CAACG,SAAS,CAAC+P,MAAM,CAAC;AAC1D,CAAC;AAED,IAAM+C,cAAc,GAAGA,CAACC,cAAc,EAAEC,UAAU,KAAK;EACrD,IAAMC,WAAW,GAAGvV,wCAAc,CAAC,CAAC;EACpC,IAAMwV,KAAK,GAAG;IACZC,QAAQ,EAAE,CAACH,UAAU,CAACI,QAAQ,CAAC,CAAC,GAAGJ,UAAU,CAACK,QAAQ,CAAC,CAAC,KAAKJ,WAAW,GAAG,CAAC,GAAG,EAAE,CAAC;IAClFK,QAAQ,EAAE,CAACN,UAAU,CAACO,OAAO,CAAC,CAAC,GAAGP,UAAU,CAACQ,OAAO,CAAC,CAAC,KAAKP,WAAW,GAAG,CAAC,GAAG,EAAE;EACjF,CAAC;EACD,IAAMQ,WAAW,GAAG,IAAIC,2BAAY,CAAC,CAAC;EACtCX,cAAc,CAAC3V,GAAG,CAACuW,kBAAkB,CAACT,KAAK,CAAC,CAAC,CAAC3a,OAAO,CAACqb,aAAa,IAAI;IACrEH,WAAW,CAACI,MAAM,CAACD,aAAa,CAAC;EACnC,CAAC,CAAC;EACF,OAAOH,WAAW;AACpB,CAAC;AAED,IAAME,kBAAkB,GACtB/U,KAAA;EAAA,IAAG0U,QAAQ,GAAA1U,KAAA,CAAR0U,QAAQ;IAAEH,QAAQ,GAAAvU,KAAA,CAARuU,QAAQ;EAAA,OACrBjG,KAAA,IAAwB;IAAA,IAArB6C,MAAM,GAAA7C,KAAA,CAAN6C,MAAM;MAAElQ,MAAM,GAAAqN,KAAA,CAANrN,MAAM;IACf,IAAAiU,OAAA,GAAAC,cAAA,CAAiBhE,MAAM;MAAlBiE,GAAG,GAAAF,OAAA;MAAEG,GAAG,GAAAH,OAAA;IACb,IAAIjU,MAAM,KAAK,KAAK,EAAE;MACpBoU,GAAG,IAAId,QAAQ;IACjB,CAAC,MAAM,IAAItT,MAAM,KAAK,QAAQ,EAAE;MAC9BoU,GAAG,IAAId,QAAQ;IACjB,CAAC,MAAM,IAAItT,MAAM,KAAK,MAAM,EAAE;MAC5BmU,GAAG,IAAIV,QAAQ;IACjB,CAAC,MAAM,IAAIzT,MAAM,KAAK,OAAO,EAAE;MAC7BmU,GAAG,IAAIV,QAAQ;IACjB;IACA,OAAO,CAACU,GAAG,EAAEC,GAAG,CAAC;EACnB,CAAC;AAAA;AAAC,IAEiBC,8BAAc;EACjC,SAAAA,eAAY9W,GAAG,EAAE;IAAAmE,8BAAA,OAAA2S,cAAA;IAAAC,8BAAA,oBAoDLjhB,GAAG,IAAI;MACjB,IAAMkhB,YAAY,GAAG1B,4BAAY,CAC/Bxf,GAAG,CAAC+M,MAAM,EACVoU,oBAAE,CAAC,yBAAyB,EAAEnhB,GAAG,CAACoE,IAAI,KAAK,QAAQ,IAAI,iCAAiC,CAAC,EACzF;QACEgd,SAAS,EAAE,CAAC5W,wCAAc,CAAC;MAC7B,CACF,CAAC,CACEyC,KAAK,CAAC,IAAI,CAAC/C,GAAG,CAAC,CACfe,EAAE,CAAC,SAAS,EAAEY,KAAK,IAAI;QACtB,IAAI,CAACwV,gBAAgB,CAAC,QAAQ,EAAExV,KAAK,CAAC0G,MAAM,CAAC+O,SAAS,CAAC,CAAC,CAAC;MAC3D,CAAC,CAAC;MACJ,IAAI,CAACC,YAAY,CAACta,IAAI,CAACia,YAAY,CAAC;IACtC,CAAC;IAAAD,8BAAA,yBAEgBjhB,GAAG,IAAI;MACtB,IAAMwhB,iBAAiB,GAAGhC,4BAAY,CAACxf,GAAG,CAAC+M,MAAM,EAAE,8BAA8B,EAAE;QACjFqU,SAAS,EAAE,CAAC5W,wCAAc,CAAC,CAAC;QAC5BmC,MAAM,EAAE;MACV,CAAC,CAAC,CACCM,KAAK,CAAC,IAAI,CAAC/C,GAAG,CAAC,CACfe,EAAE,CAAC,SAAS,EAAEY,KAAK,IAAI;QACtB,IAAI,CAACwV,gBAAgB,CAAC,aAAa,EAAExV,KAAK,CAAC0G,MAAM,CAAC+O,SAAS,CAAC,CAAC,CAAC;MAChE,CAAC,CAAC;MACJ,IAAI,CAACC,YAAY,CAACta,IAAI,CAACua,iBAAiB,CAAC;IAC3C,CAAC;IA5EC,IAAI,CAACtX,GAAG,GAAGA,GAAG;IACd,IAAI,CAACgV,MAAM,GAAG,EAAE;IAChB,IAAI,CAACqC,YAAY,GAAG,EAAE;IACtB,IAAI,CAACE,WAAW,GAAG,EAAE;IACrB,IAAI,CAACC,QAAQ,GAAG,IAAI;IACpB,IAAI,CAACC,kBAAkB,GAAG,CAAC,CAAC;IAE5B,IAAMC,YAAY,GAAGtJ,uBAAK,CAAC7E,GAAG,CAAC,CAAC,CAACgF,MAAM,CAACD,OAAO,GAAG,gCAAgC;IAClF,IAAI,CAACqJ,WAAW,IAAA3Q,MAAA,CAAI0Q,YAAY,iCAA8B,uBAAuB,EAAE;MACrFE,UAAU,EAAE;IACd,CAAC,CAAC;IACF,IAAI,CAACD,WAAW,IAAA3Q,MAAA,CAAI0Q,YAAY,mCAAgC,yBAAyB,EAAE;MACzFE,UAAU,EAAE;IACd,CAAC,CAAC;IAEFvX,8BAAM,CAAC,YAAY,EAAEwX,KAAA,IAA4C;MAAA,IAAzC7C,MAAM,GAAA6C,KAAA,CAAN7C,MAAM;QAAEjF,OAAO,GAAA8H,KAAA,CAAP9H,OAAO;QAAA+H,mBAAA,GAAAD,KAAA,CAAEE,aAAa;QAAbA,aAAa,GAAAD,mBAAA,cAAG,CAAC,GAAAA,mBAAA;MACxD,IAAI,CAAC5a,KAAK,CAAC,CAAC;MACZ,IAAI,CAAC8X,MAAM,GAAGA,MAAM;MACpB,IAAI,CAACjF,OAAO,GAAGA,OAAO;MACtB,IAAI,CAACiI,aAAa,CAACD,aAAa,CAAC;IACnC,CAAC,CAAC;IAEF1X,8BAAM,CAAC,gBAAgB,EAAE4X,KAAA,IAA0B;MAAA,IAAvBC,OAAO,GAAAD,KAAA,CAAPC,OAAO;QAAEC,OAAO,GAAAF,KAAA,CAAPE,OAAO;MAC1C,IAAI,CAACC,YAAY,CAACF,OAAO,EAAEC,OAAO,CAAC;IACrC,CAAC,CAAC;IAEF9X,8BAAM,CAAC,cAAc,EAAE,MAAM;MAC3B,IAAI,CAACnD,KAAK,CAAC,CAAC;IACd,CAAC,CAAC;IAEFmD,8BAAM,CAAC,WAAW,EAAEgY,IAAI,IAAI;MAC1BvgB,4BAAI,CAAC,SAAS,EAAE,IAAI,CAACwgB,WAAW,CAACD,IAAI,CAAC,CAAC;IACzC,CAAC,CAAC;IAEFhY,8BAAM,CAAC,gBAAgB,EAAEgY,IAAI,IAAI;MAC/B,IAAI,CAACE,aAAa,CAACF,IAAI,CAAC;IAC1B,CAAC,CAAC;IAEFhY,8BAAM,CAAC,kBAAkB,EAAEgY,IAAI,IAAI;MACjC,IAAI,CAACG,eAAe,CAACH,IAAI,CAAC;IAC5B,CAAC,CAAC;IAEFhY,8BAAM,CAAC,YAAY,EAAEvK,GAAG,IAAI;MAC1B,IAAI,CAAC2iB,SAAS,CAAC3iB,GAAG,CAAC;IACrB,CAAC,CAAC;IAEFuK,8BAAM,CAAC,iBAAiB,EAAEvK,GAAG,IAAI;MAC/B,IAAI,CAAC4iB,cAAc,CAAC5iB,GAAG,CAAC;IAC1B,CAAC,CAAC;EACJ;EAAC+O,2BAAA,CAAAiS,cAAA;IAAA5X,GAAA;IAAAnG,KAAA,EA6BD,SAAA4f,eAAepJ,KAAK,EAAE;MACpB,IAAI,IAAI,CAACQ,OAAO,KAAK,SAAS,IAAI,IAAI,CAACA,OAAO,KAAK,iBAAiB,EAAE;QACpE6I,kCAAW,CAACrJ,KAAK,CAAC,CAACpU,OAAO,CAAC,CAACkd,IAAI,EAAEQ,GAAG,KAAK;UACxC,IAAMC,UAAU,GAAGxD,4BAAY,CAAC+C,IAAI,CAACU,QAAQ,CAACnK,QAAQ,EAAE,uBAAuB,CAAC;UAChFkK,UAAU,CAACE,UAAU,CAAC,CAAC,CAAC/hB,EAAE,GAAG,wBAAwB,GAAG4hB,GAAG;UAC3D,IAAI,CAACxB,YAAY,CAACta,IAAI,CAAC+b,UAAU,CAAC/V,KAAK,CAAC,IAAI,CAAC/C,GAAG,CAAC,CAAC;QACpD,CAAC,CAAC;MACJ;MAEA,IAAI,IAAI,CAAC+P,OAAO,KAAK,iBAAiB,EAAE;QACtCkJ,kCAAW,CAAC1J,KAAK,CAAC,CAACpU,OAAO,CAAC,CAACkD,IAAI,EAAEwa,GAAG,KAAK;UACxC,IAAMK,UAAU,GAAG5D,4BAAY,CAACjX,IAAI,CAACuQ,QAAQ,EAAE,uBAAuB,CAAC;UACvEsK,UAAU,CAACF,UAAU,CAAC,CAAC,CAAC/hB,EAAE,GAAG,wBAAwB,GAAG4hB,GAAG;UAC3DK,UAAU,CAACF,UAAU,CAAC,CAAC,CAACG,KAAK,GAAG9a,IAAI,CAACb,IAAI;UACzC,IAAI,CAAC6Z,YAAY,CAACta,IAAI,CAACmc,UAAU,CAACnW,KAAK,CAAC,IAAI,CAAC/C,GAAG,CAAC,CAAC;QACpD,CAAC,CAAC;MACJ;IACF;EAAC;IAAAd,GAAA;IAAAnG,KAAA,EAED,SAAAqf,aAAaF,OAAO,EAAEC,OAAO,EAAE;MAC7B,IAAIiB,SAAS,GAAG,IAAI;MACpB,IAAI,IAAI,CAACpE,MAAM,CAAC5X,MAAM,KAAK,CAAC,EAAE;QAC5B;MACF;MAEA,IAAI,CAAC4X,MAAM,CAAC7Z,OAAO,CAACoU,KAAK,IAAI;QAC3B,IAAMyB,QAAQ,GAAGzB,KAAK,CAACtY,EAAE,KAAKihB,OAAO;QACrC,IAAIlH,QAAQ,EAAE;UACZoI,SAAS,GAAG7J,KAAK;QACnB;QACA,IAAI,CAACkI,kBAAkB,CAAClI,KAAK,CAACtY,EAAE,CAAC,CAACkE,OAAO,CAACke,KAAA,IAA0C;UAAA,IAAvC9H,OAAO,GAAA8H,KAAA,CAAP9H,OAAO;YAAE+H,cAAc,GAAAD,KAAA,CAAdC,cAAc;YAAEvJ,OAAO,GAAAsJ,KAAA,CAAPtJ,OAAO;UAC3EuB,mBAAmB,CAAC,IAAI,CAACtR,GAAG,EAAEuR,OAAO,EAAExB,OAAO,EAAEiB,QAAQ,EAAE,KAAK,CAAC;UAChE,IAAIsI,cAAc,EAAE;YAClBhI,mBAAmB,CAAC,IAAI,CAACtR,GAAG,EAAEsZ,cAAc,EAAEvJ,OAAO,EAAEiB,QAAQ,EAAE,IAAI,CAAC;UACxE;UACA,IAAIA,QAAQ,EAAE;YACZ,IAAIsI,cAAc,EAAE;cAClB,IAAI,CAACtZ,GAAG,CAACuZ,SAAS,CAACD,cAAc,EAAEtZ,gBAAG,CAACwZ,YAAY,CAAC;YACtD;YACA,IAAI,CAACxZ,GAAG,CAACuZ,SAAS,CAAChI,OAAO,EAAEvR,gBAAG,CAACwZ,YAAY,CAAC;UAC/C;QACF,CAAC,CAAC;MACJ,CAAC,CAAC;MACF,IAAI,CAACC,aAAa,CAACL,SAAS,CAAC;MAC7B,IAAI,CAACM,iBAAiB,CAACN,SAAS,CAAC;MACjC,IAAIjB,OAAO,IAAI,IAAI,CAACX,QAAQ,EAAE;QAC5B1f,4BAAI,CAAC,SAAS,EAAE,IAAI,CAAC0f,QAAQ,CAAC;MAChC;IACF;EAAC;IAAAtY,GAAA;IAAAnG,KAAA,EAED,SAAA0gB,cAAcL,SAAS,EAAE;MACvB,IAAI,CAACA,SAAS,EAAE;QACd;MACF;MAEA,IAAI,CAAC/B,YAAY,CAAClc,OAAO,CAACwe,MAAM,IAAI;QAClCA,MAAM,CAAC5V,MAAM,CAAC,CAAC;MACjB,CAAC,CAAC;MACF,IAAI,CAACsT,YAAY,GAAG,EAAE;MAEtB,IAAI,CAACsB,cAAc,CAACS,SAAS,CAAC;MAC9B,IAAAQ,qBAAA,GAAgCC,8CAAuB,CAACT,SAAS,CAAC;QAA1DvK,MAAM,GAAA+K,qBAAA,CAAN/K,MAAM;QAAEiL,WAAW,GAAAF,qBAAA,CAAXE,WAAW;MAE3B,IAAI,CAACrB,SAAS,CAAC;QAAE5V,MAAM,EAAE;UAAE+T,GAAG,EAAE/H,MAAM,CAAC,CAAC,CAAC;UAAEgI,GAAG,EAAEhI,MAAM,CAAC,CAAC;QAAE;MAAE,CAAC,CAAC;MAE9D,IAAI,CAAC6J,cAAc,CAAC;QAAE7V,MAAM,EAAE;UAAE+T,GAAG,EAAEkD,WAAW,CAAC,CAAC,CAAC;UAAEjD,GAAG,EAAEiD,WAAW,CAAC,CAAC;QAAE;MAAE,CAAC,CAAC;IAC/E;EAAC;IAAA5a,GAAA;IAAAnG,KAAA,EAED,SAAAif,cAAcD,aAAa,EAAE;MAC3B,IAAI,IAAI,CAAC/C,MAAM,IAAI,IAAI,CAACA,MAAM,CAAC5X,MAAM,GAAG,CAAC,EAAE;QACzC;QACA,IAAI,CAACqa,kBAAkB,GAAG,CAAC,CAAC;QAC5B,IAAI,CAACzC,MAAM,CAAC7Z,OAAO,CAACoU,KAAK,IAAI;UAC3B,IAAI,CAACkI,kBAAkB,CAAClI,KAAK,CAACtY,EAAE,CAAC,GAAG,IAAI,CAAC8iB,gBAAgB,CACvDxK,KAAK,EACLA,KAAK,CAACtY,EAAE,KAAK8gB,aACf,CAAC;QACH,CAAC,CAAC;QACF;QACA,IAAMpC,cAAc,GAAGZ,iBAAiB,CAAC,IAAI,CAACC,MAAM,CAAChV,GAAG,CAACuP,KAAK,IAAIA,KAAK,CAACvB,QAAQ,CAAC,CAAC;QAClF,IAAI,CAACuJ,WAAW,GAAG5B,cAAc,CAAC3V,GAAG,CAAC,CAAAga,KAAA,EAAqBpK,KAAK;UAAA,IAAvB+C,MAAM,GAAAqH,KAAA,CAANrH,MAAM;YAAElQ,MAAM,GAAAuX,KAAA,CAANvX,MAAM;UAAA,OACrD+S,gBAAgB,CAAC,IAAI,CAACR,MAAM,CAACpF,KAAK,CAAC,EAAE,IAAI,CAACG,OAAO,EAAE;YAAE4C,MAAM;YAAElQ;UAAO,CAAC,CAAC,CAACM,KAAK,CAAC,IAAI,CAAC/C,GAAG,CAAC;QAAA,CACxF,CAAC;QACD;QACA,IAAM4V,UAAU,GAAG,IAAIU,2BAAY,CAAC,CAAC;QACrC,IAAI,CAACtB,MAAM,CAAC7Z,OAAO,CAACoU,KAAK,IAAI;UAC3BqG,UAAU,CAACa,MAAM,CAAC,IAAI,CAAC6B,WAAW,CAAC/I,KAAK,CAAC,CAAC;QAC5C,CAAC,CAAC;QACF,IAAI,CAACiI,QAAQ,GAAG5B,UAAU,CAACa,MAAM,CAACf,cAAc,CAACC,cAAc,EAAEC,UAAU,CAAC,CAAC;QAE7E,IAAI,CAACwC,YAAY,CAACL,aAAa,EAAE,IAAI,CAAC;MACxC;IACF;EAAC;IAAA7Y,GAAA;IAAAnG,KAAA,EAED,SAAA2gB,kBAAAO,KAAA,EAAyC;MAAA,IAAjBlC,aAAa,GAAAkC,KAAA,CAAjBhjB,EAAE;MACpB;MACA4c,iCAAA,CAAI5Q,QAAQ,CAACiX,gBAAgB,CAAC,aAAa,CAAC,EAAE/e,OAAO,CAACgf,UAAU,IAAI;QAClE,IAAIA,UAAU,CAACC,OAAO,CAACnjB,EAAE,KAAK8gB,aAAa,CAACsC,QAAQ,CAAC,CAAC,EAAE;UACtDF,UAAU,CAACzT,SAAS,CAACC,GAAG,CAAC,QAAQ,CAAC;QACpC,CAAC,MAAM;UACLwT,UAAU,CAACzT,SAAS,CAAC3C,MAAM,CAAC,QAAQ,CAAC;QACvC;MACF,CAAC,CAAC;IACJ;EAAC;IAAA7E,GAAA;IAAAnG,KAAA,EAED,SAAAoe,iBAAiBjd,IAAI,EAAEyY,MAAM,EAAE;MAC7B,IAAM2H,QAAQ,GAAG,IAAIC,oBAAS,CAAC5H,MAAM,CAAC;MACtC7a,4BAAI,CAAC,wBAAwB,EAAEoC,IAAI,EAAE,EAAE,EAAEogB,QAAQ,CAAC;IACpD;EAAC;IAAApb,GAAA;IAAAnG,KAAA,EAED,SAAAmE,MAAA,EAAQ;MACN,IAAI,CAAC8X,MAAM,CAAC7Z,OAAO,CAACoU,KAAK,IAAI;QAC3B,IAAI,CAACkI,kBAAkB,CAAClI,KAAK,CAACtY,EAAE,CAAC,CAACkE,OAAO,CAACqf,KAAA,IAA2C;UAAA,IAAxClB,cAAc,GAAAkB,KAAA,CAAdlB,cAAc;YAAE/H,OAAO,GAAAiJ,KAAA,CAAPjJ,OAAO;YAAEkJ,QAAQ,GAAAD,KAAA,CAARC,QAAQ;UAC5E,IAAInB,cAAc,EAAE;YAClB,IAAI,CAACtZ,GAAG,CAAC0a,WAAW,CAACpB,cAAc,CAAC;UACtC;UACA,IAAI,CAACtZ,GAAG,CAAC0a,WAAW,CAACnJ,OAAO,CAAC;UAC7B,IAAI,CAACvR,GAAG,CAAC2a,YAAY,CAACF,QAAQ,CAAC;QACjC,CAAC,CAAC;MACJ,CAAC,CAAC;MACF,IAAI,CAACzF,MAAM,GAAG,EAAE;MAEhB,IAAI,CAACqC,YAAY,CAACrQ,MAAM,CAAC,IAAI,CAACuQ,WAAW,CAAC,CAACpc,OAAO,CAACwe,MAAM,IAAI;QAC3DA,MAAM,CAAC5V,MAAM,CAAC,CAAC;MACjB,CAAC,CAAC;MACF,IAAI,CAACsT,YAAY,GAAG,EAAE;MACtB,IAAI,CAACE,WAAW,GAAG,EAAE;MACrB,IAAI,CAACC,QAAQ,GAAG,IAAI;IACtB;EAAC;IAAAtY,GAAA;IAAAnG,KAAA,EAED,SAAA6hB,eAAerL,KAAK,EAAE;MACpB,IAAMsL,iBAAiB,GAAGC,uDAA4B,CAACvL,KAAK,CAACvB,QAAQ,CAAC;MACtE,IAAM+M,OAAO,GAAG,EAAE;MAClB,IAAMC,YAAY,GAAG,EAAE;QACrBC,eAAe,GAAG,EAAE;MACtBJ,iBAAiB,CAAC7Z,QAAQ,CAAC7F,OAAO,CAACsS,OAAO,IAAI;QAC5C,IACE,IAAI,CAACsC,OAAO,KAAK,SAAS,IACzB,IAAI,CAACA,OAAO,KAAK,iBAAiB,IAAItC,OAAO,CAACxM,UAAU,CAACmO,IAAI,KAAK,MAAO,EAC1E;UACA4L,YAAY,CAACje,IAAI,CAAC0Q,OAAO,CAAC;QAC5B,CAAC,MAAM;UACLwN,eAAe,CAACle,IAAI,CAAC4T,iBAAiB,CAAClD,OAAO,CAAC,CAAC;QAClD;MACF,CAAC,CAAC;MAEF,IAAIuN,YAAY,CAAC5d,MAAM,GAAG,CAAC,EAAE;QAC3B2d,OAAO,CAAChe,IAAI,CAAC;UACXgT,OAAO,EAAE,SAAS;UAClBmL,IAAI,EAAE;YAAEhhB,IAAI,EAAE,mBAAmB;YAAE8G,QAAQ,EAAEga;UAAa;QAC5D,CAAC,CAAC;MACJ;MAEA,IAAIC,eAAe,CAAC7d,MAAM,GAAG,CAAC,EAAE;QAC9B2d,OAAO,CAAChe,IAAI,CAAC;UACXgT,OAAO,EAAE,IAAI,CAACA,OAAO;UACrBmL,IAAI,EAAE;YAAEhhB,IAAI,EAAE,mBAAmB;YAAE8G,QAAQ,EAAEia;UAAgB;QAC/D,CAAC,CAAC;MACJ;MAEA,OAAOF,OAAO;IAChB;EAAC;IAAA7b,GAAA;IAAAnG,KAAA,EAED,SAAAghB,iBAAiBxK,KAAK,EAAEyB,QAAQ,EAAE;MAChC,IAAM+J,OAAO,GAAG,IAAI,CAACH,cAAc,CAACrL,KAAK,CAAC;MAC1C,OAAOwL,OAAO,CAAC/a,GAAG,CAAC,CAAClJ,MAAM,EAAE+hB,GAAG,KAAK;QAClC,IAAM4B,QAAQ,aAAAzT,MAAA,CAAauI,KAAK,CAACtY,EAAE,OAAA+P,MAAA,CAAI6R,GAAG,CAAE;QAC5C,IAAI,CAAC7Y,GAAG,CAACmb,SAAS,CAACV,QAAQ,EAAE;UAAEvgB,IAAI,EAAE,SAAS;UAAEghB,IAAI,EAAEpkB,MAAM,CAACokB;QAAK,CAAC,CAAC;QAEpE,IAAM3J,OAAO,YAAAvK,MAAA,CAAYuI,KAAK,CAACtY,EAAE,OAAA+P,MAAA,CAAI6R,GAAG,CAAE;QAC1C,IAAMuC,UAAU,GAAAvK,4BAAA,CAAAA,4BAAA,KACXK,aAAa,CAACpa,MAAM,CAACiZ,OAAO,EAAEiB,QAAQ,EAAE,KAAK,CAAC;UACjD/Z,EAAE,EAAEsa,OAAO;UACXza,MAAM,EAAE2jB;QAAQ,EACjB;QAED,IAAInB,cAAc;QAClB,IAAIxiB,MAAM,CAACiZ,OAAO,KAAK,SAAS,EAAE;UAChCuJ,cAAc,GAAG/H,OAAO,GAAG,UAAU;UACrC,IAAM8J,iBAAiB,GAAAxK,4BAAA,CAAAA,4BAAA,KAClBK,aAAa,CAACpa,MAAM,CAACiZ,OAAO,EAAEiB,QAAQ,EAAE,IAAI,CAAC;YAChD/Z,EAAE,EAAEsa,OAAO,GAAG,UAAU;YACxBza,MAAM,EAAE2jB;UAAQ,EACjB;UACD,IAAI,CAACza,GAAG,CAACsb,QAAQ,CAACD,iBAAiB,EAAErb,gBAAG,CAACwZ,YAAY,CAAC;QACxD;QAEA,IAAI,CAACxZ,GAAG,CACLsb,QAAQ,CAACF,UAAU,EAAEpb,gBAAG,CAACwZ,YAAY,CAAC,CACtCzY,EAAE,CAAC,OAAO,EAAEwQ,OAAO,EAAE,MAAM;UAC1BzZ,4BAAI,CAAC,iBAAiB,EAAEyX,KAAK,CAACtY,EAAE,CAAC;QACnC,CAAC,CAAC,CACD8J,EAAE,CAAC,YAAY,EAAEwQ,OAAO,EAAE,MAAM;UAC/B,IAAI,CAACvR,GAAG,CAACub,SAAS,CAAC,CAAC,CAACrmB,KAAK,CAACsmB,MAAM,GAAG,SAAS;QAC/C,CAAC,CAAC,CACDza,EAAE,CAAC,YAAY,EAAEwQ,OAAO,EAAE,MAAM;UAC/B,IAAI,CAACvR,GAAG,CAACub,SAAS,CAAC,CAAC,CAACrmB,KAAK,CAACsmB,MAAM,GAAG,EAAE;QACxC,CAAC,CAAC;QAEJ,OAAO;UAAEf,QAAQ;UAAElJ,OAAO;UAAE+H,cAAc;UAAEvJ,OAAO,EAAEjZ,MAAM,CAACiZ;QAAQ,CAAC;MACvE,CAAC,CAAC;IACJ;EAAC;IAAA7Q,GAAA;IAAAnG,KAAA,EAED,SAAAuf,YAAAmD,MAAA,EAA0B;MAAA,IAAZzN,QAAQ,GAAAyN,MAAA,CAARzN,QAAQ;MACpB,IAAA0N,KAAA,GAAiCC,6BAAI,CAAC3N,QAAQ,CAAC;QAAA4N,MAAA,GAAAjF,cAAA,CAAA+E,KAAA;QAAxCG,IAAI,GAAAD,MAAA;QAAEE,IAAI,GAAAF,MAAA;QAAEG,IAAI,GAAAH,MAAA;QAAEI,IAAI,GAAAJ,MAAA;MAC7B,OAAO,IAAItF,2BAAY,CAAC,CAACuF,IAAI,EAAEC,IAAI,CAAC,EAAE,CAACC,IAAI,EAAEC,IAAI,CAAC,CAAC;IACrD;EAAC;IAAA9c,GAAA;IAAAnG,KAAA,EAED,SAAAwf,cAAcF,IAAI,EAAE;MAClB,IAAMsB,MAAM,GAAG1W,QAAQ,CAACC,aAAa,CAAC,yBAAyB,GAAGmV,IAAI,CAAC;MACvE,IAAIsB,MAAM,EAAE;QACVA,MAAM,CAACjT,SAAS,CAACC,GAAG,CAAC,oCAAoC,CAAC;MAC5D;IACF;EAAC;IAAAzH,GAAA;IAAAnG,KAAA,EAED,SAAAyf,gBAAgBH,IAAI,EAAE;MACpB,IAAMsB,MAAM,GAAG1W,QAAQ,CAACC,aAAa,CAAC,yBAAyB,GAAGmV,IAAI,CAAC;MACvE,IAAIsB,MAAM,EAAE;QACVA,MAAM,CAACjT,SAAS,CAAC3C,MAAM,CAAC,oCAAoC,CAAC;MAC/D;IACF;EAAC;IAAA7E,GAAA;IAAAnG,KAAA,EAED,SAAA4e,YAAYsE,GAAG,EAAEze,IAAI,EAAgB;MAAA,IAAd4J,OAAO,GAAA3H,SAAA,CAAArC,MAAA,QAAAqC,SAAA,QAAAG,SAAA,GAAAH,SAAA,MAAG,CAAC,CAAC;MACjC,IAAI,CAACO,GAAG,CAACkc,SAAS,CAACD,GAAG,EAAE,CAAC7c,KAAK,EAAE+c,KAAK,KAAK;QACxC,IAAI/c,KAAK,EAAE;UACTzD,yBAAK,CAACygB,QAAQ,CAAC,OAAO,EAAE,YAAY,6BAAApV,MAAA,CAA6BiV,GAAG,GAAI7c,KAAK,CAAC;UAC9E;QACF;QACA,IAAI,CAACY,GAAG,CAACqc,QAAQ,CAAC7e,IAAI,EAAE2e,KAAK,EAAE/U,OAAO,CAAC;MACzC,CAAC,CAAC;IACJ;EAAC;EAAA,OAAA0P,cAAA;AAAA;;;;;;;;;;;;;;;;;;;;;;;;ACtXqC;AACH;AACc;AACR;AACL;AACe;AACmB;AACwB;AAC/C;AAC0B;AACvB;AACgB;AAEpE,IAAM3hB,6BAAc,GAAGiZ,uBAAK,CAAC7E,GAAG,CAAC,CAAC,CAAC8E,QAAQ;AAE3C,IAAMiO,aAAa,GAAGC,IAAI,IAAI;EAC5B,OAAO;IACLriB,IAAI,EAAE,mBAAmB;IACzB8G,QAAQ,EAAEub,IAAI,CAACvc,GAAG,CAAClK,GAAG,IAAI;MACxB,IAAM0mB,UAAU,GAAGC,uCAAY,CAAC3mB,GAAG,CAAC;MACpC0mB,UAAU,CAACvb,UAAU,CAACyb,QAAQ,GAAGC,sBAAW,CAACpT,GAAG,CAACzT,GAAG,CAAC,CAAC8mB,SAAS;MAC/D,OAAOJ,UAAU;IACnB,CAAC;EACH,CAAC;AACH,CAAC;AAAC,IAEmBK,4BAAa,gBAAAhY,0BAAA,CAChC,SAAAgY,cAAY7c,GAAG,EAAE;EAAA,IAAAc,KAAA;EAAAqD,6BAAA,OAAA0Y,aAAA;EAAA9F,6BAAA,iCAgBQ,MAAM;IAC7B,IAAI,CAAC+F,UAAU,GAAG,IAAI;IACtB,IAAI,CAACC,aAAa,GAAG,IAAIxH,qBAAM,CAAC;MAC9Bne,OAAO,EAAE4lB,qCAAa,CAAC;QAAEC,oBAAoB,EAAE,IAAI;QAAErlB,SAAS,EAAE;MAAmB,CAAC,CAAC;MACrF6K,MAAM,EAAE;IACV,CAAC,CAAC;IACF,IAAI,CAACya,WAAW,GAAG,IAAI;IACvB,IAAI,CAACC,cAAc,GAAG,IAAI5H,qBAAM,CAAC;MAC/Bne,OAAO,EAAE4lB,qCAAa,CAAC;QAAEplB,SAAS,EAAE;MAAmB,CAAC,CAAC;MACzD6K,MAAM,EAAE;IACV,CAAC,CAAC;EACJ,CAAC;EAAAsU,6BAAA,+BAEsB,MAAM;IAC3B;IACAqG,uCAAe,CAAC,sCAAsC,EAAE,EAAE,EAAE,EAAE,CAAC,CAAC3hB,IAAI,CAAC4hB,SAAS,IAAI;MAChF,IAAI,CAACrd,GAAG,CAACqc,QAAQ,CAAC,cAAc,EAAEgB,SAAS,CAAC;IAC9C,CAAC,CAAC;IAEF,IAAI,CAACrd,GAAG,CAACmb,SAAS,CAAC,IAAI,CAACmC,UAAU,EAAE;MAClCpjB,IAAI,EAAE,SAAS;MACfghB,IAAI,EAAEqC,yCAAsB;MAC5B;MACAC,SAAS,EAAE;IACb,CAAC,CAAC;IAEF,IAAIroB,6BAAc,CAACsoB,iBAAiB,EAAE;MACpC,IAAMC,YAAY,MAAA1W,MAAA,CAAM,IAAI,CAACsW,UAAU,YAAS;MAChD,IAAI,CAACtd,GAAG,CAACsb,QAAQ,CAAAzK,2BAAA,CAAAA,2BAAA,KACZ8M,yCAA0B;QAC7B7mB,MAAM,EAAE,IAAI,CAACwmB,UAAU;QACvBrmB,EAAE,EAAEymB;MAAY,EACjB,CAAC;MACF,IAAI,CAACE,MAAM,CAAC7gB,IAAI,CAAC2gB,YAAY,CAAC;IAChC;IAEA,IAAMG,UAAU,MAAA7W,MAAA,CAAM,IAAI,CAACsW,UAAU,UAAO;IAC5C,IAAI,CAACtd,GAAG,CAACsb,QAAQ,CAAAzK,2BAAA,CAAAA,2BAAA,KACZiN,uCAAwB;MAC3BhnB,MAAM,EAAE,IAAI,CAACwmB,UAAU;MACvBrmB,EAAE,EAAE4mB;IAAU,EACf,CAAC;IACF,IAAI,CAACD,MAAM,CAAC7gB,IAAI,CAAC8gB,UAAU,CAAC;IAE5B,IAAI,CAACD,MAAM,CAACziB,OAAO,CAAC4iB,SAAS,IAAI;MAC/B,IAAI,CAAC/d,GAAG,CAACe,EAAE,CAAC,OAAO,EAAEgd,SAAS,EAAE,IAAI,CAACC,sBAAsB,CAAC;MAC5D,IAAI,CAAC1d,wCAAc,CAAC,CAAC,EAAE;QACrB,IAAI,CAACN,GAAG,CAACe,EAAE,CAAC,WAAW,EAAEgd,SAAS,EAAE,IAAI,CAACE,0BAA0B,CAAC;QACpE,IAAI,CAACje,GAAG,CAACe,EAAE,CAAC,YAAY,EAAEgd,SAAS,EAAE,IAAI,CAACG,2BAA2B,CAAC;MACxE;IACF,CAAC,CAAC;EACJ,CAAC;EAAAnH,6BAAA,wBAEeoH,aAAa,IAAI;IAC/B,IAAM1Q,OAAO,GAAG0Q,aAAa,CAACnd,QAAQ,CAAC,CAAC,CAAC;IACzC,OAAOyM,OAAO,IAAI,IAAI,CAAC8O,IAAI,CAAC6B,IAAI,CAACxjB,CAAC,IAAIA,CAAC,CAAC3D,EAAE,KAAKwW,OAAO,CAACxW,EAAE,CAAC;EAC5D,CAAC;EAAA8f,6BAAA,oBAEWlhB,IAAA,IAA+B;IAAA,IAA5BC,GAAG,GAAAD,IAAA,CAAHC,GAAG;MAAEuoB,UAAU,GAAAxoB,IAAA,CAAVwoB,UAAU;MAAE9B,IAAI,GAAA1mB,IAAA,CAAJ0mB,IAAI;IAClC,IAAM+B,gBAAgB,GAAGC,mDAAwB,CAACF,UAAU,CAACG,QAAQ,CAAC;IAEtE,IAAI1oB,GAAG,CAACiB,IAAI,IAAIjB,GAAG,CAACiB,IAAI,CAACD,MAAM,EAAE;MAC/BN,mBAAS,CAACC,YAAY,CACpBX,GAAG,EACH,MAAM,EACNU,mBAAS,CAACQ,oBAAoB,CAAC;QAC7BC,EAAE,EAAEnB,GAAG,CAACmB,EAAE;QACVH,MAAM,EAAEhB,GAAG,CAACiB,IAAI,CAACD,MAAM;QACvBI,QAAQ,EAAE,UAAU;QACpBC,IAAI,EAAE,MAAM;QACZC,OAAO,EAAE,MAAM;QACfonB,QAAQ,EAAEH,UAAU,CAACG;MACvB,CAAC,CACH,CAAC;IACH;IAEA9nB,MAAM,CAACC,GAAG,CAACC,UAAU,WAAAoQ,MAAA,CACTyX,0BAAK,CAAC3oB,GAAG,CAAC,EAAAkR,MAAA,CAAGsX,gBAAgB,WAAAtX,MAAA,CAAWqX,UAAU,CAACG,QAAQ,IAAK,EAAE,GAC5E;MACE1oB,GAAG;MACHuoB,UAAU;MACV9B,IAAI;MACJmC,SAAS,EAAE;IACb,CACF,CAAC;IACD,IAAI,CAACC,eAAe,CAAC7oB,GAAG,CAAC;EAC3B,CAAC;EAAAihB,6BAAA,iCAEwBzf,CAAC,IAAI;IAC5BA,CAAC,CAAC8J,aAAa,CAACwd,eAAe,CAAC,CAAC;IACjC,IAAM9oB,GAAG,GAAG,IAAI,CAAC+oB,aAAa,CAACvnB,CAAC,CAAC;IAEjC,IAAI,CAACwnB,SAAS,CAAC;MACbhpB,GAAG;MACHymB,IAAI,EAAE,IAAI,CAACA,IAAI;MACf8B,UAAU,EAAE,IAAI,CAACA;IACnB,CAAC,CAAC;EACJ,CAAC;EAAAtH,6BAAA,qCAE4Bzf,CAAC,IAAI;IAAA,IAAAynB,iBAAA;IAChC,IAAI,CAAC/e,GAAG,CAACub,SAAS,CAAC,CAAC,CAACrmB,KAAK,CAACsmB,MAAM,GAAG,SAAS;IAC7C,IAAM1lB,GAAG,GAAG,IAAI,CAAC+oB,aAAa,CAACvnB,CAAC,CAAC;IACjC,IAAI,EAAAynB,iBAAA,OAAI,CAAC7B,WAAW,cAAA6B,iBAAA,uBAAhBA,iBAAA,CAAkB9nB,EAAE,MAAKnB,GAAG,CAACmB,EAAE,EAAE;MACnC,IAAI,CAAC+nB,kBAAkB,CAAClpB,GAAG,EAAE,IAAI,CAAC;MAClCgC,4BAAI,CAAC,YAAY,EAAEhC,GAAG,EAAEwB,CAAC,CAAC8J,aAAa,CAAC;IAC1C;EACF,CAAC;EAAA2V,6BAAA,sCAE6B,MAAM;IAClC,IAAI,CAAC/W,GAAG,CAACub,SAAS,CAAC,CAAC,CAACrmB,KAAK,CAACsmB,MAAM,GAAG,EAAE;IACtC,IAAI,CAACwD,kBAAkB,CAAC,IAAI,CAAClC,UAAU,EAAE,KAAK,CAAC;IAC/C;IACAhlB,4BAAI,CAAC,2BAA2B,CAAC;EACnC,CAAC;EAAAif,6BAAA,6BAEoB,YAA2B;IAAA,IAA1BwF,IAAI,GAAA9c,SAAA,CAAArC,MAAA,QAAAqC,SAAA,QAAAG,SAAA,GAAAH,SAAA,MAAG,EAAE;IAAA,IAAE4e,UAAU,GAAA5e,SAAA,CAAArC,MAAA,OAAAqC,SAAA,MAAAG,SAAA;IACzC9H,4BAAI,CAAC,aAAa,CAAC;IACnBgJ,KAAI,CAACyb,IAAI,GAAGA,IAAI;IAChBzb,KAAI,CAACud,UAAU,GAAGA,UAAU;IAC5Bvd,KAAI,CAACme,oBAAoB,CAAC,KAAK,CAAC;IAChCne,KAAI,CAACd,GAAG,CAACkf,SAAS,CAACpe,KAAI,CAACwc,UAAU,CAAC,CAAC6B,OAAO,CAAC7C,aAAa,CAACC,IAAI,CAAC,CAAC;IAChEzb,KAAI,CAAC8c,MAAM,CAACziB,OAAO,CAAC4iB,SAAS,IAAI;MAC/Bjd,KAAI,CAACd,GAAG,CAACwR,iBAAiB,CAACuM,SAAS,EAAE,YAAY,EAAE,SAAS,CAAC;IAChE,CAAC,CAAC;EACJ,CAAC;EAAAhH,6BAAA,gCAEuB,MAAM;IAC5Bjf,4BAAI,CAAC,aAAa,CAAC;IACnB,IAAI,CAAC6mB,eAAe,CAAC,IAAI,CAAC;IAC1B,IAAI,CAACK,kBAAkB,CAAC,IAAI,CAAClC,UAAU,EAAE,KAAK,CAAC;IAC/C,IAAI,CAACc,MAAM,CAACziB,OAAO,CAAC4iB,SAAS,IAAI;MAC/B,IAAI,CAAC/d,GAAG,CAACwR,iBAAiB,CAACuM,SAAS,EAAE,YAAY,EAAE,MAAM,CAAC;IAC7D,CAAC,CAAC;IACF,IAAI,CAACkB,oBAAoB,CAAC,IAAI,CAAC;EACjC,CAAC;EAAAlI,6BAAA,+BAEsBqI,SAAS,IAAI;IAClCC,mBAAS,CAACrf,GAAG,CAACsf,WAAW,CAACtf,GAAG,CAAClK,GAAG,IAAI;MACnC,IAAI,CAACkK,GAAG,CAACwR,iBAAiB,CAAC1b,GAAG,EAAE,YAAY,EAAEspB,SAAS,GAAG,SAAS,GAAG,MAAM,CAAC;IAC/E,CAAC,CAAC;EACJ,CAAC;EAAArI,6BAAA,6BAEoB,CAAC9f,EAAE,EAAE0T,KAAK,KAAK;IAClC,IAAI,CAAC3K,GAAG,CAACuf,eAAe,CAAC;MAAEtoB,EAAE;MAAEH,MAAM,EAAE,IAAI,CAACwmB;IAAW,CAAC,EAAE3S,KAAK,CAAC;EAClE,CAAC;EAAAoM,6BAAA,6BAEoB,CAACjhB,GAAG,EAAE0pB,SAAS,KAAK;IACvC,IAAI,IAAI,CAAC1C,UAAU,EAAE;MACnB,IAAI,CAAC2C,kBAAkB,CAAC,IAAI,CAAC3C,UAAU,CAAC7lB,EAAE,EAAE;QAAEyoB,OAAO,EAAE;MAAM,CAAC,CAAC;IACjE;IACA,IAAIF,SAAS,EAAE;MACb,IAAI,CAAC1C,UAAU,GAAGhnB,GAAG;MACrB,IAAI,CAACinB,aAAa,CAACna,SAAS,CAAC9M,GAAG,CAAC+M,MAAM,CAAC,CAACE,KAAK,CAAC,IAAI,CAAC/C,GAAG,CAAC;MACxD,IAAI,CAACyf,kBAAkB,CAAC,IAAI,CAAC3C,UAAU,CAAC7lB,EAAE,EAAE;QAAEyoB,OAAO,EAAE;MAAK,CAAC,CAAC;IAChE,CAAC,MAAM;MACL,IAAI,CAAC3C,aAAa,CAAChZ,MAAM,CAAC,CAAC;MAC3B,IAAI,CAAC+Y,UAAU,GAAG,IAAI;IACxB;EACF,CAAC;EAAA/F,6BAAA,0BAEiBjhB,GAAG,IAAI;IACvB,IAAI,IAAI,CAAConB,WAAW,KAAKpnB,GAAG,EAAE;MAC5B;IACF;IACA,IAAI,IAAI,CAAConB,WAAW,EAAE;MACpB,IAAI,CAACuC,kBAAkB,CAAC,IAAI,CAACvC,WAAW,CAACjmB,EAAE,EAAE;QAAE0oB,QAAQ,EAAE;MAAM,CAAC,CAAC;IACnE;IACA,IAAI7pB,GAAG,EAAE;MACP,IAAI,CAAConB,WAAW,GAAGpnB,GAAG;MACtB,IAAI,CAACqnB,cAAc,CAACva,SAAS,CAAC9M,GAAG,CAAC+M,MAAM,CAAC,CAACE,KAAK,CAAC,IAAI,CAAC/C,GAAG,CAAC;MACzD,IAAI,CAACyf,kBAAkB,CAAC,IAAI,CAACvC,WAAW,CAACjmB,EAAE,EAAE;QAAE0oB,QAAQ,EAAE;MAAK,CAAC,CAAC;IAClE,CAAC,MAAM;MACL,IAAI,CAACxC,cAAc,CAACpZ,MAAM,CAAC,CAAC;MAC5B,IAAI,CAACmZ,WAAW,GAAG,IAAI;IACzB;EACF,CAAC;EA9LC,IAAI,CAACld,GAAG,GAAGA,GAAG;EACd,IAAI,CAACsd,UAAU,GAAG,cAAc;EAChC,IAAI,CAACM,MAAM,GAAG,EAAE;EAEhB,IAAI,CAACgC,sBAAsB,CAAC,CAAC;EAC7B,IAAI,CAACC,oBAAoB,CAAC,CAAC;EAE3Bxf,8BAAM,CAAC,sBAAsB,EAAE,IAAI,CAACyf,kBAAkB,CAAC;EACvDzf,8BAAM,CAAC,yBAAyB,EAAE,IAAI,CAAC0f,qBAAqB,CAAC;EAC7D1f,8BAAM,CAAC,2BAA2B,EAAE,IAAI,CAAC2e,kBAAkB,CAAC;EAC5D3e,8BAAM,CAAC,uBAAuB,EAAE,IAAI,CAACse,eAAe,CAAC;EACrDte,8BAAM,CAAC,oBAAoB,EAAE,IAAI,CAACye,SAAS,CAAC;EAC5Cze,8BAAM,CAAC,cAAc,EAAE,MAAM,IAAI,CAACse,eAAe,CAAC,IAAI,CAAC,CAAC;AAC1D,CAAC;;;;;;;;;;;;;oDCxCH,qJAAArmB,wBAAA,YAAAA,oBAAA,WAAAhB,CAAA,SAAAiB,CAAA,EAAAjB,CAAA,OAAAkB,CAAA,GAAAC,MAAA,CAAAC,SAAA,EAAAC,CAAA,GAAAH,CAAA,CAAAI,cAAA,EAAAC,CAAA,GAAAJ,MAAA,CAAAK,cAAA,cAAAP,CAAA,EAAAjB,CAAA,EAAAkB,CAAA,IAAAD,CAAA,CAAAjB,CAAA,IAAAkB,CAAA,CAAAO,KAAA,KAAAC,CAAA,wBAAAC,MAAA,GAAAA,MAAA,OAAAC,CAAA,GAAAF,CAAA,CAAAG,QAAA,kBAAAC,CAAA,GAAAJ,CAAA,CAAAK,aAAA,uBAAAC,CAAA,GAAAN,CAAA,CAAAO,WAAA,8BAAAC,OAAAjB,CAAA,EAAAjB,CAAA,EAAAkB,CAAA,WAAAC,MAAA,CAAAK,cAAA,CAAAP,CAAA,EAAAjB,CAAA,IAAAyB,KAAA,EAAAP,CAAA,EAAAiB,UAAA,MAAAC,YAAA,MAAAC,QAAA,SAAApB,CAAA,CAAAjB,CAAA,WAAAkC,MAAA,mBAAAjB,CAAA,IAAAiB,MAAA,YAAAA,OAAAjB,CAAA,EAAAjB,CAAA,EAAAkB,CAAA,WAAAD,CAAA,CAAAjB,CAAA,IAAAkB,CAAA,gBAAAoB,KAAArB,CAAA,EAAAjB,CAAA,EAAAkB,CAAA,EAAAG,CAAA,QAAAK,CAAA,GAAA1B,CAAA,IAAAA,CAAA,CAAAoB,SAAA,YAAAmB,SAAA,GAAAvC,CAAA,GAAAuC,SAAA,EAAAX,CAAA,GAAAT,MAAA,CAAAqB,MAAA,CAAAd,CAAA,CAAAN,SAAA,GAAAU,CAAA,OAAAW,OAAA,CAAApB,CAAA,gBAAAE,CAAA,CAAAK,CAAA,eAAAH,KAAA,EAAAiB,gBAAA,CAAAzB,CAAA,EAAAC,CAAA,EAAAY,CAAA,MAAAF,CAAA,aAAAe,SAAA1B,CAAA,EAAAjB,CAAA,EAAAkB,CAAA,mBAAA0B,IAAA,YAAAC,GAAA,EAAA5B,CAAA,CAAA6B,IAAA,CAAA9C,CAAA,EAAAkB,CAAA,cAAAD,CAAA,aAAA2B,IAAA,WAAAC,GAAA,EAAA5B,CAAA,QAAAjB,CAAA,CAAAsC,IAAA,GAAAA,IAAA,MAAAS,CAAA,qBAAAC,CAAA,qBAAAC,CAAA,gBAAAC,CAAA,gBAAAC,CAAA,gBAAAZ,UAAA,cAAAa,kBAAA,cAAAC,2BAAA,SAAAC,CAAA,OAAApB,MAAA,CAAAoB,CAAA,EAAA1B,CAAA,qCAAA2B,CAAA,GAAApC,MAAA,CAAAqC,cAAA,EAAAC,CAAA,GAAAF,CAAA,IAAAA,CAAA,CAAAA,CAAA,CAAAG,MAAA,QAAAD,CAAA,IAAAA,CAAA,KAAAvC,CAAA,IAAAG,CAAA,CAAAyB,IAAA,CAAAW,CAAA,EAAA7B,CAAA,MAAA0B,CAAA,GAAAG,CAAA,OAAAE,CAAA,GAAAN,0BAAA,CAAAjC,SAAA,GAAAmB,SAAA,CAAAnB,SAAA,GAAAD,MAAA,CAAAqB,MAAA,CAAAc,CAAA,YAAAM,sBAAA3C,CAAA,gCAAA4C,OAAA,WAAA7D,CAAA,IAAAkC,MAAA,CAAAjB,CAAA,EAAAjB,CAAA,YAAAiB,CAAA,gBAAA6C,OAAA,CAAA9D,CAAA,EAAAiB,CAAA,sBAAA8C,cAAA9C,CAAA,EAAAjB,CAAA,aAAAgE,OAAA9C,CAAA,EAAAK,CAAA,EAAAG,CAAA,EAAAE,CAAA,QAAAE,CAAA,GAAAa,QAAA,CAAA1B,CAAA,CAAAC,CAAA,GAAAD,CAAA,EAAAM,CAAA,mBAAAO,CAAA,CAAAc,IAAA,QAAAZ,CAAA,GAAAF,CAAA,CAAAe,GAAA,EAAAE,CAAA,GAAAf,CAAA,CAAAP,KAAA,SAAAsB,CAAA,uBAAAA,CAAA,IAAA1B,CAAA,CAAAyB,IAAA,CAAAC,CAAA,eAAA/C,CAAA,CAAAiE,OAAA,CAAAlB,CAAA,CAAAmB,OAAA,EAAAC,IAAA,WAAAlD,CAAA,IAAA+C,MAAA,SAAA/C,CAAA,EAAAS,CAAA,EAAAE,CAAA,gBAAAX,CAAA,IAAA+C,MAAA,UAAA/C,CAAA,EAAAS,CAAA,EAAAE,CAAA,QAAA5B,CAAA,CAAAiE,OAAA,CAAAlB,CAAA,EAAAoB,IAAA,WAAAlD,CAAA,IAAAe,CAAA,CAAAP,KAAA,GAAAR,CAAA,EAAAS,CAAA,CAAAM,CAAA,gBAAAf,CAAA,WAAA+C,MAAA,UAAA/C,CAAA,EAAAS,CAAA,EAAAE,CAAA,SAAAA,CAAA,CAAAE,CAAA,CAAAe,GAAA,SAAA3B,CAAA,EAAAK,CAAA,oBAAAE,KAAA,WAAAA,MAAAR,CAAA,EAAAI,CAAA,aAAA+C,2BAAA,eAAApE,CAAA,WAAAA,CAAA,EAAAkB,CAAA,IAAA8C,MAAA,CAAA/C,CAAA,EAAAI,CAAA,EAAArB,CAAA,EAAAkB,CAAA,gBAAAA,CAAA,GAAAA,CAAA,GAAAA,CAAA,CAAAiD,IAAA,CAAAC,0BAAA,EAAAA,0BAAA,IAAAA,0BAAA,qBAAA1B,iBAAA1C,CAAA,EAAAkB,CAAA,EAAAG,CAAA,QAAAE,CAAA,GAAAwB,CAAA,mBAAArB,CAAA,EAAAE,CAAA,QAAAL,CAAA,KAAA0B,CAAA,YAAAoB,KAAA,sCAAA9C,CAAA,KAAA2B,CAAA,oBAAAxB,CAAA,QAAAE,CAAA,WAAAH,KAAA,EAAAR,CAAA,EAAAqD,IAAA,eAAAjD,CAAA,CAAAkD,MAAA,GAAA7C,CAAA,EAAAL,CAAA,CAAAwB,GAAA,GAAAjB,CAAA,UAAAE,CAAA,GAAAT,CAAA,CAAAmD,QAAA,MAAA1C,CAAA,QAAAE,CAAA,GAAAyC,mBAAA,CAAA3C,CAAA,EAAAT,CAAA,OAAAW,CAAA,QAAAA,CAAA,KAAAmB,CAAA,mBAAAnB,CAAA,qBAAAX,CAAA,CAAAkD,MAAA,EAAAlD,CAAA,CAAAqD,IAAA,GAAArD,CAAA,CAAAsD,KAAA,GAAAtD,CAAA,CAAAwB,GAAA,sBAAAxB,CAAA,CAAAkD,MAAA,QAAAhD,CAAA,KAAAwB,CAAA,QAAAxB,CAAA,GAAA2B,CAAA,EAAA7B,CAAA,CAAAwB,GAAA,EAAAxB,CAAA,CAAAuD,iBAAA,CAAAvD,CAAA,CAAAwB,GAAA,uBAAAxB,CAAA,CAAAkD,MAAA,IAAAlD,CAAA,CAAAwD,MAAA,WAAAxD,CAAA,CAAAwB,GAAA,GAAAtB,CAAA,GAAA0B,CAAA,MAAAK,CAAA,GAAAX,QAAA,CAAA3C,CAAA,EAAAkB,CAAA,EAAAG,CAAA,oBAAAiC,CAAA,CAAAV,IAAA,QAAArB,CAAA,GAAAF,CAAA,CAAAiD,IAAA,GAAApB,CAAA,GAAAF,CAAA,EAAAM,CAAA,CAAAT,GAAA,KAAAM,CAAA,qBAAA1B,KAAA,EAAA6B,CAAA,CAAAT,GAAA,EAAAyB,IAAA,EAAAjD,CAAA,CAAAiD,IAAA,kBAAAhB,CAAA,CAAAV,IAAA,KAAArB,CAAA,GAAA2B,CAAA,EAAA7B,CAAA,CAAAkD,MAAA,YAAAlD,CAAA,CAAAwB,GAAA,GAAAS,CAAA,CAAAT,GAAA,mBAAA4B,oBAAAzE,CAAA,EAAAkB,CAAA,QAAAG,CAAA,GAAAH,CAAA,CAAAqD,MAAA,EAAAhD,CAAA,GAAAvB,CAAA,CAAA6B,QAAA,CAAAR,CAAA,OAAAE,CAAA,KAAAN,CAAA,SAAAC,CAAA,CAAAsD,QAAA,qBAAAnD,CAAA,IAAArB,CAAA,CAAA6B,QAAA,CAAAiD,MAAA,KAAA5D,CAAA,CAAAqD,MAAA,aAAArD,CAAA,CAAA2B,GAAA,GAAA5B,CAAA,EAAAwD,mBAAA,CAAAzE,CAAA,EAAAkB,CAAA,eAAAA,CAAA,CAAAqD,MAAA,kBAAAlD,CAAA,KAAAH,CAAA,CAAAqD,MAAA,YAAArD,CAAA,CAAA2B,GAAA,OAAAkC,SAAA,uCAAA1D,CAAA,iBAAA8B,CAAA,MAAAzB,CAAA,GAAAiB,QAAA,CAAApB,CAAA,EAAAvB,CAAA,CAAA6B,QAAA,EAAAX,CAAA,CAAA2B,GAAA,mBAAAnB,CAAA,CAAAkB,IAAA,SAAA1B,CAAA,CAAAqD,MAAA,YAAArD,CAAA,CAAA2B,GAAA,GAAAnB,CAAA,CAAAmB,GAAA,EAAA3B,CAAA,CAAAsD,QAAA,SAAArB,CAAA,MAAAvB,CAAA,GAAAF,CAAA,CAAAmB,GAAA,SAAAjB,CAAA,GAAAA,CAAA,CAAA0C,IAAA,IAAApD,CAAA,CAAAlB,CAAA,CAAAgF,UAAA,IAAApD,CAAA,CAAAH,KAAA,EAAAP,CAAA,CAAA+D,IAAA,GAAAjF,CAAA,CAAAkF,OAAA,eAAAhE,CAAA,CAAAqD,MAAA,KAAArD,CAAA,CAAAqD,MAAA,WAAArD,CAAA,CAAA2B,GAAA,GAAA5B,CAAA,GAAAC,CAAA,CAAAsD,QAAA,SAAArB,CAAA,IAAAvB,CAAA,IAAAV,CAAA,CAAAqD,MAAA,YAAArD,CAAA,CAAA2B,GAAA,OAAAkC,SAAA,sCAAA7D,CAAA,CAAAsD,QAAA,SAAArB,CAAA,cAAAgC,aAAAlE,CAAA,QAAAjB,CAAA,KAAAoF,MAAA,EAAAnE,CAAA,YAAAA,CAAA,KAAAjB,CAAA,CAAAqF,QAAA,GAAApE,CAAA,WAAAA,CAAA,KAAAjB,CAAA,CAAAsF,UAAA,GAAArE,CAAA,KAAAjB,CAAA,CAAAuF,QAAA,GAAAtE,CAAA,WAAAuE,UAAA,CAAAC,IAAA,CAAAzF,CAAA,cAAA0F,cAAAzE,CAAA,QAAAjB,CAAA,GAAAiB,CAAA,CAAA0E,UAAA,QAAA3F,CAAA,CAAA4C,IAAA,oBAAA5C,CAAA,CAAA6C,GAAA,EAAA5B,CAAA,CAAA0E,UAAA,GAAA3F,CAAA,aAAAyC,QAAAxB,CAAA,SAAAuE,UAAA,MAAAJ,MAAA,aAAAnE,CAAA,CAAA4C,OAAA,CAAAsB,YAAA,cAAAS,KAAA,iBAAAlC,OAAA1D,CAAA,QAAAA,CAAA,WAAAA,CAAA,QAAAkB,CAAA,GAAAlB,CAAA,CAAA4B,CAAA,OAAAV,CAAA,SAAAA,CAAA,CAAA4B,IAAA,CAAA9C,CAAA,4BAAAA,CAAA,CAAAiF,IAAA,SAAAjF,CAAA,OAAA6F,KAAA,CAAA7F,CAAA,CAAA8F,MAAA,SAAAvE,CAAA,OAAAG,CAAA,YAAAuD,KAAA,aAAA1D,CAAA,GAAAvB,CAAA,CAAA8F,MAAA,OAAAzE,CAAA,CAAAyB,IAAA,CAAA9C,CAAA,EAAAuB,CAAA,UAAA0D,IAAA,CAAAxD,KAAA,GAAAzB,CAAA,CAAAuB,CAAA,GAAA0D,IAAA,CAAAX,IAAA,OAAAW,IAAA,SAAAA,IAAA,CAAAxD,KAAA,GAAAR,CAAA,EAAAgE,IAAA,CAAAX,IAAA,OAAAW,IAAA,YAAAvD,CAAA,CAAAuD,IAAA,GAAAvD,CAAA,gBAAAqD,SAAA,QAAA/E,CAAA,iCAAAoD,iBAAA,CAAAhC,SAAA,GAAAiC,0BAAA,EAAA9B,CAAA,CAAAoC,CAAA,mBAAAlC,KAAA,EAAA4B,0BAAA,EAAAjB,YAAA,SAAAb,CAAA,CAAA8B,0BAAA,mBAAA5B,KAAA,EAAA2B,iBAAA,EAAAhB,YAAA,SAAAgB,iBAAA,CAAA2C,WAAA,GAAA7D,MAAA,CAAAmB,0BAAA,EAAArB,CAAA,wBAAAhC,CAAA,CAAAgG,mBAAA,aAAA/E,CAAA,QAAAjB,CAAA,wBAAAiB,CAAA,IAAAA,CAAA,CAAAgF,WAAA,WAAAjG,CAAA,KAAAA,CAAA,KAAAoD,iBAAA,6BAAApD,CAAA,CAAA+F,WAAA,IAAA/F,CAAA,CAAAkG,IAAA,OAAAlG,CAAA,CAAAmG,IAAA,aAAAlF,CAAA,WAAAE,MAAA,CAAAiF,cAAA,GAAAjF,MAAA,CAAAiF,cAAA,CAAAnF,CAAA,EAAAoC,0BAAA,KAAApC,CAAA,CAAAoF,SAAA,GAAAhD,0BAAA,EAAAnB,MAAA,CAAAjB,CAAA,EAAAe,CAAA,yBAAAf,CAAA,CAAAG,SAAA,GAAAD,MAAA,CAAAqB,MAAA,CAAAmB,CAAA,GAAA1C,CAAA,KAAAjB,CAAA,CAAAsG,KAAA,aAAArF,CAAA,aAAAiD,OAAA,EAAAjD,CAAA,OAAA2C,qBAAA,CAAAG,aAAA,CAAA3C,SAAA,GAAAc,MAAA,CAAA6B,aAAA,CAAA3C,SAAA,EAAAU,CAAA,iCAAA9B,CAAA,CAAA+D,aAAA,GAAAA,aAAA,EAAA/D,CAAA,CAAAuG,KAAA,aAAAtF,CAAA,EAAAC,CAAA,EAAAG,CAAA,EAAAE,CAAA,EAAAG,CAAA,eAAAA,CAAA,KAAAA,CAAA,GAAA8E,OAAA,OAAA5E,CAAA,OAAAmC,aAAA,CAAAzB,IAAA,CAAArB,CAAA,EAAAC,CAAA,EAAAG,CAAA,EAAAE,CAAA,GAAAG,CAAA,UAAA1B,CAAA,CAAAgG,mBAAA,CAAA9E,CAAA,IAAAU,CAAA,GAAAA,CAAA,CAAAqD,IAAA,GAAAd,IAAA,WAAAlD,CAAA,WAAAA,CAAA,CAAAqD,IAAA,GAAArD,CAAA,CAAAQ,KAAA,GAAAG,CAAA,CAAAqD,IAAA,WAAArB,qBAAA,CAAAD,CAAA,GAAAzB,MAAA,CAAAyB,CAAA,EAAA3B,CAAA,gBAAAE,MAAA,CAAAyB,CAAA,EAAA/B,CAAA,iCAAAM,MAAA,CAAAyB,CAAA,6DAAA3D,CAAA,CAAAyG,IAAA,aAAAxF,CAAA,QAAAjB,CAAA,GAAAmB,MAAA,CAAAF,CAAA,GAAAC,CAAA,gBAAAG,CAAA,IAAArB,CAAA,EAAAkB,CAAA,CAAAuE,IAAA,CAAApE,CAAA,UAAAH,CAAA,CAAAwF,OAAA,aAAAzB,KAAA,WAAA/D,CAAA,CAAA4E,MAAA,SAAA7E,CAAA,GAAAC,CAAA,CAAAyF,GAAA,QAAA1F,CAAA,IAAAjB,CAAA,SAAAiF,IAAA,CAAAxD,KAAA,GAAAR,CAAA,EAAAgE,IAAA,CAAAX,IAAA,OAAAW,IAAA,WAAAA,IAAA,CAAAX,IAAA,OAAAW,IAAA,QAAAjF,CAAA,CAAA0D,MAAA,GAAAA,MAAA,EAAAjB,OAAA,CAAArB,SAAA,KAAA6E,WAAA,EAAAxD,OAAA,EAAAmD,KAAA,WAAAA,MAAA5F,CAAA,aAAA4G,IAAA,WAAA3B,IAAA,WAAAP,IAAA,QAAAC,KAAA,GAAA1D,CAAA,OAAAqD,IAAA,YAAAE,QAAA,cAAAD,MAAA,gBAAA1B,GAAA,GAAA5B,CAAA,OAAAuE,UAAA,CAAA3B,OAAA,CAAA6B,aAAA,IAAA1F,CAAA,WAAAkB,CAAA,kBAAAA,CAAA,CAAA2F,MAAA,OAAAxF,CAAA,CAAAyB,IAAA,OAAA5B,CAAA,MAAA2E,KAAA,EAAA3E,CAAA,CAAA4F,KAAA,cAAA5F,CAAA,IAAAD,CAAA,MAAA8F,IAAA,WAAAA,KAAA,SAAAzC,IAAA,WAAArD,CAAA,QAAAuE,UAAA,IAAAG,UAAA,kBAAA1E,CAAA,CAAA2B,IAAA,QAAA3B,CAAA,CAAA4B,GAAA,cAAAmE,IAAA,KAAApC,iBAAA,WAAAA,kBAAA5E,CAAA,aAAAsE,IAAA,QAAAtE,CAAA,MAAAkB,CAAA,kBAAA+F,OAAA5F,CAAA,EAAAE,CAAA,WAAAK,CAAA,CAAAgB,IAAA,YAAAhB,CAAA,CAAAiB,GAAA,GAAA7C,CAAA,EAAAkB,CAAA,CAAA+D,IAAA,GAAA5D,CAAA,EAAAE,CAAA,KAAAL,CAAA,CAAAqD,MAAA,WAAArD,CAAA,CAAA2B,GAAA,GAAA5B,CAAA,KAAAM,CAAA,aAAAA,CAAA,QAAAiE,UAAA,CAAAM,MAAA,MAAAvE,CAAA,SAAAA,CAAA,QAAAG,CAAA,QAAA8D,UAAA,CAAAjE,CAAA,GAAAK,CAAA,GAAAF,CAAA,CAAAiE,UAAA,iBAAAjE,CAAA,CAAA0D,MAAA,SAAA6B,MAAA,aAAAvF,CAAA,CAAA0D,MAAA,SAAAwB,IAAA,QAAA9E,CAAA,GAAAT,CAAA,CAAAyB,IAAA,CAAApB,CAAA,eAAAM,CAAA,GAAAX,CAAA,CAAAyB,IAAA,CAAApB,CAAA,qBAAAI,CAAA,IAAAE,CAAA,aAAA4E,IAAA,GAAAlF,CAAA,CAAA2D,QAAA,SAAA4B,MAAA,CAAAvF,CAAA,CAAA2D,QAAA,gBAAAuB,IAAA,GAAAlF,CAAA,CAAA4D,UAAA,SAAA2B,MAAA,CAAAvF,CAAA,CAAA4D,UAAA,cAAAxD,CAAA,aAAA8E,IAAA,GAAAlF,CAAA,CAAA2D,QAAA,SAAA4B,MAAA,CAAAvF,CAAA,CAAA2D,QAAA,qBAAArD,CAAA,YAAAqC,KAAA,qDAAAuC,IAAA,GAAAlF,CAAA,CAAA4D,UAAA,SAAA2B,MAAA,CAAAvF,CAAA,CAAA4D,UAAA,YAAAT,MAAA,WAAAA,OAAA5D,CAAA,EAAAjB,CAAA,aAAAkB,CAAA,QAAAsE,UAAA,CAAAM,MAAA,MAAA5E,CAAA,SAAAA,CAAA,QAAAK,CAAA,QAAAiE,UAAA,CAAAtE,CAAA,OAAAK,CAAA,CAAA6D,MAAA,SAAAwB,IAAA,IAAAvF,CAAA,CAAAyB,IAAA,CAAAvB,CAAA,wBAAAqF,IAAA,GAAArF,CAAA,CAAA+D,UAAA,QAAA5D,CAAA,GAAAH,CAAA,aAAAG,CAAA,iBAAAT,CAAA,mBAAAA,CAAA,KAAAS,CAAA,CAAA0D,MAAA,IAAApF,CAAA,IAAAA,CAAA,IAAA0B,CAAA,CAAA4D,UAAA,KAAA5D,CAAA,cAAAE,CAAA,GAAAF,CAAA,GAAAA,CAAA,CAAAiE,UAAA,cAAA/D,CAAA,CAAAgB,IAAA,GAAA3B,CAAA,EAAAW,CAAA,CAAAiB,GAAA,GAAA7C,CAAA,EAAA0B,CAAA,SAAA6C,MAAA,gBAAAU,IAAA,GAAAvD,CAAA,CAAA4D,UAAA,EAAAnC,CAAA,SAAA+D,QAAA,CAAAtF,CAAA,MAAAsF,QAAA,WAAAA,SAAAjG,CAAA,EAAAjB,CAAA,oBAAAiB,CAAA,CAAA2B,IAAA,QAAA3B,CAAA,CAAA4B,GAAA,qBAAA5B,CAAA,CAAA2B,IAAA,mBAAA3B,CAAA,CAAA2B,IAAA,QAAAqC,IAAA,GAAAhE,CAAA,CAAA4B,GAAA,gBAAA5B,CAAA,CAAA2B,IAAA,SAAAoE,IAAA,QAAAnE,GAAA,GAAA5B,CAAA,CAAA4B,GAAA,OAAA0B,MAAA,kBAAAU,IAAA,yBAAAhE,CAAA,CAAA2B,IAAA,IAAA5C,CAAA,UAAAiF,IAAA,GAAAjF,CAAA,GAAAmD,CAAA,KAAAgE,MAAA,WAAAA,OAAAlG,CAAA,aAAAjB,CAAA,QAAAwF,UAAA,CAAAM,MAAA,MAAA9F,CAAA,SAAAA,CAAA,QAAAkB,CAAA,QAAAsE,UAAA,CAAAxF,CAAA,OAAAkB,CAAA,CAAAoE,UAAA,KAAArE,CAAA,cAAAiG,QAAA,CAAAhG,CAAA,CAAAyE,UAAA,EAAAzE,CAAA,CAAAqE,QAAA,GAAAG,aAAA,CAAAxE,CAAA,GAAAiC,CAAA,OAAAiE,KAAA,WAAAC,OAAApG,CAAA,aAAAjB,CAAA,QAAAwF,UAAA,CAAAM,MAAA,MAAA9F,CAAA,SAAAA,CAAA,QAAAkB,CAAA,QAAAsE,UAAA,CAAAxF,CAAA,OAAAkB,CAAA,CAAAkE,MAAA,KAAAnE,CAAA,QAAAI,CAAA,GAAAH,CAAA,CAAAyE,UAAA,kBAAAtE,CAAA,CAAAuB,IAAA,QAAArB,CAAA,GAAAF,CAAA,CAAAwB,GAAA,EAAA6C,aAAA,CAAAxE,CAAA,YAAAK,CAAA,gBAAA8C,KAAA,8BAAAiD,aAAA,WAAAA,cAAAtH,CAAA,EAAAkB,CAAA,EAAAG,CAAA,gBAAAmD,QAAA,KAAA3C,QAAA,EAAA6B,MAAA,CAAA1D,CAAA,GAAAgF,UAAA,EAAA9D,CAAA,EAAAgE,OAAA,EAAA7D,CAAA,oBAAAkD,MAAA,UAAA1B,GAAA,GAAA5B,CAAA,GAAAkC,CAAA,OAAAnD,CAAA;AAAA,SAAAuH,yBAAAC,GAAA,EAAAvD,OAAA,EAAAwD,MAAA,EAAAC,KAAA,EAAAC,MAAA,EAAAC,GAAA,EAAA/E,GAAA,cAAAgF,IAAA,GAAAL,GAAA,CAAAI,GAAA,EAAA/E,GAAA,OAAApB,KAAA,GAAAoG,IAAA,CAAApG,KAAA,WAAAqG,KAAA,IAAAL,MAAA,CAAAK,KAAA,iBAAAD,IAAA,CAAAvD,IAAA,IAAAL,OAAA,CAAAxC,KAAA,YAAA+E,OAAA,CAAAvC,OAAA,CAAAxC,KAAA,EAAA0C,IAAA,CAAAuD,KAAA,EAAAC,MAAA;AAAA,SAAAI,uBAAAC,EAAA,6BAAAC,IAAA,SAAAC,IAAA,GAAAC,SAAA,aAAA3B,OAAA,WAAAvC,OAAA,EAAAwD,MAAA,QAAAD,GAAA,GAAAQ,EAAA,CAAAI,KAAA,CAAAH,IAAA,EAAAC,IAAA,YAAAR,MAAAjG,KAAA,IAAA8F,wBAAA,CAAAC,GAAA,EAAAvD,OAAA,EAAAwD,MAAA,EAAAC,KAAA,EAAAC,MAAA,UAAAlG,KAAA,cAAAkG,OAAAU,GAAA,IAAAd,wBAAA,CAAAC,GAAA,EAAAvD,OAAA,EAAAwD,MAAA,EAAAC,KAAA,EAAAC,MAAA,WAAAU,GAAA,KAAAX,KAAA,CAAAY,SAAA;AAAA,SAAAogB,cAAA1oB,CAAA,EAAAkB,CAAA,QAAAD,CAAA,GAAAE,MAAA,CAAAsF,IAAA,CAAAzG,CAAA,OAAAmB,MAAA,CAAAwnB,qBAAA,QAAApnB,CAAA,GAAAJ,MAAA,CAAAwnB,qBAAA,CAAA3oB,CAAA,GAAAkB,CAAA,KAAAK,CAAA,GAAAA,CAAA,CAAA6W,MAAA,WAAAlX,CAAA,WAAAC,MAAA,CAAAoR,wBAAA,CAAAvS,CAAA,EAAAkB,CAAA,EAAAiB,UAAA,OAAAlB,CAAA,CAAAwE,IAAA,CAAA2C,KAAA,CAAAnH,CAAA,EAAAM,CAAA,YAAAN,CAAA;AAAA,SAAAsY,mBAAAvZ,CAAA,aAAAkB,CAAA,MAAAA,CAAA,GAAAiH,SAAA,CAAArC,MAAA,EAAA5E,CAAA,UAAAD,CAAA,WAAAkH,SAAA,CAAAjH,CAAA,IAAAiH,SAAA,CAAAjH,CAAA,QAAAA,CAAA,OAAAwnB,aAAA,CAAAvnB,MAAA,CAAAF,CAAA,OAAA4C,OAAA,WAAA3C,CAAA,IAAAue,oBAAA,CAAAzf,CAAA,EAAAkB,CAAA,EAAAD,CAAA,CAAAC,CAAA,SAAAC,MAAA,CAAAynB,yBAAA,GAAAznB,MAAA,CAAA0nB,gBAAA,CAAA7oB,CAAA,EAAAmB,MAAA,CAAAynB,yBAAA,CAAA3nB,CAAA,KAAAynB,aAAA,CAAAvnB,MAAA,CAAAF,CAAA,GAAA4C,OAAA,WAAA3C,CAAA,IAAAC,MAAA,CAAAK,cAAA,CAAAxB,CAAA,EAAAkB,CAAA,EAAAC,MAAA,CAAAoR,wBAAA,CAAAtR,CAAA,EAAAC,CAAA,iBAAAlB,CAAA;AAAA,SAAAyf,qBAAAqJ,GAAA,EAAAlhB,GAAA,EAAAnG,KAAA,IAAAmG,GAAA,GAAAsJ,mBAAA,CAAAtJ,GAAA,OAAAA,GAAA,IAAAkhB,GAAA,IAAA3nB,MAAA,CAAAK,cAAA,CAAAsnB,GAAA,EAAAlhB,GAAA,IAAAnG,KAAA,EAAAA,KAAA,EAAAU,UAAA,QAAAC,YAAA,QAAAC,QAAA,oBAAAymB,GAAA,CAAAlhB,GAAA,IAAAnG,KAAA,WAAAqnB,GAAA;AAAA,SAAA5X,oBAAAjQ,CAAA,QAAAS,CAAA,GAAA2P,iBAAA,CAAApQ,CAAA,uCAAAS,CAAA,GAAAA,CAAA,GAAA4P,MAAA,CAAA5P,CAAA;AAAA,SAAA2P,kBAAApQ,CAAA,EAAAC,CAAA,2BAAAD,CAAA,KAAAA,CAAA,SAAAA,CAAA,MAAAjB,CAAA,GAAAiB,CAAA,CAAAU,MAAA,CAAA4P,WAAA,kBAAAvR,CAAA,QAAA0B,CAAA,GAAA1B,CAAA,CAAA8C,IAAA,CAAA7B,CAAA,EAAAC,CAAA,uCAAAQ,CAAA,SAAAA,CAAA,YAAAqD,SAAA,yEAAA7D,CAAA,GAAAoQ,MAAA,GAAAE,MAAA,EAAAvQ,CAAA;AADkF;AAC/C;AACiC;AACP;AACL;AACqB;AACrC;AACL;AACmC;AAChC;AACS;AACF;AACe;AACnB;AACQ;AACa;AACZ;AACC;AACZ;AACc;AACf;AACsB;AAE5D,IAAM+V,aAAO,GAAGF,uBAAK,CAAC7E,GAAG,CAAC,CAAC,CAACgF,MAAM,CAACD,OAAO;AAC1C,IAAM+R,mBAAmB,GAAG,GAAG;AAC/B,IAAMC,oBAAoB,GAAG,IAAI;AACjC,IAAIC,mBAAmB;AAEvB,SAASC,KAAKA,CAAA,EAAG;EACf,IAAI,CAACC,aAAa,GAAG,IAAI;EACzB,IAAI,CAACC,KAAK,GAAG,IAAI9qB,SAAQ,CAAC,CAAC;EAC3B,IAAI,CAAC+qB,aAAa,GAAG,IAAI;AAC3B;AAEA,IAAMC,UAAU,GAAG9qB,GAAG,KAAK;EACzB8P,MAAM,EAAE9P,GAAG,CAACkY,QAAQ,CAACpI,MAAM;EAC3Bib,IAAI,EAAEC,gCAAW,CAAChrB,GAAG,CAAC;EACtBirB,MAAM,EAAEjrB,GAAG,CAACkY,QAAQ,CAAC2N;AACvB,CAAC,CAAC;AAEF,IAAMqF,eAAe,GAAG,SAAlBA,eAAeA,CAAA,EAAe;EAClC,IAAMC,IAAI,GAAGhe,QAAQ,CAACC,aAAa,CAAC,qBAAqB,CAAC;EAC1D,IAAI+d,IAAI,EAAE;IACRA,IAAI,CAACva,SAAS,CAACC,GAAG,CAAC,SAAS,CAAC;EAC/B;AACF,CAAC;AAED,IAAMua,eAAe,GAAG,SAAlBA,eAAeA,CAAA,EAAe;EAClC,IAAMD,IAAI,GAAGhe,QAAQ,CAACC,aAAa,CAAC,qBAAqB,CAAC;EAC1D,IAAI+d,IAAI,EAAE;IACRA,IAAI,CAACva,SAAS,CAAC3C,MAAM,CAAC,SAAS,CAAC;EAClC;AACF,CAAC;AAEDyc,KAAK,CAAC9nB,SAAS,CAACyoB,iBAAiB,GAAG,UAAAtrB,IAAA,EAAkC;EAAA,IAAtBurB,YAAY,GAAAvrB,IAAA,CAAZurB,YAAY;IAAEzF,IAAI,GAAA9lB,IAAA,CAAJ8lB,IAAI;EAChE,IAAIA,IAAI,EAAE;IACR,IAAI;MACF,OAAO;QAAEoF,MAAM,EAAEM,iCAAe,CAAC1F,IAAI;MAAE,CAAC;IAC1C,CAAC,CAAC,OAAOrkB,CAAC,EAAE;MACVgqB,OAAO,CAACliB,KAAK,CAAC9H,CAAC,CAAC;IAClB;EACF;EACA,IAAIZ,MAAM,CAAC6qB,UAAU,EAAE;IACrB,OAAOX,UAAU,CAAClqB,MAAM,CAAC6qB,UAAU,CAAC;EACtC;EACA,IAAIH,YAAY,EAAE;IAChB,OAAO;MACLP,IAAI,EAAEO,YAAY,CAACP,IAAI;MACvBjb,MAAM,EAAE,CAACwb,YAAY,CAACxK,GAAG,EAAEwK,YAAY,CAACvK,GAAG;IAC7C,CAAC;EACH;EACA,IAAM2K,YAAY,GAAGC,gCAAe,CAAC,CAAC;EACtC,IAAID,YAAY,EAAE;IAChB,OAAO;MACLX,IAAI,EAAEW,YAAY,CAACX,IAAI;MACvBjb,MAAM,EAAE,CAAC4b,YAAY,CAAC5K,GAAG,EAAE4K,YAAY,CAAC3K,GAAG;IAC7C,CAAC;EACH;EACA,IAAIngB,MAAM,CAACgrB,WAAW,EAAE;IACtB,OAAO;MACLX,MAAM,EAAErqB,MAAM,CAACgrB,WAAW;MAC1BC,gBAAgB,EAAE;QAChBC,OAAO,EAAE;MACX;IACF,CAAC;EACH;EACA,OAAO;IACLf,IAAI,EAAEgB,gBAAS,CAAChB,IAAI;IACpBjb,MAAM,EAAE,CAACic,gBAAS,CAACjc,MAAM,CAACgR,GAAG,EAAEiL,gBAAS,CAACjc,MAAM,CAACiR,GAAG;EACrD,CAAC;AACH,CAAC;AAED2J,KAAK,CAAC9nB,SAAS,CAACopB,UAAU,GAAG,UAAAtgB,KAAA,EAAkC;EAAA,IAAtB4f,YAAY,GAAA5f,KAAA,CAAZ4f,YAAY;IAAEzF,IAAI,GAAAna,KAAA,CAAJma,IAAI;EACzDjlB,MAAM,CAACqrB,KAAK,CAACD,UAAU,GAAGE,IAAI,CAACC,GAAG,CAAC,CAAC;EACpC,IAAMC,eAAe,GAAGxrB,MAAM,CAACyrB,QAAQ,CAACD,eAAe;EACvDE,uCAAgB,IAAApb,MAAA,CACXsH,aAAO,8DAAAtH,MAAA,CAA2Dkb,eAAe,UACpF9iB,KAAK,IAAI;IACP,IAAIA,KAAK,EAAE;MACTzD,yBAAK,CAAC0mB,IAAI,CAAC,OAAO,EAAE,kBAAkB,EAAE,kCAAkC,EAAEjjB,KAAK,CAAC;IACpF;EACF,CAAC,EACD,UAAW,IACb,CAAC;EAED,IAAI,CAACkjB,EAAE,GAAG,IAAI1O,kBAAG,CAAA/C,kBAAA;IACf0R,kBAAkB,EAAE,KAAK;IACzBlb,SAAS,EAAE,iBAAiB;IAC5BnS,KAAK,EAAE4Z,QAAQ,CAAC,CAAC;IACjB0T,IAAI,EAAE,KAAK;IACXZ,OAAO,EAAE,EAAE;IACXa,wBAAMA;EAAA,GACH,IAAI,CAACtB,iBAAiB,CAAC;IAAEC,YAAY;IAAEzF;EAAK,CAAC,CAAC,CAClD,CAAC;EACF;EACA,IAAI,CAAC2G,EAAE,CAACI,UAAU,GAAG,IAAI,CAACJ,EAAE,CAACI,UAAU,KAAK,MAAM9iB,SAAS,CAAC;EAC5D,IAAI,CAAC0iB,EAAE,CAACI,UAAU,CAACC,gDAAqB,CAAC,CAAC,CAAC;EAE3C,IAAI,CAACjC,KAAK,CAAC3gB,IAAI,CAAC,IAAI,CAACuiB,EAAE,CAAC;EACxB5rB,MAAM,CAACsJ,GAAG,GAAG,IAAI;EAEjB,IAAM4iB,iBAAiB,GAAG,CACxB,aAAa,EACb,aAAa,EACb,aAAa,EACb,aAAa,EACb,+BAA+B,EAC/B,+BAA+B,CAChC;EACD,IAAI,CAAC9F,UAAU,GAAG,IAAI;;EAEtB;EACA;EACA,IAAI,CAAC+F,mBAAmB,GAAG,GAAG;EAC9B,IAAI,CAACC,sBAAsB,GAAG,CAAC;EAC/B,IAAI,CAACC,qBAAqB,GAAG,CAAC;EAC9B,IAAI,CAACT,EAAE,CAACvhB,EAAE,CAAC,UAAU,EAAE,MAAM;IAC3B,IAAMiiB,SAAS,GAAGhB,IAAI,CAACC,GAAG,CAAC,CAAC;IAC5B;IACA,IAAIe,SAAS,GAAG,IAAI,CAACD,qBAAqB,GAAG,IAAI,CAACF,mBAAmB,EAAE;MACrE,IAAI,CAACC,sBAAsB,GAAGE,SAAS;IACzC;IACA,IAAI,CAACD,qBAAqB,GAAGC,SAAS;EACxC,CAAC,CAAC;EAEF,IAAI,CAACV,EAAE,CAACvhB,EAAE,CAAC,MAAM,EAAE,MAAM;IACvBjJ,4BAAI,CAAC,sBAAsB,CAAC;IAC5B,IAAI,CAACmrB,YAAY,CAAC,CAAC;IACnB,IAAInM,8BAAc,CAAC,IAAI,CAACwL,EAAE,CAAC;IAC3B,IAAIzF,4BAAa,CAAC,IAAI,CAACyF,EAAE,CAAC;IAE1B,IAAI,CAACA,EAAE,CAACrV,UAAU,CAAC,IAAIpB,oCAAe,CAAC,CAAC,EAAE,cAAc,CAAC;IACzD,IAAI,CAACyW,EAAE,CAACrV,UAAU,CAAC,IAAI/I,oBAAoB,CAAC,CAAC,EAAE,WAAW,CAAC;IAE3D,IAAI,CAAC5D,wCAAc,CAAC,CAAC,EAAE;MACrBsiB,iBAAiB,CAACznB,OAAO,CAAC+nB,gBAAgB,IAAI;QAC5CC,uCAAgB,CAAC,IAAI,CAACb,EAAE,EAAEY,gBAAgB,CAAC;QAE3C,IAAI,CAACZ,EAAE,CAACvhB,EAAE,CAAC,YAAY,EAAEmiB,gBAAgB,EAAE5rB,CAAC,IAAI;UAC9C,IAAIA,CAAC,CAAC0J,QAAQ,CAAC5D,MAAM,GAAG,CAAC,EAAE;YACzB,IAAI,CAAC0f,UAAU,GAAGxlB,CAAC,CAAC0J,QAAQ,CAAC,CAAC,CAAC;YAC/B,IAAI,CAACshB,EAAE,CAAC/C,eAAe,CAAC,IAAI,CAACzC,UAAU,EAAE;cAAEsG,KAAK,EAAE;YAAK,CAAC,CAAC;UAC3D;UACA,IAAI,CAACd,EAAE,CAAC/G,SAAS,CAAC,CAAC,CAACrmB,KAAK,CAACsmB,MAAM,GAAG,SAAS;QAC9C,CAAC,CAAC;QAEF,IAAI,CAAC8G,EAAE,CAACvhB,EAAE,CAAC,YAAY,EAAEmiB,gBAAgB,EAAE,MAAM;UAC/C,IAAI,IAAI,CAACpG,UAAU,EAAE;YACnB,IAAI,CAACwF,EAAE,CAAC/C,eAAe,CAAC,IAAI,CAACzC,UAAU,EAAE;cAAEsG,KAAK,EAAE;YAAM,CAAC,CAAC;YAC1D,IAAI,CAACtG,UAAU,GAAG,IAAI;UACxB;UACA,IAAI,CAACwF,EAAE,CAAC/G,SAAS,CAAC,CAAC,CAACrmB,KAAK,CAACsmB,MAAM,GAAG,EAAE;QACvC,CAAC,CAAC;QAEF,IAAI,CAACkF,KAAK,CAAC9f,WAAW,CAACsiB,gBAAgB,CAAC;MAC1C,CAAC,CAAC;IACJ;;IAEA;IACA;IACA,IAAI,CAACG,iBAAiB,GAAG,IAAI;IAE7B,IAAI,CAACf,EAAE,CAACvhB,EAAE,CAAC,OAAO,EAAEzJ,CAAC,IAAI;MACvBQ,4BAAI,CAAC,sBAAsB,CAAC;MAC5B,IAAIR,CAAC,CAAC8J,aAAa,CAACkiB,YAAY,EAAE;QAChC;MACF;MACA;MACA5iB,YAAY,CAAC,IAAI,CAAC2iB,iBAAiB,CAAC;MACpC;MACA,IAAI/rB,CAAC,CAAC8J,aAAa,CAACmiB,MAAM,IAAI,CAAC,EAAE;QAC/B;MACF;MACA,IAAMhH,IAAI,GAAG,IAAI,CAAC+F,EAAE,CAACkB,qBAAqB,CAAClsB,CAAC,CAACmsB,KAAK,EAAE;QAAE7F,MAAM,EAAEgF;MAAkB,CAAC,CAAC;MAClF;MACA;MACA,IAAIrG,IAAI,CAAC,CAAC,CAAC,EAAE;QACX,IAAI,CAACmH,UAAU,CAACpsB,CAAC,CAACqb,MAAM,EAAE4J,IAAI,CAAC,CAAC,CAAC,CAAC;QAClC;MACF;MACA,IAAI,CAAC8G,iBAAiB,GAAG1iB,UAAU,CAAC,MAAM;QACxC;QACA,IAAIqhB,IAAI,CAACC,GAAG,CAAC,CAAC,GAAG,IAAI,CAACa,sBAAsB,GAAG,IAAI,CAACD,mBAAmB,EAAE;UACvE;QACF;QACA,IAAI,CAACa,UAAU,CAACpsB,CAAC,CAACqb,MAAM,EAAE,IAAI,CAAC;MACjC,CAAC,EAAE,IAAI,CAACkQ,mBAAmB,CAAC;IAC9B,CAAC,CAAC;;IAEF;IACA;IACA;IACA;IACA;IACA;;IAEA,IAAIc,gBAAgB,GAAG,IAAI;IAC3B,IAAI,CAACrB,EAAE,CAACvhB,EAAE,CAAC,YAAY,EAAEzJ,CAAC,IAAI;MAC5BQ,4BAAI,CAAC,sBAAsB,CAAC;MAC5B,IAAIR,CAAC,CAAC8J,aAAa,CAACwiB,OAAO,CAACxmB,MAAM,KAAK,CAAC,EAAE;QACxCumB,gBAAgB,GAAGhjB,UAAU,CAAC,MAAM;UAClC,IAAI,CAAC+iB,UAAU,CAACpsB,CAAC,CAACqb,MAAM,EAAE,IAAI,EAAE;YAAEkR,SAAS,EAAE;UAAK,CAAC,CAAC;UACpD,IAAI,CAACC,yBAAyB,GAAG,IAAI;QACvC,CAAC,EAAEzD,mBAAmB,CAAC;MACzB;IACF,CAAC,CAAC;IAEF,IAAM0D,yBAAyB,GAAG,CAChC,UAAU;IACV;IACA;IACA;IACA,WAAW,EACX,aAAa,EACb,aAAa,EACb,SAAS,EACT,cAAc,EACd,eAAe,EACf,YAAY,CACb;IAED,IAAMC,eAAe,GAAG1sB,CAAC,IAAI;MAC3B,IAAIqsB,gBAAgB,EAAE;QACpBjjB,YAAY,CAACijB,gBAAgB,CAAC;QAC9BA,gBAAgB,GAAG,IAAI;MACzB;MAEA,IAAI,IAAI,CAACG,yBAAyB,EAAE;QAClCxsB,CAAC,CAAC8J,aAAa,CAAC7J,cAAc,CAAC,CAAC;QAChC,IAAI,CAACusB,yBAAyB,GAAG,KAAK;MACxC;IACF,CAAC;IAEDC,yBAAyB,CAAC5oB,OAAO,CAACwG,KAAK,IAAI;MACzC,IAAI,CAAC2gB,EAAE,CAACvhB,EAAE,CAACY,KAAK,EAAEqiB,eAAe,CAAC;IACpC,CAAC,CAAC;IAEF,IAAI,CAAC1B,EAAE,CAACvhB,EAAE,CAAC,WAAW,EAAE,MAAM;MAC5BjJ,4BAAI,CAAC,sBAAsB,CAAC;IAC9B,CAAC,CAAC;IACF,IAAI,CAACwqB,EAAE,CAACvhB,EAAE,CAAC,YAAY,EAAE,MAAM;MAC7BjJ,4BAAI,CAAC,sBAAsB,CAAC;IAC9B,CAAC,CAAC;IAEF,IAAI,CAACwqB,EAAE,CAACvhB,EAAE,CAAC,SAAS,EAAE,MAAM;MAC1B,IAAAkjB,kBAAA,GAAqB,IAAI,CAAC3B,EAAE,CAAC4B,SAAS,CAAC,CAAC;QAAhCtN,GAAG,GAAAqN,kBAAA,CAAHrN,GAAG;QAAEC,GAAG,GAAAoN,kBAAA,CAAHpN,GAAG;MAChB,IAAMgK,IAAI,GAAG,IAAI,CAACyB,EAAE,CAAC6B,OAAO,CAAC,CAAC;MAC9BC,gCAAe,CAAC;QAAExN,GAAG;QAAEC,GAAG;QAAEgK;MAAK,CAAC,CAAC;MACnCnqB,MAAM,CAACC,GAAG,CAAC0tB,UAAU,CAAC,IAAI,CAACC,eAAe,CAAC,CAAC,CAAC;MAC7CxsB,4BAAI,CAAC,aAAa,CAAC;IACrB,CAAC,CAAC;IAEFpB,MAAM,CAAC6tB,eAAe,GAAGhqB,CAAC,IAAIA,CAAC,CAAC,CAAC;IACjCzC,4BAAI,CAAC,YAAY,CAAC;EACpB,CAAC,CAAC;EAEFuI,8BAAM,CAAC,SAAS,EAAE,CAAC4gB,IAAI,EAAEuD,YAAY,KAAK;IACxC,IAAI,CAACC,MAAM,CAACxD,IAAI,EAAEuD,YAAY,CAAC;EACjC,CAAC,CAAC;EAEFnkB,8BAAM,CAAC,oBAAoB,EAAE,CAACvK,GAAG,EAAEsR,OAAO,KAAK;IAC7C,IAAI,CAACsd,qBAAqB,CAAC5uB,GAAG,EAAEsR,OAAO,CAAC;EAC1C,CAAC,CAAC;EAEF/G,8BAAM,CAAC,mBAAmB,EAAEvK,GAAG,IAAI;IACjC,IAAI,CAAC6uB,SAAS,CAAC7uB,GAAG,CAAC;EACrB,CAAC,CAAC;EAEFuK,8BAAM,CAAC,cAAc,EAAE,MAAM;IAC3B,IAAI,CAACukB,WAAW,CAAC,CAAC;EACpB,CAAC,CAAC;EAEFvkB,8BAAM,CAAC,eAAe,EAAE,MAAM;IAC5B,IAAI,CAACwkB,YAAY,CAAC,CAAC;EACrB,CAAC,CAAC;EAEFxkB,8BAAM,CAAC,kBAAkB,EAAE,MAAM;IAC/B,IAAI,CAACykB,eAAe,CAAC,CAAC;EACxB,CAAC,CAAC;EAEFzkB,8BAAM,CAAC,uBAAuB,EAAE0kB,MAAM,IAAI;IACxC,IAAI,CAACC,kBAAkB,CAACD,MAAM,CAAC;EACjC,CAAC,CAAC;EAEF1kB,8BAAM,CAAC,gCAAgC,EAAE0kB,MAAM,IAAI;IACjD,IAAI,CAACE,2BAA2B,CAACF,MAAM,CAAC;EAC1C,CAAC,CAAC;EAEF1kB,8BAAM,CAAC,sCAAsC,EAAE6kB,OAAO,IAAI;IACxD,IAAI,CAACC,sBAAsB,CAAC,4BAA4B,EAAED,OAAO,CAAC;EACpE,CAAC,CAAC;EAEF7kB,8BAAM,CAAC,oCAAoC,EAAE6kB,OAAO,IAAI;IACtD,IAAI,CAACC,sBAAsB,CAAC,qBAAqB,EAAED,OAAO,CAAC;EAC7D,CAAC,CAAC;EAEF7kB,8BAAM,CAAC,qBAAqB,EAAE,MAAM;IAClC,IAAI,CAACiiB,EAAE,CAACI,UAAU,CAACC,gDAAqB,CAAC,CAAC,CAAC;EAC7C,CAAC,CAAC;AACJ,CAAC;AAEDnC,KAAK,CAAC9nB,SAAS,CAACgrB,UAAU,GAAG,UAAU/Q,MAAM,EAAEyS,cAAc,EAA8B;EAAA,IAAAtV,KAAA,GAAArQ,SAAA,CAAArC,MAAA,QAAAqC,SAAA,QAAAG,SAAA,GAAAH,SAAA,MAAJ,CAAC,CAAC;IAAA4lB,eAAA,GAAAvV,KAAA,CAAxB+T,SAAS;IAATA,SAAS,GAAAwB,eAAA,cAAG,KAAK,GAAAA,eAAA;EAChF;EACA,IAAMvvB,GAAG,GAAGsvB,cAAc,GAAG,IAAI7X,cAAM,CAAC6X,cAAc,CAAC,GAAG,IAAI7K,oBAAS,CAAC5H,MAAM,CAAC;EAC/E,IAAI1P,QAAQ,CAACC,aAAa,CAAC,kBAAkB,CAAC,EAAE;IAC9C;IACApL,4BAAI,CAAC,qBAAqB,EAAEhC,GAAG,CAAC;EAClC,CAAC,MAAM,IAAIwK,wCAAc,CAAC,CAAC,IAAI,CAAC8kB,cAAc,IAAI,CAACvB,SAAS,EAAE;IAC5D;IACA;EACF,CAAC,MAAM;IACL;IACAntB,MAAM,CAACC,GAAG,CAACC,UAAU,WAAAoQ,MAAA,CAAWyX,0BAAK,CAAC3oB,GAAG,CAAC,GAAI;MAAEA;IAAI,CAAC,CAAC;EACxD;AACF,CAAC;AAED0qB,KAAK,CAAC9nB,SAAS,CAACmsB,YAAY,GAAG,YAAY;EACzC,IAAI,CAAClE,aAAa,GAAG,IAAI,CAAC2D,eAAe,CAAC,CAAC;AAC7C,CAAC;AAED9D,KAAK,CAAC9nB,SAAS,CAACosB,eAAe,GAAG,YAAY;EAC5C,IAAI,IAAI,CAACnE,aAAa,EAAE;IACtB,IAAA2E,aAAA,GAA2BC,iCAAY,CAAC,IAAI,CAAC5E,aAAa,CAAC;MAAnDE,IAAI,GAAAyE,aAAA,CAAJzE,IAAI;MAAEhK,GAAG,GAAAyO,aAAA,CAAHzO,GAAG;MAAED,GAAG,GAAA0O,aAAA,CAAH1O,GAAG;IACtB,IAAM4O,UAAU,GAAG;MACjB5f,MAAM,EAAE,CAACgR,GAAG,EAAEC,GAAG,CAAC;MAClBgK,IAAI;MACJ4E,OAAO,EAAE,IAAI;MACbC,WAAW,EAAE;IACf,CAAC;IACD,IAAI,CAACpD,EAAE,CAAC3c,KAAK,CAAC6f,UAAU,CAAC;EAC3B;AACF,CAAC;AAED,IAAMG,KAAK,GAAGA,CAACC,GAAG,EAAEC,GAAG,EAAE9sB,KAAK,KAAK+N,IAAI,CAAC8e,GAAG,CAACC,GAAG,EAAE/e,IAAI,CAAC+e,GAAG,CAACD,GAAG,EAAE7sB,KAAK,CAAC,CAAC;AAEtEynB,KAAK,CAAC9nB,SAAS,CAACotB,wBAAwB,GAAG,UAAUnK,IAAI,EAAE;EACzD,IAAMoK,QAAQ,GAAG,IAAI,CAACzD,EAAE,CAAC0D,SAAS,CAAC,CAAC;EAEpC,IAAMva,KAAK,GAAGsa,QAAQ,CAAC5P,OAAO,CAAC,CAAC,GAAG4P,QAAQ,CAAC3P,OAAO,CAAC,CAAC;EACrD,IAAM6P,MAAM,GAAGF,QAAQ,CAAC/P,QAAQ,CAAC,CAAC,GAAG+P,QAAQ,CAAC9P,QAAQ,CAAC,CAAC;;EAExD;EACA8P,QAAQ,CAACG,YAAY,CACnB,IAAIpY,qBAAM,CAACiY,QAAQ,CAAC5P,OAAO,CAAC,CAAC,GAAG1K,KAAK,EAAEka,KAAK,CAAC,CAAC,EAAE,EAAE,EAAE,EAAEI,QAAQ,CAAC/P,QAAQ,CAAC,CAAC,GAAGiQ,MAAM,CAAC,CAAC,CAACrsB,IAAI,CAAC,CAC5F,CAAC;EACDmsB,QAAQ,CAACI,YAAY,CACnB,IAAIrY,qBAAM,CAACiY,QAAQ,CAAC3P,OAAO,CAAC,CAAC,GAAG3K,KAAK,EAAEka,KAAK,CAAC,CAAC,EAAE,EAAE,EAAE,EAAEI,QAAQ,CAAC9P,QAAQ,CAAC,CAAC,GAAGgQ,MAAM,CAAC,CAAC,CAACrsB,IAAI,CAAC,CAC5F,CAAC;;EAED;EACA,OACEmsB,QAAQ,CAACK,QAAQ,CAACzK,IAAI,CAAC0K,YAAY,CAAC,CAAC,CAAC,IACtCN,QAAQ,CAACK,QAAQ,CAACzK,IAAI,CAAC2K,YAAY,CAAC,CAAC,CAAC,IACtCP,QAAQ,CAACK,QAAQ,CAACzK,IAAI,CAAC4K,YAAY,CAAC,CAAC,CAAC,IACtCR,QAAQ,CAACK,QAAQ,CAACzK,IAAI,CAAC6K,YAAY,CAAC,CAAC,CAAC;AAE1C,CAAC;AAEDhG,KAAK,CAAC9nB,SAAS,CAAC+tB,OAAO,GAAG,UAAU9K,IAAI,EAAE6I,YAAY,EAAE;EACtD;EACA,IAAI7I,IAAI,YAAYzG,KAAK,EAAE;IACzByG,IAAI,GAAG,IAAIrF,2BAAY,CAACqF,IAAI,CAAC;EAC/B;;EAEA;EACA;EACA,IAAM8J,OAAO,GAAGjB,YAAY,IAAK,IAAI,CAAClC,EAAE,CAAC6B,OAAO,CAAC,CAAC,GAAG,EAAE,IAAI,IAAI,CAAC2B,wBAAwB,CAACnK,IAAI,CAAE;EAC/F,IAAI,CAAC2G,EAAE,CAACoE,SAAS,CAAC/K,IAAI,EAAE;IAAE8J;EAAQ,CAAC,CAAC;AACtC,CAAC;;AAED;AACAjF,KAAK,CAAC9nB,SAAS,CAAC+rB,MAAM,GAAG,UAAUxD,IAAI,EAAEuD,YAAY,EAAE;EACrD;EACA,IAAIvD,IAAI,YAAY3K,2BAAY,IAAIpB,KAAK,CAACC,OAAO,CAAC8L,IAAI,CAAC,EAAE;IACvD,IAAI,CAACwF,OAAO,CAACxF,IAAI,EAAEuD,YAAY,CAAC;EAClC,CAAC,MAAM;IACL;IACA,IAAIvD,IAAI,CAACtF,IAAI,EAAE;MACb;MACA,IAAI,CAAC8K,OAAO,CAACxF,IAAI,CAACtF,IAAI,EAAE6I,YAAY,CAAC;IACvC,CAAC,MAAM;MACL;MACA,IAAMgB,UAAU,GAAG;QACjB5f,MAAM,EAAEqb,IAAI,CAACpe,MAAM;QACnBge,IAAI,EAAEC,gCAAW,CAACG,IAAI,CAAC;QACvByE,WAAW,EAAE,GAAG;QAChBD,OAAO,EAAE;MACX,CAAC;MAED,IAAIjB,YAAY,IAAK,IAAI,CAAClC,EAAE,CAAC6B,OAAO,CAAC,CAAC,GAAG,EAAE,IAAI,IAAI,CAACwC,aAAa,CAAC1F,IAAI,CAAE,EAAE;QACxEuE,UAAU,CAACC,OAAO,GAAG,IAAI;MAC3B;MACA,IAAI,CAACnD,EAAE,CAAC3c,KAAK,CAAC6f,UAAU,CAAC;IAC3B;EACF;AACF,CAAC;AAEDhF,KAAK,CAAC9nB,SAAS,CAACgsB,qBAAqB,GAAG,UAAU5uB,GAAG,EAAEsR,OAAO,EAAE;EAC9D,IAAItR,GAAG,CAAC6lB,IAAI,EAAE;IACZ,IAAI,CAAC8K,OAAO,CAAC3wB,GAAG,CAAC6lB,IAAI,CAAC;IACtB;EACF;EACA,IAAMiL,QAAQ,GAAGtmB,wCAAc,CAAC,CAAC;EACjC,IAAI,CAAC8G,OAAO,CAACsX,SAAS,EAAE;IACtB,IAAMmI,eAAe,GAAGC,4CAAiB,CAAC,IAAI,CAACxE,EAAE,CAAC/P,OAAO,CAACzc,GAAG,CAAC+M,MAAM,CAAC,EAAE;MAAE+jB;IAAS,CAAC,CAAC;IACpF,IAAI,IAAI,CAACD,aAAa,CAAC7wB,GAAG,CAAC,IAAI,CAAC+wB,eAAe,EAAE;MAC/C;IACF;EACF;EACA,IAAI,CAACvE,EAAE,CAAC3c,KAAK,CAAC;IACZC,MAAM,EAAE9P,GAAG,CAAC+M,MAAM;IAClBge,IAAI,EAAEC,gCAAW,CAAChrB,GAAG,CAAC;IACtBixB,WAAW,EAAE;EACf,CAAC,CAAC;AACJ,CAAC;AAEDvG,KAAK,CAAC9nB,SAAS,CAACisB,SAAS,GAAG,UAAU7uB,GAAG,EAAE;EACzC,IAAMsB,OAAO,GAAG4vB,wCAAgB,CAAC,CAAC;EAClC5vB,OAAO,CAACqe,OAAO,GAAG,UAAUne,CAAC,EAAE;IAC7B;IACAA,CAAC,CAACsnB,eAAe,CAAC,CAAC;EACrB,CAAC;EAED,IAAI,IAAI,CAAC6B,aAAa,KAAK,IAAI,EAAE;IAC/B,IAAI,CAACA,aAAa,CAAC1c,MAAM,CAAC,CAAC;EAC7B;EAEA,IAAM4V,MAAM,GAAG,IAAIpE,qBAAM,CAAC;IAAEne,OAAO;IAAEqL,MAAM,EAAE,QAAQ;IAAED,MAAM,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC;EAAE,CAAC,CAAC,CACtEI,SAAS,CAAC9M,GAAG,CAAC+M,MAAM,CAAC,CACrBE,KAAK,CAAC,IAAI,CAACuf,EAAE,CAAC;EACjB,IAAI,CAAC7B,aAAa,GAAG9G,MAAM;EAC3B,OAAOA,MAAM;AACf,CAAC;AAED6G,KAAK,CAAC9nB,SAAS,CAACksB,WAAW,gBAAAvlB,sBAAA,eAAA/G,wBAAA,GAAAmF,IAAA,CAAG,SAAA4D,QAAA;EAAA,OAAA/I,wBAAA,GAAAsB,IAAA,UAAA0H,SAAAC,QAAA;IAAA,kBAAAA,QAAA,CAAArD,IAAA,GAAAqD,QAAA,CAAAhF,IAAA;MAAA;QAC5B,IAAI,IAAI,CAACkkB,aAAa,KAAK,IAAI,EAAE;UAC/B,IAAI,CAACA,aAAa,CAAC1c,MAAM,CAAC,CAAC;UAC3B,IAAI,CAAC0c,aAAa,GAAG,IAAI;QAC3B;MAAC;MAAA;QAAA,OAAAlf,QAAA,CAAAlD,IAAA;IAAA;EAAA,GAAAgD,OAAA;AAAA,CACF;AAEDmf,KAAK,CAAC9nB,SAAS,CAACiuB,aAAa,GAAG,UAAU7wB,GAAG,EAAE;EAC7C,OAAO,IAAI,CAACwsB,EAAE,CAAC0D,SAAS,CAAC,CAAC,CAACI,QAAQ,CAAC,IAAItY,qBAAM,CAAChY,GAAG,CAAC+M,MAAM,CAAC+T,GAAG,EAAE9gB,GAAG,CAAC+M,MAAM,CAACgU,GAAG,CAAC,CAAC;AACjF,CAAC;AAED2J,KAAK,CAAC9nB,SAAS,CAAC4rB,eAAe,GAAG,YAAY;EAC5C,IAAA2C,mBAAA,GAAqB,IAAI,CAAC3E,EAAE,CAAC4B,SAAS,CAAC,CAAC;IAAhCrN,GAAG,GAAAoQ,mBAAA,CAAHpQ,GAAG;IAAED,GAAG,GAAAqQ,mBAAA,CAAHrQ,GAAG;EAChB,OAAOsQ,+BAAU,CAAC,IAAI,CAAC5E,EAAE,CAAC6B,OAAO,CAAC,CAAC,EAAEtN,GAAG,EAAED,GAAG,CAAC;AAChD,CAAC;AAED4J,KAAK,CAAC9nB,SAAS,CAACyuB,eAAe,GAAG,UAAU3E,IAAI,EAAgB;EAAA,IAAdpb,OAAO,GAAA3H,SAAA,CAAArC,MAAA,QAAAqC,SAAA,QAAAG,SAAA,GAAAH,SAAA,MAAG,CAAC,CAAC;EAC5D,IAAM2nB,GAAG,GAAG7B,iCAAY,CAAC/C,IAAI,CAAC;EAC9B,IAAI,CAAC4E,GAAG,EAAE;IACR;EACF;EACA,IAAQvG,IAAI,GAAeuG,GAAG,CAAtBvG,IAAI;IAAEhK,GAAG,GAAUuQ,GAAG,CAAhBvQ,GAAG;IAAED,GAAG,GAAKwQ,GAAG,CAAXxQ,GAAG;EACtB,IAAI,CAAC0L,EAAE,CAAC3c,KAAK,CAAAkL,kBAAA;IAAGgQ,IAAI;IAAEjb,MAAM,EAAE,CAACgR,GAAG,EAAEC,GAAG;EAAC,GAAKzP,OAAO,CAAE,CAAC;AACzD,CAAC;AAEDoZ,KAAK,CAAC9nB,SAAS,CAACuqB,YAAY,GAAG,YAAY;EACzCvsB,MAAM,CAAC2wB,YAAY,GAAG,MAAM;IAC1B,IAAI,CAACF,eAAe,CAACzwB,MAAM,CAACkY,QAAQ,CAAC4T,IAAI,EAAE;MAAEiD,OAAO,EAAE;IAAM,CAAC,CAAC;EAChE,CAAC;AACH,CAAC;AAEDjF,KAAK,CAAC9nB,SAAS,CAAC4uB,kBAAkB,GAAG,UAAUC,QAAQ,EAAExC,MAAM,EAAE;EAC/D,IAAM9D,IAAI,GAAGhe,QAAQ,CAACC,aAAa,CAACqkB,QAAQ,CAAC;EAC7C,IAAItG,IAAI,EAAE;IACRA,IAAI,CAAC/rB,KAAK,CAACsR,SAAS,iBAAAQ,MAAA,CAAiB,CAAC+d,MAAM,QAAK;EACnD;AACF,CAAC;AAEDvE,KAAK,CAAC9nB,SAAS,CAACssB,kBAAkB,GAAG,YAAsB;EAAA,IAAZD,MAAM,GAAAtlB,SAAA,CAAArC,MAAA,QAAAqC,SAAA,QAAAG,SAAA,GAAAH,SAAA,MAAG,CAAC;EACvD,IAAI,CAACa,wCAAc,CAAC,CAAC,IAAIykB,MAAM,GAAG,CAAC,EAAE;IACnC;EACF;EACA,IAAMyC,UAAU,GAAG,CACjB,yCAAyC,EACzC,4BAA4B,EAC5B,qBAAqB,CACtB;EACDA,UAAU,CAACrsB,OAAO,CAACssB,SAAS,IAAI;IAC9B,IAAI,CAACH,kBAAkB,CAACG,SAAS,EAAE1C,MAAM,CAAC;EAC5C,CAAC,CAAC;AACJ,CAAC;AAEDvE,KAAK,CAAC9nB,SAAS,CAACusB,2BAA2B,GAAG,YAAsB;EAAA,IAAZF,MAAM,GAAAtlB,SAAA,CAAArC,MAAA,QAAAqC,SAAA,QAAAG,SAAA,GAAAH,SAAA,MAAG,CAAC;EAChE,IAAI,CAACa,wCAAc,CAAC,CAAC,IAAIykB,MAAM,GAAG,CAAC,EAAE;IACnC;EACF;EACA,IAAI,CAACuC,kBAAkB,CAAC,4BAA4B,EAAEvC,MAAM,CAAC;AAC/D,CAAC;AAEDvE,KAAK,CAAC9nB,SAAS,CAACysB,sBAAsB,GAAG,UAAUoC,QAAQ,EAAErC,OAAO,EAAE;EACpE,IAAI,CAAC5kB,wCAAc,CAAC,CAAC,EAAE;IACrB;EACF;EACA,IAAM2gB,IAAI,GAAGhe,QAAQ,CAACC,aAAa,CAACqkB,QAAQ,CAAC;EAC7C,IAAItG,IAAI,EAAE;IACR,IAAIiE,OAAO,EAAE;MACXjE,IAAI,CAACva,SAAS,CAAC3C,MAAM,CAAC,QAAQ,CAAC;IACjC,CAAC,MAAM;MACLkd,IAAI,CAACva,SAAS,CAACC,GAAG,CAAC,QAAQ,CAAC;IAC9B;EACF;AACF,CAAC;AAEDtG,8BAAM,CAAC,sBAAsB,EAAE,MAAM;EACnC;EACA6gB,eAAe,CAAC,CAAC;EACjBxgB,YAAY,CAAC6f,mBAAmB,CAAC;;EAEjC;EACAA,mBAAmB,GAAG5f,UAAU,CAAC,MAAM;IACrCqgB,eAAe,CAAC,CAAC;EACnB,CAAC,EAAEV,oBAAoB,CAAC;AAC1B,CAAC,CAAC;AAEaE,gFAAK,E","file":"map-6ef148c9bfc81baf343f.bundle.js","sourcesContent":["\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.setPoiHoverStyle = exports.FILTERED_POIS_LABEL_STYLES = exports.FILTERED_POIS_PIN_STYLES = void 0;\nvar colors_1 = require(\"src/libs/colors\");\nexports.FILTERED_POIS_PIN_STYLES = {\n    type: 'symbol',\n    layout: {\n        'icon-image': ['concat', 'pin-', ['get', 'iconName']],\n        'icon-allow-overlap': true,\n        'icon-ignore-placement': false,\n        'icon-padding': 0,\n        'icon-anchor': 'bottom',\n    },\n    paint: {\n        'icon-opacity': [\n            'case',\n            ['==', ['feature-state', 'selected'], true],\n            0,\n            ['==', ['feature-state', 'hovered'], true],\n            0,\n            1,\n        ],\n    },\n};\nexports.FILTERED_POIS_LABEL_STYLES = {\n    type: 'symbol',\n    layout: {\n        'text-font': ['Noto Sans Bold'],\n        'text-size': 10,\n        'text-field': ['get', 'name'],\n        'text-allow-overlap': false,\n        'text-ignore-placement': false,\n        'text-optional': true,\n        'text-variable-anchor': ['top', 'bottom-left', 'bottom-right'],\n        'text-offset': [1.5, 0.5],\n        'text-justify': 'auto',\n    },\n    paint: {\n        'text-color': ['case', ['==', ['feature-state', 'selected'], true], colors_1.RED_DARKER, colors_1.GREY_BLACK],\n        'text-halo-color': 'white',\n        'text-halo-width': 1,\n        'text-translate': [0, -2],\n    },\n};\nvar setPoiHoverStyle = function (map, layer) {\n    if (!map.getPaintProperty) {\n        // @MAPBOX: This method isn't implemented by the Mapbox-GL mock\n        return;\n    }\n    var textColorProperty = map.getPaintProperty(layer, 'text-color');\n    map.setPaintProperty(layer, 'text-color', ['case', ['to-boolean', ['feature-state', 'hover']], colors_1.ACTION_BLUE_BASE, textColorProperty], { validate: false });\n};\nexports.setPoiHoverStyle = setPoiHoverStyle;\n","module.exports = function configure(style, mapStyleConfig, lang) {\n  return JSON.parse(style\n    .replace(/\\{locale\\}/g, lang)\n    .replace('\"{tileserver_base}\"', mapStyleConfig.baseMapUrl)\n    .replace('\"{tileserver_poi}\"', mapStyleConfig.poiMapUrl)\n    .replace('{spriteserver}', mapStyleConfig.spritesUrl)\n    .replace('{fontserver}', mapStyleConfig.fontsUrl)\n  )\n}\n","\"use strict\";\n/* global _ */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar defaultLocale = {\n    'GeolocateControl.FindMyLocation': _('My location', 'mapbox'),\n};\nexports.default = defaultLocale;\n","import React from 'react';\nimport PoiItem from './PoiItem';\nimport { fire } from 'src/libs/customEvents';\nimport ActionButtons from '../panel/poi/ActionButtons';\nimport Telemetry from '../libs/telemetry';\nimport { useConfig, useFavorites } from '../hooks';\n\nconst PoiPopup = ({ poi }) => {\n  const { isInFavorites, removeFromFavorites, addToFavorites } = useFavorites();\n  const isDirectionActive = useConfig('direction').enabled;\n\n  const openDirection = () => {\n    Telemetry.sendPoiEvent(poi, 'itinerary');\n    window.app.navigateTo('/routes/', { poi });\n  };\n\n  const onClickPhoneNumber = () => {\n    const source = poi.meta && poi.meta.source;\n    if (source) {\n      Telemetry.sendPoiEvent(\n        poi,\n        'phone',\n        Telemetry.buildInteractionData({\n          id: poi.id,\n          source,\n          template: 'single',\n          zone: 'detail',\n          element: 'phone',\n        })\n      );\n    }\n  };\n\n  const toggleStorePoi = e => {\n    e?.preventDefault();\n    const isFavorite = isInFavorites(poi);\n    Telemetry.sendPoiEvent(poi, 'favorite', { stored: !isFavorite });\n    if (isFavorite) {\n      removeFromFavorites(poi);\n    } else {\n      addToFavorites(poi);\n    }\n  };\n\n  return (\n    <div\n      className=\"poi_popup\"\n      onMouseEnter={() => {\n        fire('stop_close_popup_timeout');\n      }}\n      onMouseLeave={() => {\n        fire('close_popup');\n      }}\n    >\n      <div className=\"u-mb-s\">\n        <PoiItem poi={poi} withOpeningHours withImage inList />\n      </div>\n      <ActionButtons\n        poi={poi}\n        isDirectionActive={isDirectionActive}\n        openDirection={openDirection}\n        onClickPhoneNumber={onClickPhoneNumber}\n        isPoiInFavorite={isInFavorites(poi)}\n        toggleStorePoi={toggleStorePoi}\n      />\n    </div>\n  );\n};\n\nexport default PoiPopup;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport { Popup } from 'maplibre-gl';\nimport ApiPoi from './poi/idunn_poi';\nimport { isMobileDevice } from 'src/libs/device';\nimport ReactPoiPopup from 'src/components/PoiPopup';\nimport { fire, listen } from 'src/libs/customEvents';\n\nconst WAIT_BEFORE_DISPLAY = 350;\nconst WAIT_BEFORE_CLOSE = 350;\n\nfunction PoiPopup() {\n  return undefined;\n}\n\nPoiPopup.prototype.init = function (map) {\n  this.map = map;\n  this.popupHandle = null;\n  this.timeOutHandler = null;\n  this.activePoiId = null;\n  this.closeTimeoutHandler = null;\n\n  listen('open_popup', (poi, e) => {\n    if (isMobileDevice() || isTouchEvent(e)) {\n      return;\n    }\n    this.createPJPopup(poi, e);\n    fire('stop_close_popup_timeout');\n  });\n  listen('close_popup', () => this.close());\n  listen('clean_marker', () => {\n    this.close();\n    this.activePoiId = null;\n  });\n\n  listen('stop_close_popup_timeout', () => clearTimeout(this.closeTimeoutHandler));\n  listen('start_close_popup_timeout', () => {\n    clearTimeout(this.closeTimeoutHandler);\n    this.closeTimeoutHandler = setTimeout(() => {\n      fire('close_popup');\n    }, WAIT_BEFORE_CLOSE);\n  });\n};\n\nPoiPopup.prototype.addListener = function (layer) {\n  this.map.on('mouseenter', layer, e => {\n    if (isMobileDevice() || isTouchEvent(e)) {\n      return;\n    }\n    this.timeOutHandler = setTimeout(() => {\n      const poi = e.features[0];\n      if (this.activePoiId === poi.properties.global_id) {\n        return;\n      }\n      this.createOSMPopup(poi, e.originalEvent);\n    }, WAIT_BEFORE_DISPLAY);\n  });\n\n  this.map.on('click', () => {\n    this.close();\n  });\n\n  this.map.on('mouseleave', layer, async () => {\n    clearTimeout(this.timeOutHandler);\n    fire('start_close_popup_timeout');\n  });\n};\n\nPoiPopup.prototype.createOSMPopup = async function (layerPoi, event) {\n  const poi = await ApiPoi.poiApiLoad(\n    { id: layerPoi.properties.global_id, qwant_id: layerPoi.properties.qwant_id },\n    { simple: true }\n  );\n  if (poi) {\n    this.showPopup(poi, event);\n  }\n};\n\nPoiPopup.prototype.createPJPopup = function (poi, event) {\n  if (poi) {\n    this.showPopup(poi, event);\n  }\n};\n\nPoiPopup.prototype.showPopup = function (poi, event) {\n  this.close();\n\n  const popupOptions = {\n    className: 'poi_popup__container',\n    closeButton: false,\n    maxWidth: 'none',\n    offset: 18, //px,\n    anchor: this.getPopupAnchor(event),\n  };\n\n  this.popupHandle = new Popup(popupOptions)\n    .setLngLat(poi.latLon)\n    .setHTML('<div class=\"poi_popup__wrapper\"/></div>')\n    .addTo(this.map);\n\n  const popupWrapper = document.querySelector('.poi_popup__wrapper');\n  if (popupWrapper) {\n    ReactDOM.render(<ReactPoiPopup poi={poi} />, popupWrapper);\n  }\n};\n\nPoiPopup.prototype.getPopupAnchor = function (event) {\n  const VERTICAL_OFFSET = 250;\n  const HORIZONTAL_OFFSET = 300;\n  const canvasWidth = window.innerWidth;\n  const anchorFragments = [];\n\n  if (event) {\n    if (event.clientY > VERTICAL_OFFSET) {\n      anchorFragments.push('bottom');\n    } else {\n      anchorFragments.push('top');\n    }\n\n    if (event.clientX < canvasWidth - HORIZONTAL_OFFSET) {\n      anchorFragments.push('left');\n    } else {\n      anchorFragments.push('right');\n    }\n  } else {\n    anchorFragments.push('bottom');\n    anchorFragments.push('left');\n  }\n\n  return anchorFragments.join('-');\n};\n\nPoiPopup.prototype.close = function () {\n  if (this.popupHandle) {\n    fire('stop_close_popup_timeout');\n    const popupWrapper = document.querySelector('.poi_popup__wrapper');\n    if (popupWrapper) {\n      ReactDOM.unmountComponentAtNode(popupWrapper);\n    }\n    this.popupHandle.remove();\n    this.popupHandle = null;\n  }\n};\n\n/* private */\nfunction isTouchEvent(event) {\n  if (event && event.originalEvent && event.originalEvent.sourceCapabilities) {\n    return event.originalEvent.sourceCapabilities.firesTouchEvents === true;\n  }\n  return false;\n}\n\nexport default PoiPopup;\n","export default class MobileCompassControl {\n  constructor() {\n    this._container = document.createElement('div');\n    const compassClass = 'map_control_group__button__compass--mobile';\n    this._compass = this._createButton(compassClass, 'Reset North', () => {\n      this._resetNorthAndTilt();\n    });\n\n    const compassIndicatorClass = 'map_control__compass__icon map_control__compass__icon--mobile';\n    this._compassIndicator = this._createIcon(compassIndicatorClass);\n    this._compass.appendChild(this._compassIndicator);\n  }\n\n  onAdd(map) {\n    this._map = map;\n    this._container.className = 'map_control_group';\n    this._container.textContent = '';\n    this._container.appendChild(this._compass);\n    const _pitchAndRotateCompassArrow = this._pitchAndRotateCompassArrow.bind(this);\n\n    _pitchAndRotateCompassArrow();\n\n    this._map.on('rotate', _pitchAndRotateCompassArrow);\n    this._map.on('pitch', _pitchAndRotateCompassArrow);\n\n    return this._container;\n  }\n\n  onRemove() {\n    this._container.parentNode.removeChild(this._container);\n    this._map = undefined;\n  }\n\n  _geolocate() {\n    navigator.geolocation.getCurrentPosition(\n      position => {\n        this._map.flyTo({ center: [position.coords.longitude, position.coords.latitude] });\n      },\n      () => undefined,\n      { maximumAge: 10000 }\n    );\n  }\n\n  _createButton(className, ariaLabel, fn) {\n    const a = document.createElement('button');\n    a.setAttribute('class', className);\n    a.setAttribute('aria-label', ariaLabel);\n    a.addEventListener('click', fn);\n    this._container.appendChild(a);\n    return a;\n  }\n\n  _createIcon(className) {\n    const a = document.createElement('span');\n    a.setAttribute('class', className);\n    return a;\n  }\n\n  _resetNorthAndTilt() {\n    this._map.easeTo({ pitch: 0, bearing: 0 });\n  }\n\n  _pitchAndRotateCompassArrow() {\n    if (this._map.getPitch() === 0 && this._map.transform.angle === 0) {\n      this._compass.classList.add('compass-origin');\n    } else {\n      this._compass.classList.remove('compass-origin');\n    }\n    const scale = 1 - this._map.getPitch() / 110;\n    const rotation = this._map.transform.angle * (180 / Math.PI);\n    this._compassIndicator.style.transform = `scale(1, ${scale}) rotate(${rotation}deg)`;\n  }\n}\n","import { ScaleControl } from 'maplibre-gl';\n\n/**\n * Override default control to pass a container\n * in constructor and register a onReady cb\n */\nexport default class ExtendedScaleControl extends ScaleControl {\n  constructor(options, container) {\n    super(options);\n    this.parentContainer = container;\n  }\n\n  onAdd(map) {\n    this._map = map;\n    this._container = document.createElement('div');\n    this._container.className = 'maplibregl-ctrl maplibregl-ctrl-scale map_control__scale';\n\n    this.parentContainer.appendChild(this._container);\n\n    this._map.on('move', this._onMove);\n    super._onMove();\n\n    return this.parentContainer;\n  }\n}\n","import { AttributionControl } from 'maplibre-gl';\n\n/**\n * Override default control to pass a container\n * in constructor and register a onReady cb\n */\nexport default class ExtendedAttributionControl extends AttributionControl {\n  constructor(options, container) {\n    super(options);\n    this.parentContainer = container;\n  }\n\n  onAdd(map) {\n    const container = super.onAdd(map);\n    if (container) {\n      this.parentContainer.appendChild(container);\n    }\n    return this.parentContainer;\n  }\n}\n","import ReactDOMServer from 'react-dom/server';\n\nexport default reactElement => ReactDOMServer.renderToStaticMarkup(reactElement);\n","import React from 'react';\nimport * as Geolocation from '../libs/geolocation';\nimport Telemetry from '../libs/telemetry';\nimport { openPendingGeolocateModal } from 'src/modals/GeolocationModal';\nimport * as store from 'src/adapters/store';\nimport renderStaticReact from 'src/libs/renderStaticReact';\nimport { IconGeoloc } from 'src/components/ui/icons';\nimport { isMobileDevice } from 'src/libs/device';\n\nimport { GeolocateControl } from 'maplibre-gl';\n\n/**\n * Override default GeolocateControl\n */\n\nexport default class ExtendedGeolocateControl extends GeolocateControl {\n  constructor(options, container) {\n    super(options);\n    this._container = container;\n    this.on('trackuserlocationstart', () => {\n      Telemetry.addOnce(Telemetry.LOCALISE_TRIGGER);\n    });\n  }\n\n  onAdd(map) {\n    this._map = map;\n    this._setupUI();\n    return this._container;\n  }\n\n  onReady(cb) {\n    this._onReady = cb;\n  }\n\n  async trigger() {\n    const state = await Geolocation.getGeolocationPermission();\n    if (\n      state === Geolocation.geolocationPermissions.PROMPT &&\n      !store.get('has_geolocate_modal_opened_once')\n    ) {\n      await openPendingGeolocateModal();\n      store.set('has_geolocate_modal_opened_once', true);\n    }\n    super.trigger();\n  }\n\n  _setupUI(supported) {\n    super._setupUI(supported);\n    if (this._geolocateButton?.firstChild) {\n      this._geolocateButton.firstChild.innerHTML = renderStaticReact(\n        <IconGeoloc fill=\"currentColor\" width={isMobileDevice() ? 24 : 16} />\n      );\n    }\n    this._onReady();\n  }\n\n  _onError(error) {\n    Geolocation.handleError(error);\n    super._onError(error);\n    // MapboxGL implementation disables the button after an error,\n    // but we won't the user to always have feedback with relevant links\n    // so override this behavior\n    this._geolocateButton.disabled = false;\n  }\n}\n","import React from 'react';\nimport ExtendedScaleControl from './extended_scale_control';\nimport ExtendedAttributionControl from './extended_attribution_control';\nimport GeolocControl from './extended_geolocate_control';\nimport Telemetry from 'src/libs/telemetry';\nimport { listen, unListen } from '../libs/customEvents';\nimport renderStaticReact from 'src/libs/renderStaticReact';\nimport { IconPlus, IconMinus } from 'src/components/ui/icons';\n\nexport default class ExtendedControl {\n  constructor() {\n    this._container = document.createElement('div');\n    this.topButtonGroup = document.createElement('div');\n    this.bottomButtonGroup = document.createElement('div');\n\n    // Store a callback to trigger when direction shortcut is clicked.\n    // if no callback is registered, then the default action will be executed\n    // (navigate to /routes)\n    this.directionShortcutCallback = null;\n    listen('set_direction_shortcut_callback', cb => (this.directionShortcutCallback = cb));\n\n    this._zoomInButton = this._createButton(\n      'map_control_group__button__zoom map-button--zoomIn',\n      'Zoom +',\n      () => {\n        Telemetry.add(Telemetry.MAP_ZOOM_IN);\n        this._map.zoomIn();\n      }\n    );\n    this._zoomInButton.innerHTML = renderStaticReact(<IconPlus fill=\"currentColor\" width={16} />);\n\n    this._zoomOutButton = this._createButton(\n      'map_control_group__button__zoom map-button--zoomOut',\n      'Zoom -',\n      () => {\n        Telemetry.add(Telemetry.MAP_ZOOM_OUT);\n        this._map.zoomOut();\n      }\n    );\n    this._zoomOutButton.innerHTML = renderStaticReact(<IconMinus fill=\"currentColor\" width={16} />);\n\n    const compassClass = 'map_control_group__button__compass';\n    this._compass = this._createButton(compassClass, 'Reset North', () => {\n      this._resetNorthAndTilt();\n    });\n    this._direction = this._createButton('direction_shortcut hidden', 'direction', () => {\n      Telemetry.add(Telemetry.MAP_ITINERARY);\n      this.directionShortcutCallback\n        ? this.directionShortcutCallback()\n        : window.app.navigateTo('/routes'); // default action, if no cb has been set\n    });\n\n    this._compassIndicator = this._createIcon('map_control__compass__icon');\n    this._compass.appendChild(this._compassIndicator);\n  }\n\n  onAdd(map) {\n    this._map = map;\n    this.topButtonGroup.className = 'map_control_group';\n    this.topButtonGroup.textContent = '';\n    this.bottomButtonGroup.className = 'map_control_group map_bottom_button_group maplibregl-ctrl';\n    this.bottomButtonGroup.textContent = '';\n\n    const geolocControl = new GeolocControl(\n      {\n        positionOptions: {\n          enableHighAccuracy: true,\n        },\n        trackUserLocation: true,\n        showAccuracyCircle: false,\n      },\n      this.bottomButtonGroup\n    );\n\n    this.topButtonGroup.appendChild(this._compass);\n    this.topButtonGroup.appendChild(this._direction);\n\n    geolocControl.onReady(() => {\n      this.bottomButtonGroup.appendChild(this._zoomInButton);\n      this.bottomButtonGroup.appendChild(this._zoomOutButton);\n    });\n\n    this._map.addControl(geolocControl);\n\n    const _pitchAndRotateCompassArrow = this._pitchAndRotateCompassArrow.bind(this);\n\n    _pitchAndRotateCompassArrow();\n\n    this._map.on('rotate', _pitchAndRotateCompassArrow);\n    this._map.on('pitch', _pitchAndRotateCompassArrow);\n\n    this.scaleAttributionContainer = document.createElement('div');\n    this.scaleAttributionContainer.className = 'map_control__scale_attribute_container';\n    this._container.appendChild(this.scaleAttributionContainer);\n\n    const extendedScaleControl = new ExtendedScaleControl(\n      {\n        unit: 'metric',\n      },\n      this.scaleAttributionContainer\n    );\n\n    const extendedAttributionControl = new ExtendedAttributionControl(\n      {},\n      this.scaleAttributionContainer\n    );\n    this._container.appendChild(this.topButtonGroup);\n    this._container.appendChild(this.bottomButtonGroup);\n\n    this._container.appendChild(this.scaleAttributionContainer);\n    this._map.addControl(extendedScaleControl, 'bottom-right');\n    this._map.addControl(extendedAttributionControl, 'bottom-right');\n    return this._container;\n  }\n\n  onRemove() {\n    this._container.parentNode.removeChild(this._container);\n    this._map = undefined;\n    unListen('set_direction_shortcut_callback');\n  }\n\n  _createButton(className, ariaLabel, fn) {\n    const a = document.createElement('button');\n    a.setAttribute('class', className);\n    a.setAttribute('aria-label', ariaLabel);\n    a.setAttribute('title', ariaLabel);\n    a.addEventListener('click', fn);\n    return a;\n  }\n\n  _createIcon(className) {\n    const a = document.createElement('span');\n    a.setAttribute('class', className);\n    return a;\n  }\n\n  _resetNorthAndTilt() {\n    this._map.easeTo({ pitch: 0, bearing: 0 });\n  }\n\n  _pitchAndRotateCompassArrow() {\n    if (this._map.getPitch() === 0 && this._map.transform.angle === 0) {\n      this._compass.classList.add('compass-origin');\n    } else {\n      this._compass.classList.remove('compass-origin');\n    }\n    const scale = 1 - this._map.getPitch() / 110;\n    const rotation = this._map.transform.angle * (180 / Math.PI);\n    this._compassIndicator.style.transform = `scale(1, ${scale}) rotate(${rotation}deg)`;\n  }\n}\n","import { LngLat } from 'maplibre-gl';\nimport Poi, { POI_TYPE } from './poi';\n\nexport default class MapPoi extends Poi {\n  constructor(feature) {\n    const {\n      global_id,\n      ['class']: className,\n      subclass: subClassName,\n      name,\n      qwant_id,\n    } = feature.properties;\n    const ll = LngLat.convert(feature.geometry.coordinates);\n    super(global_id || feature.id, qwant_id, name, POI_TYPE, ll, className, subClassName);\n  }\n}\n","import nconf from '@qwant/nconf-getter';\nimport configure from '@qwant/mapbox_style_configure';\nimport URI from '@qwant/uri';\nimport qwantStyle from '@qwant/qwant-basic-gl-style/style.json';\n\nconst mapStyleConfig = nconf.get().mapStyle;\nconst baseUrl = nconf.get().system.baseUrl;\n\nfunction sceneConfig() {\n  return Object.assign(mapStyleConfig, {\n    spritesUrl: URI.toAbsoluteUrl(location.origin, baseUrl, mapStyleConfig.spritesUrl),\n    fontsUrl: URI.toAbsoluteUrl(location.origin, baseUrl, mapStyleConfig.fontsUrl),\n  });\n}\n\nexport default function getStyle() {\n  return configure(JSON.stringify(qwantStyle), sceneConfig(), window.getBaseLang().code);\n}\n","import React from 'react';\nimport { getTransportTypeIcon, formatDistance, formatDuration } from 'src/libs/route_utils';\nimport VehicleIcon from '../VehicleIcon';\n\nconst PublicTransportIcon = ({ mode }) => (\n  <div\n    className={`publicTransportLabelItem roadmapIcon roadmapIcon--${getTransportTypeIcon({\n      mode,\n    })}`}\n  />\n);\n\nconst PublicTransportStepIcons = ({ route }) => {\n  const nonWalkLegs = route.legs.filter(leg => leg.mode !== 'WALK');\n\n  if (nonWalkLegs.length <= 3) {\n    return (\n      <div>\n        {nonWalkLegs.map((leg, index) => (\n          <PublicTransportIcon key={index} mode={leg.mode} />\n        ))}\n      </div>\n    );\n  }\n\n  return (\n    <div>\n      <PublicTransportIcon mode={nonWalkLegs[0].mode} />\n      <div className=\"publicTransportLabelItem roadmapIcon u-text--caption roadmapIcon--inbetween\">\n        <div>+{nonWalkLegs.length - 2}</div>\n      </div>\n      <PublicTransportIcon mode={nonWalkLegs[nonWalkLegs.length - 1].mode} />\n    </div>\n  );\n};\n\nconst RouteLabel = ({ route, vehicle, anchor }) => {\n  const isPublicTransport = vehicle === 'publicTransport';\n  return (\n    <div data-id={route.id} className={`routeLabel routeLabel--${anchor} routeLabel--${vehicle}`}>\n      {isPublicTransport ? (\n        <PublicTransportStepIcons route={route} />\n      ) : (\n        <div className=\"routeLabel-vehicleIcon\">\n          <VehicleIcon vehicle={vehicle} fill=\"currentColor\" width={24} />\n        </div>\n      )}\n      <div>\n        <div className=\"routeLabel-duration\">{formatDuration(route.duration)}</div>\n        {!isPublicTransport && (\n          <div className=\"routeLabel-distance\">{formatDistance(route.distance)}</div>\n        )}\n      </div>\n    </div>\n  );\n};\n\nexport default RouteLabel;\n","import Color from 'color';\n\nconst darkenColor = hex => Color(hex).mix(Color('black'), 0.33).hex();\nconst safeHexColor = hex => (hex.charAt(0) === '#' ? hex : `#${hex}`);\n\nexport function prepareRouteColor(feature) {\n  const lineColor = feature.properties?.lineColor;\n  return {\n    ...feature,\n    properties: {\n      ...feature.properties,\n      lineColor: lineColor ? safeHexColor(lineColor) : '#57C78E',\n      outlineColor: lineColor ? darkenColor(safeHexColor(lineColor)) : '#297A52',\n    },\n  };\n}\n\nfunction getColorExpression(isActive, isOutline) {\n  if (isActive) {\n    return isOutline ? ['get', 'outlineColor'] : ['get', 'lineColor'];\n  }\n  return isOutline ? '#676E79' : '#C7CBD1';\n}\n\nexport function getRouteStyle(vehicle, isActive, isOutline) {\n  if (vehicle === 'walking') {\n    return {\n      type: 'symbol',\n      layout: {\n        'icon-image': isActive ? 'walking_bullet_active' : 'walking_bullet_inactive',\n        'symbol-placement': 'line',\n        'symbol-spacing': 12,\n        'icon-ignore-placement': true,\n        'icon-allow-overlap': true,\n        'symbol-avoid-edges': true,\n      },\n    };\n  }\n\n  return {\n    type: 'line',\n    layout: {\n      'line-join': 'round',\n      'line-cap': 'round',\n      visibility: 'visible',\n    },\n    paint: {\n      'line-color': getColorExpression(isActive, isOutline),\n      'line-color-transition': { duration: 0 },\n      'line-width': isOutline ? 9 : 5,\n    },\n  };\n}\n\nexport function setActiveRouteStyle(map, layerId, vehicle, isActive, isOutline) {\n  if (vehicle === 'walking') {\n    map.setLayoutProperty(\n      layerId,\n      'icon-image',\n      isActive ? 'walking_bullet_active' : 'walking_bullet_inactive'\n    );\n  } else {\n    map.setPaintProperty(layerId, 'line-color', getColorExpression(isActive, isOutline));\n  }\n}\n","// Alt-route-labeller\n// Original author: Benjamin Becquet\n// Forked from: https://www.npmjs.com/package/alt-route-labeller\n// Altered distinctSegment() to ensure the filtered array passed to lineString() has at least 2 items\n\nimport { coordAll } from '@turf/meta';\nimport { lineString } from '@turf/helpers';\nimport { getCoord } from '@turf/invariant';\nimport along from '@turf/along';\nimport lineLength from '@turf/length';\nimport bearing from '@turf/bearing';\n\nconst TOLERANCE = 0.000001;\nconst floatEquals = (f1, f2) => Math.abs(f1 - f2) < TOLERANCE;\nconst coordEquals = (c1 = [], c2 = []) => floatEquals(c1[0], c2[0]) && floatEquals(c1[1], c2[1]);\nconst asKey = coord => `${coord[0].toFixed(6)},${coord[1].toFixed(6)}`;\nconst last = (array = []) => array[array.length - 1];\n\n// find the point at the given distance ratio on the linestring\nconst project = ratio => ls => {\n  const length = lineLength(ls);\n  const lngLat = getCoord(along(ls, length * ratio));\n  // keep the local bearing of the line to later choose an anchor minimizing the portion of line covered.\n  const localLineBearing = bearing(\n    along(ls, length * (ratio - 0.1)),\n    along(ls, length * (ratio + 0.1))\n  );\n\n  return { lngLat, localLineBearing };\n};\n\nfunction distinctSegment(coordinates, coordCounts) {\n  const adjacentCoordsUsedOnce = [[]];\n  coordinates.forEach(coord => {\n    if (coordCounts.get(asKey(coord)) > 1) {\n      adjacentCoordsUsedOnce.push([]);\n    } else {\n      last(adjacentCoordsUsedOnce).push(coord);\n    }\n  });\n  const longestDistinctSegment = adjacentCoordsUsedOnce\n    .filter(a => a.length > 0)\n    .reduce((longest, current) => (current.length > longest.length ? current : longest), []);\n\n  const tmp = longestDistinctSegment.length === 0 ? coordinates : longestDistinctSegment;\n\n  if (tmp.length === 1) tmp[1] = tmp[0];\n\n  return lineString(tmp);\n}\n\n// extract the longest segment of each linestring\n// whose coordinates don't overlap with another feature\nexport function findDistinctSegments(linestrings) {\n  if (linestrings.length < 2) {\n    return linestrings;\n  }\n  // extract raw coordinates\n  const featuresCoords = linestrings.map(coordAll);\n  // count occurences of each coordinate accross all features\n  const coordCounts = new Map();\n  [].concat(...featuresCoords).forEach(coord => {\n    coordCounts.set(asKey(coord), (coordCounts.get(asKey(coord)) || 0) + 1);\n  });\n  return featuresCoords.map(coordinates => distinctSegment(coordinates, coordCounts));\n}\n\nfunction toSimpleLinestring(feature) {\n  const allCoordsWithNoDups = coordAll(feature).reduce((noDups, coord) => {\n    const prevCoord = last(noDups);\n    if (!prevCoord || !coordEquals(prevCoord, coord)) {\n      noDups.push(coord);\n    }\n    return noDups;\n  }, []);\n  return lineString(allCoordsWithNoDups);\n}\n\n// Reduce possibilities of collision by chosing anchors so that labels repulse each other\nfunction optimizeAnchors(positions) {\n  return positions.map((position, index) => {\n    const others = positions.slice();\n    others.splice(index, 1);\n    const othersBearing = getBearingFromOtherPoints(position, others);\n    return {\n      lngLat: position.lngLat,\n      anchor: getAnchor(position, othersBearing),\n    };\n  });\n}\n\nfunction getBearingFromOtherPoints(position, others) {\n  return (\n    others\n      .map(other => bearing(other.lngLat, position.lngLat))\n      .reduce((avg, value, _index, { length }) => avg + value / length, 0) || // mean\n    0\n  );\n}\n\nfunction getAnchor(position, otherBearing) {\n  const axis =\n    Math.abs(position.localLineBearing) < 45 || Math.abs(position.localLineBearing) > 135\n      ? 'vertical'\n      : 'horizontal';\n\n  if (axis === 'vertical') {\n    return otherBearing > 0 ? 'left' : 'right';\n  }\n  return Math.abs(otherBearing) < 90 ? 'bottom' : 'top';\n}\n\n// routes can be a FeatureCollection or an array of Feature or Geometry\nexport function getLabelPositions(routes = []) {\n  const featuresOrGeoms = Array.isArray(routes) ? routes : routes.features;\n  const lineStrings = featuresOrGeoms.map(toSimpleLinestring);\n  const segments = findDistinctSegments(lineStrings);\n  const positions = segments.map(project(0.5));\n  return optimizeAnchors(positions);\n}\n","import React from 'react';\nimport RouteLabel from 'src/panel/direction/RouteLabel';\nimport { Marker, LngLatBounds } from 'maplibre-gl';\nimport bbox from '@turf/bbox';\nimport { normalizeToFeatureCollection } from 'src/libs/geojson';\nimport { map } from '../../config/constants.yml';\nimport LatLonPoi from '../adapters/poi/latlon_poi';\nimport { prepareRouteColor, getRouteStyle, setActiveRouteStyle } from './route_styles';\nimport { getAllSteps, getAllStops, originDestinationCoords } from 'src/libs/route_utils';\nimport Error from '../adapters/error';\nimport nconf from '@qwant/nconf-getter';\nimport { fire, listen } from 'src/libs/customEvents';\nimport { getLabelPositions } from '/local_modules/alt-route-labeller';\nimport { isMobileDevice } from 'src/libs/device';\nimport renderStaticReact from 'src/libs/renderStaticReact';\nimport cx from 'classnames';\n\nconst createMarker = (lngLat, className = '', options = {}) => {\n  const element = document.createElement('div');\n  element.className = className;\n  return new Marker({ ...options, element }).setLngLat(lngLat);\n};\n\nconst createRouteLabel = (route, vehicle, { lngLat, anchor }) => {\n  const element = document.createElement('div');\n  element.innerHTML = renderStaticReact(\n    <RouteLabel route={route} vehicle={vehicle} anchor={anchor} />\n  );\n  element.className = 'routeLabel-marker';\n  element.onclick = () => {\n    fire('select_road_map', route.id);\n  };\n  return new Marker({ element, anchor }).setLngLat(lngLat);\n};\n\nconst getLabelsBbbox = (labelPositions, routesBbox) => {\n  const smallScreen = isMobileDevice();\n  const shift = {\n    latShift: (routesBbox.getNorth() - routesBbox.getSouth()) / (smallScreen ? 5 : 10),\n    lngShift: (routesBbox.getEast() - routesBbox.getWest()) / (smallScreen ? 3 : 10),\n  };\n  const labelsBbbox = new LngLatBounds();\n  labelPositions.map(shiftLabelPosition(shift)).forEach(labelPosition => {\n    labelsBbbox.extend(labelPosition);\n  });\n  return labelsBbbox;\n};\n\nconst shiftLabelPosition =\n  ({ lngShift, latShift }) =>\n  ({ lngLat, anchor }) => {\n    let [lng, lat] = lngLat;\n    if (anchor === 'top') {\n      lat -= latShift;\n    } else if (anchor === 'bottom') {\n      lat += latShift;\n    } else if (anchor === 'left') {\n      lng += lngShift;\n    } else if (anchor === 'right') {\n      lng -= lngShift;\n    }\n    return [lng, lat];\n  };\n\nexport default class SceneDirection {\n  constructor(map) {\n    this.map = map;\n    this.routes = [];\n    this.routeMarkers = [];\n    this.routeLabels = [];\n    this.fullBbox = null;\n    this.mapFeaturesByRoute = {};\n\n    const iconsBaseUrl = nconf.get().system.baseUrl + 'statics/images/direction_icons';\n    this.addMapImage(`${iconsBaseUrl}/walking_bullet_active.png`, 'walking_bullet_active', {\n      pixelRatio: 4,\n    });\n    this.addMapImage(`${iconsBaseUrl}/walking_bullet_inactive.png`, 'walking_bullet_inactive', {\n      pixelRatio: 4,\n    });\n\n    listen('set_routes', ({ routes, vehicle, activeRouteId = 0 }) => {\n      this.reset();\n      this.routes = routes;\n      this.vehicle = vehicle;\n      this.displayRoutes(activeRouteId);\n    });\n\n    listen('set_main_route', ({ routeId, fitView }) => {\n      this.setMainRoute(routeId, fitView);\n    });\n\n    listen('clean_routes', () => {\n      this.reset();\n    });\n\n    listen('zoom_step', step => {\n      fire('fit_map', this.computeBBox(step));\n    });\n\n    listen('highlight_step', step => {\n      this.highlightStep(step);\n    });\n\n    listen('unhighlight_step', step => {\n      this.unhighlightStep(step);\n    });\n\n    listen('set_origin', poi => {\n      this.setOrigin(poi);\n    });\n\n    listen('set_destination', poi => {\n      this.setDestination(poi);\n    });\n  }\n\n  setOrigin = poi => {\n    const originMarker = createMarker(\n      poi.latLon,\n      cx('itinerary_marker_origin', poi.type === 'geoloc' && 'itinerary_marker_origin--geoloc'),\n      {\n        draggable: !isMobileDevice(),\n      }\n    )\n      .addTo(this.map)\n      .on('dragend', event => {\n        this.refreshDirection('origin', event.target.getLngLat());\n      });\n    this.routeMarkers.push(originMarker);\n  };\n\n  setDestination = poi => {\n    const destinationMarker = createMarker(poi.latLon, 'itinerary_marker_destination', {\n      draggable: !isMobileDevice(),\n      anchor: 'bottom',\n    })\n      .addTo(this.map)\n      .on('dragend', event => {\n        this.refreshDirection('destination', event.target.getLngLat());\n      });\n    this.routeMarkers.push(destinationMarker);\n  };\n\n  addMarkerSteps(route) {\n    if (this.vehicle !== 'walking' && this.vehicle !== 'publicTransport') {\n      getAllSteps(route).forEach((step, idx) => {\n        const stepMarker = createMarker(step.maneuver.location, 'itinerary_marker_step');\n        stepMarker.getElement().id = 'itinerary_marker_step_' + idx;\n        this.routeMarkers.push(stepMarker.addTo(this.map));\n      });\n    }\n\n    if (this.vehicle === 'publicTransport') {\n      getAllStops(route).forEach((stop, idx) => {\n        const stopMarker = createMarker(stop.location, 'itinerary_marker_step');\n        stopMarker.getElement().id = 'itinerary_marker_stop_' + idx;\n        stopMarker.getElement().title = stop.name;\n        this.routeMarkers.push(stopMarker.addTo(this.map));\n      });\n    }\n  }\n\n  setMainRoute(routeId, fitView) {\n    let mainRoute = null;\n    if (this.routes.length === 0) {\n      return;\n    }\n\n    this.routes.forEach(route => {\n      const isActive = route.id === routeId;\n      if (isActive) {\n        mainRoute = route;\n      }\n      this.mapFeaturesByRoute[route.id].forEach(({ layerId, outlineLayerId, vehicle }) => {\n        setActiveRouteStyle(this.map, layerId, vehicle, isActive, false);\n        if (outlineLayerId) {\n          setActiveRouteStyle(this.map, outlineLayerId, vehicle, isActive, true);\n        }\n        if (isActive) {\n          if (outlineLayerId) {\n            this.map.moveLayer(outlineLayerId, map.routes_layer);\n          }\n          this.map.moveLayer(layerId, map.routes_layer);\n        }\n      });\n    });\n    this.updateMarkers(mainRoute);\n    this.updateRouteLabels(mainRoute);\n    if (fitView && this.fullBbox) {\n      fire('fit_map', this.fullBbox);\n    }\n  }\n\n  updateMarkers(mainRoute) {\n    if (!mainRoute) {\n      return;\n    }\n\n    this.routeMarkers.forEach(marker => {\n      marker.remove();\n    });\n    this.routeMarkers = [];\n\n    this.addMarkerSteps(mainRoute);\n    const { origin, destination } = originDestinationCoords(mainRoute);\n\n    this.setOrigin({ latLon: { lng: origin[0], lat: origin[1] } });\n\n    this.setDestination({ latLon: { lng: destination[0], lat: destination[1] } });\n  }\n\n  displayRoutes(activeRouteId) {\n    if (this.routes && this.routes.length > 0) {\n      // route lines\n      this.mapFeaturesByRoute = {};\n      this.routes.forEach(route => {\n        this.mapFeaturesByRoute[route.id] = this.addRouteFeatures(\n          route,\n          route.id === activeRouteId\n        );\n      });\n      // route labels\n      const labelPositions = getLabelPositions(this.routes.map(route => route.geometry));\n      this.routeLabels = labelPositions.map(({ lngLat, anchor }, index) =>\n        createRouteLabel(this.routes[index], this.vehicle, { lngLat, anchor }).addTo(this.map)\n      );\n      // compute and store the best bbox\n      const routesBbox = new LngLatBounds();\n      this.routes.forEach(route => {\n        routesBbox.extend(this.computeBBox(route));\n      });\n      this.fullBbox = routesBbox.extend(getLabelsBbbox(labelPositions, routesBbox));\n\n      this.setMainRoute(activeRouteId, true);\n    }\n  }\n\n  updateRouteLabels({ id: activeRouteId }) {\n    // @IE11: array spread to convert NodeList to an array\n    [...document.querySelectorAll('.routeLabel')].forEach(routeLabel => {\n      if (routeLabel.dataset.id === activeRouteId.toString()) {\n        routeLabel.classList.add('active');\n      } else {\n        routeLabel.classList.remove('active');\n      }\n    });\n  }\n\n  refreshDirection(type, lngLat) {\n    const newPoint = new LatLonPoi(lngLat);\n    fire('change_direction_point', type, '', newPoint);\n  }\n\n  reset() {\n    this.routes.forEach(route => {\n      this.mapFeaturesByRoute[route.id].forEach(({ outlineLayerId, layerId, sourceId }) => {\n        if (outlineLayerId) {\n          this.map.removeLayer(outlineLayerId);\n        }\n        this.map.removeLayer(layerId);\n        this.map.removeSource(sourceId);\n      });\n    });\n    this.routes = [];\n\n    this.routeMarkers.concat(this.routeLabels).forEach(marker => {\n      marker.remove();\n    });\n    this.routeMarkers = [];\n    this.routeLabels = [];\n    this.fullBbox = null;\n  }\n\n  getDataSources(route) {\n    const featureCollection = normalizeToFeatureCollection(route.geometry);\n    const sources = [];\n    const walkFeatures = [],\n      nonWalkFeatures = [];\n    featureCollection.features.forEach(feature => {\n      if (\n        this.vehicle === 'walking' ||\n        (this.vehicle === 'publicTransport' && feature.properties.mode === 'WALK')\n      ) {\n        walkFeatures.push(feature);\n      } else {\n        nonWalkFeatures.push(prepareRouteColor(feature));\n      }\n    });\n\n    if (walkFeatures.length > 0) {\n      sources.push({\n        vehicle: 'walking',\n        data: { type: 'FeatureCollection', features: walkFeatures },\n      });\n    }\n\n    if (nonWalkFeatures.length > 0) {\n      sources.push({\n        vehicle: this.vehicle,\n        data: { type: 'FeatureCollection', features: nonWalkFeatures },\n      });\n    }\n\n    return sources;\n  }\n\n  addRouteFeatures(route, isActive) {\n    const sources = this.getDataSources(route);\n    return sources.map((source, idx) => {\n      const sourceId = `source_${route.id}_${idx}`;\n      this.map.addSource(sourceId, { type: 'geojson', data: source.data });\n\n      const layerId = `route_${route.id}_${idx}`;\n      const layerStyle = {\n        ...getRouteStyle(source.vehicle, isActive, false),\n        id: layerId,\n        source: sourceId,\n      };\n\n      let outlineLayerId;\n      if (source.vehicle !== 'walking') {\n        outlineLayerId = layerId + '_outline';\n        const outlineLayerStyle = {\n          ...getRouteStyle(source.vehicle, isActive, true),\n          id: layerId + '_outline',\n          source: sourceId,\n        };\n        this.map.addLayer(outlineLayerStyle, map.routes_layer);\n      }\n\n      this.map\n        .addLayer(layerStyle, map.routes_layer)\n        .on('click', layerId, () => {\n          fire('select_road_map', route.id);\n        })\n        .on('mouseenter', layerId, () => {\n          this.map.getCanvas().style.cursor = 'pointer';\n        })\n        .on('mouseleave', layerId, () => {\n          this.map.getCanvas().style.cursor = '';\n        });\n\n      return { sourceId, layerId, outlineLayerId, vehicle: source.vehicle };\n    });\n  }\n\n  computeBBox({ geometry }) {\n    const [minX, minY, maxX, maxY] = bbox(geometry);\n    return new LngLatBounds([minX, minY], [maxX, maxY]);\n  }\n\n  highlightStep(step) {\n    const marker = document.querySelector('#itinerary_marker_step_' + step);\n    if (marker) {\n      marker.classList.add('itinerary_marker_step--highlighted');\n    }\n  }\n\n  unhighlightStep(step) {\n    const marker = document.querySelector('#itinerary_marker_step_' + step);\n    if (marker) {\n      marker.classList.remove('itinerary_marker_step--highlighted');\n    }\n  }\n\n  addMapImage(url, name, options = {}) {\n    this.map.loadImage(url, (error, image) => {\n      if (error) {\n        Error.sendOnce('scene', 'initMapBox', `Failed to load image at ${url}`, error);\n        return;\n      }\n      this.map.addImage(name, image, options);\n    });\n  }\n}\n","import nconf from '@qwant/nconf-getter';\nimport { Marker } from 'maplibre-gl';\nimport constants from '../../config/constants.yml';\nimport Telemetry from 'src/libs/telemetry';\nimport { toUrl } from 'src/libs/pois';\nimport { fire, listen } from 'src/libs/customEvents';\nimport { poiToGeoJSON, emptyFeatureCollection } from 'src/libs/geojson';\nimport { FILTERED_POIS_PIN_STYLES, FILTERED_POIS_LABEL_STYLES } from 'src/adapters/pois_styles';\nimport { isMobileDevice } from 'src/libs/device';\nimport { createMapGLIcon, createPinIcon } from 'src/adapters/icon_manager';\nimport IconManager from 'src/adapters/icon_manager';\nimport { isEcoResponsibleCategory } from 'src/libs/eco-responsible';\n\nconst mapStyleConfig = nconf.get().mapStyle;\n\nconst poisToGeoJSON = pois => {\n  return {\n    type: 'FeatureCollection',\n    features: pois.map(poi => {\n      const poiFeature = poiToGeoJSON(poi);\n      poiFeature.properties.iconName = IconManager.get(poi).iconClass;\n      return poiFeature;\n    }),\n  };\n};\n\nexport default class SceneCategory {\n  constructor(map) {\n    this.map = map;\n    this.sourceName = 'poi-filtered';\n    this.layers = [];\n\n    this.initActiveStateMarkers();\n    this.initDynamicPoiLayers();\n\n    listen('add_category_markers', this.addCategoryMarkers);\n    listen('remove_category_markers', this.removeCategoryMarkers);\n    listen('highlight_category_marker', this.highlightPoiMarker);\n    listen('click_category_marker', this.selectPoiMarker);\n    listen('click_category_poi', this.selectPoi);\n    listen('clean_marker', () => this.selectPoiMarker(null));\n  }\n\n  initActiveStateMarkers = () => {\n    this.hoveredPoi = null;\n    this.hoveredMarker = new Marker({\n      element: createPinIcon({ disablePointerEvents: true, className: 'marker--category' }),\n      anchor: 'bottom',\n    });\n    this.selectedPoi = null;\n    this.selectedMarker = new Marker({\n      element: createPinIcon({ className: 'marker--category' }),\n      anchor: 'bottom',\n    });\n  };\n\n  initDynamicPoiLayers = () => {\n    // Declare a new image in MapBox-GL rasters so it can be used in the layer style\n    createMapGLIcon('./statics/images/map/pin_map_dot.svg', 50, 60).then(imageData => {\n      this.map.addImage('pin_with_dot', imageData);\n    });\n\n    this.map.addSource(this.sourceName, {\n      type: 'geojson',\n      data: emptyFeatureCollection,\n      // tells MapBox-GL to use this property as internal feature identifier\n      promoteId: 'id',\n    });\n\n    if (mapStyleConfig.showNamesWithPins) {\n      const labelLayerId = `${this.sourceName}_labels`;\n      this.map.addLayer({\n        ...FILTERED_POIS_LABEL_STYLES,\n        source: this.sourceName,\n        id: labelLayerId,\n      });\n      this.layers.push(labelLayerId);\n    }\n\n    const pinLayerId = `${this.sourceName}_pins`;\n    this.map.addLayer({\n      ...FILTERED_POIS_PIN_STYLES,\n      source: this.sourceName,\n      id: pinLayerId,\n    });\n    this.layers.push(pinLayerId);\n\n    this.layers.forEach(layerName => {\n      this.map.on('click', layerName, this.handleLayerMarkerClick);\n      if (!isMobileDevice()) {\n        this.map.on('mouseover', layerName, this.handleLayerMarkerMouseOver);\n        this.map.on('mouseleave', layerName, this.handleLayerMarkerMouseLeave);\n      }\n    });\n  };\n\n  getPointedPoi = mapMouseEvent => {\n    const feature = mapMouseEvent.features[0];\n    return feature && this.pois.find(p => p.id === feature.id);\n  };\n\n  selectPoi = ({ poi, poiFilters, pois }) => {\n    const isEcoResponsible = isEcoResponsibleCategory(poiFilters.category);\n\n    if (poi.meta && poi.meta.source) {\n      Telemetry.sendPoiEvent(\n        poi,\n        'open',\n        Telemetry.buildInteractionData({\n          id: poi.id,\n          source: poi.meta.source,\n          template: 'multiple',\n          zone: 'list',\n          element: 'item',\n          category: poiFilters.category,\n        })\n      );\n    }\n\n    window.app.navigateTo(\n      `/place/${toUrl(poi)}${isEcoResponsible ? `&eco=${poiFilters.category}` : ''}`,\n      {\n        poi,\n        poiFilters,\n        pois,\n        centerMap: true,\n      }\n    );\n    this.selectPoiMarker(poi);\n  };\n\n  handleLayerMarkerClick = e => {\n    e.originalEvent.stopPropagation();\n    const poi = this.getPointedPoi(e);\n\n    this.selectPoi({\n      poi,\n      pois: this.pois,\n      poiFilters: this.poiFilters,\n    });\n  };\n\n  handleLayerMarkerMouseOver = e => {\n    this.map.getCanvas().style.cursor = 'pointer';\n    const poi = this.getPointedPoi(e);\n    if (this.selectedPoi?.id !== poi.id) {\n      this.highlightPoiMarker(poi, true);\n      fire('open_popup', poi, e.originalEvent);\n    }\n  };\n\n  handleLayerMarkerMouseLeave = () => {\n    this.map.getCanvas().style.cursor = '';\n    this.highlightPoiMarker(this.hoveredPoi, false);\n    // delay the popup closure so it can be hovered\n    fire('start_close_popup_timeout');\n  };\n\n  addCategoryMarkers = (pois = [], poiFilters) => {\n    fire('close_popup');\n    this.pois = pois;\n    this.poiFilters = poiFilters;\n    this.setOsmPoisVisibility(false);\n    this.map.getSource(this.sourceName).setData(poisToGeoJSON(pois));\n    this.layers.forEach(layerName => {\n      this.map.setLayoutProperty(layerName, 'visibility', 'visible');\n    });\n  };\n\n  removeCategoryMarkers = () => {\n    fire('close_popup');\n    this.selectPoiMarker(null);\n    this.highlightPoiMarker(this.hoveredPoi, false);\n    this.layers.forEach(layerName => {\n      this.map.setLayoutProperty(layerName, 'visibility', 'none');\n    });\n    this.setOsmPoisVisibility(true);\n  };\n\n  setOsmPoisVisibility = displayed => {\n    constants.map.pois_layers.map(poi => {\n      this.map.setLayoutProperty(poi, 'visibility', displayed ? 'visible' : 'none');\n    });\n  };\n\n  setPoiFeatureState = (id, state) => {\n    this.map.setFeatureState({ id, source: this.sourceName }, state);\n  };\n\n  highlightPoiMarker = (poi, highlight) => {\n    if (this.hoveredPoi) {\n      this.setPoiFeatureState(this.hoveredPoi.id, { hovered: false });\n    }\n    if (highlight) {\n      this.hoveredPoi = poi;\n      this.hoveredMarker.setLngLat(poi.latLon).addTo(this.map);\n      this.setPoiFeatureState(this.hoveredPoi.id, { hovered: true });\n    } else {\n      this.hoveredMarker.remove();\n      this.hoveredPoi = null;\n    }\n  };\n\n  selectPoiMarker = poi => {\n    if (this.selectedPoi === poi) {\n      return;\n    }\n    if (this.selectedPoi) {\n      this.setPoiFeatureState(this.selectedPoi.id, { selected: false });\n    }\n    if (poi) {\n      this.selectedPoi = poi;\n      this.selectedMarker.setLngLat(poi.latLon).addTo(this.map);\n      this.setPoiFeatureState(this.selectedPoi.id, { selected: true });\n    } else {\n      this.selectedMarker.remove();\n      this.selectedPoi = null;\n    }\n  };\n}\n","import { Map, Marker, LngLat, setRTLTextPlugin, LngLatBounds } from 'maplibre-gl';\nimport PoiPopup from './poi_popup';\nimport MobileCompassControl from '../mapbox/mobile_compass_control';\nimport ExtendedControl from '../mapbox/extended_nav_control';\nimport { map as mapConfig } from 'config/constants.yml';\nimport { getCurrentMapPaddings, isPositionUnderUI } from 'src/panel/layouts';\nimport nconf from '@qwant/nconf-getter';\nimport MapPoi from './poi/map_poi';\nimport { getLastLocation, setLastLocation } from 'src/adapters/store';\nimport getStyle from './scene_config';\nimport SceneDirection from './scene_direction';\nimport SceneCategory from './scene_category';\nimport { createDefaultPin } from '../adapters/icon_manager';\nimport LatLonPoi from './poi/latlon_poi';\nimport { isMobileDevice } from 'src/libs/device';\nimport { parseMapHash, getMapHash } from 'src/libs/url_utils';\nimport { parseBboxString } from 'src/libs/bounds';\nimport { toUrl, getBestZoom } from 'src/libs/pois';\nimport Error from 'src/adapters/error';\nimport { fire, listen } from 'src/libs/customEvents';\nimport locale from '../mapbox/locale';\nimport { setPoiHoverStyle } from 'src/adapters/pois_styles';\n\nconst baseUrl = nconf.get().system.baseUrl;\nconst LONG_TOUCH_DELAY_MS = 500;\nconst MOBILE_IDLE_DELAY_MS = 2000;\nlet MOBILE_IDLE_TIMEOUT;\n\nfunction Scene() {\n  this.currentMarker = null;\n  this.popup = new PoiPopup();\n  this.savedLocation = null;\n}\n\nconst getPoiView = poi => ({\n  center: poi.geometry.center,\n  zoom: getBestZoom(poi),\n  bounds: poi.geometry.bbox,\n});\n\nconst hideMobileScale = function () {\n  const item = document.querySelector('.map_control__scale');\n  if (item) {\n    item.classList.add('fadeOut');\n  }\n};\n\nconst showMobileScale = function () {\n  const item = document.querySelector('.map_control__scale');\n  if (item) {\n    item.classList.remove('fadeOut');\n  }\n};\n\nScene.prototype.getMapInitOptions = function ({ locationHash, bbox }) {\n  if (bbox) {\n    try {\n      return { bounds: parseBboxString(bbox) };\n    } catch (e) {\n      console.error(e);\n    }\n  }\n  if (window.hotLoadPoi) {\n    return getPoiView(window.hotLoadPoi);\n  }\n  if (locationHash) {\n    return {\n      zoom: locationHash.zoom,\n      center: [locationHash.lng, locationHash.lat],\n    };\n  }\n  const lastLocation = getLastLocation();\n  if (lastLocation) {\n    return {\n      zoom: lastLocation.zoom,\n      center: [lastLocation.lng, lastLocation.lat],\n    };\n  }\n  if (window.initialBbox) {\n    return {\n      bounds: window.initialBbox,\n      fitBoundsOptions: {\n        maxZoom: 9,\n      },\n    };\n  }\n  return {\n    zoom: mapConfig.zoom,\n    center: [mapConfig.center.lng, mapConfig.center.lat],\n  };\n};\n\nScene.prototype.initMapBox = function ({ locationHash, bbox }) {\n  window.times.initMapBox = Date.now();\n  const compilationHash = window.__config.compilationHash;\n  setRTLTextPlugin(\n    `${baseUrl}statics/build/javascript/map_plugins/mapbox-gl-rtl-text-${compilationHash}.js`,\n    error => {\n      if (error) {\n        Error.send('scene', 'setRTLTextPlugin', 'Failed to load mapbox RTL plugin', error);\n      }\n    },\n    /* lazy */ true\n  );\n\n  this.mb = new Map({\n    attributionControl: false,\n    container: 'scene_container',\n    style: getStyle(),\n    hash: false,\n    maxZoom: 20,\n    locale,\n    ...this.getMapInitOptions({ locationHash, bbox }),\n  });\n  // @MAPBOX: This method isn't implemented by the Mapbox-GL mock\n  this.mb.setPadding = this.mb.setPadding || (() => undefined);\n  this.mb.setPadding(getCurrentMapPaddings());\n\n  this.popup.init(this.mb);\n  window.map = this;\n\n  const interactiveLayers = [\n    'poi-level-0',\n    'poi-level-1',\n    'poi-level-2',\n    'poi-level-3',\n    'poi-level-public-transports-1',\n    'poi-level-public-transports-2',\n  ];\n  this.hoveredPoi = null;\n\n  // Max time between two touch to be considered a single \"double click\" event\n  // This is the value Mapbox-GL uses, in src/ui/handler/dblclick_zoom.js\n  this.DOUBLE_TAP_DELAY_MS = 300;\n  this.lastDoubleTapTimeStamp = 0;\n  this.lastTouchEndTimeStamp = 0;\n  this.mb.on('touchend', () => {\n    const timeStamp = Date.now();\n    // maybe we should also check the distance between the two touch events…\n    if (timeStamp - this.lastTouchEndTimeStamp < this.DOUBLE_TAP_DELAY_MS) {\n      this.lastDoubleTapTimeStamp = timeStamp;\n    }\n    this.lastTouchEndTimeStamp = timeStamp;\n  });\n\n  this.mb.on('load', () => {\n    fire('restart_idle_timeout');\n    this.onHashChange();\n    new SceneDirection(this.mb);\n    new SceneCategory(this.mb);\n\n    this.mb.addControl(new ExtendedControl(), 'bottom-right');\n    this.mb.addControl(new MobileCompassControl(), 'top-right');\n\n    if (!isMobileDevice()) {\n      interactiveLayers.forEach(interactiveLayer => {\n        setPoiHoverStyle(this.mb, interactiveLayer);\n\n        this.mb.on('mouseenter', interactiveLayer, e => {\n          if (e.features.length > 0) {\n            this.hoveredPoi = e.features[0];\n            this.mb.setFeatureState(this.hoveredPoi, { hover: true });\n          }\n          this.mb.getCanvas().style.cursor = 'pointer';\n        });\n\n        this.mb.on('mouseleave', interactiveLayer, () => {\n          if (this.hoveredPoi) {\n            this.mb.setFeatureState(this.hoveredPoi, { hover: false });\n            this.hoveredPoi = null;\n          }\n          this.mb.getCanvas().style.cursor = '';\n        });\n\n        this.popup.addListener(interactiveLayer);\n      });\n    }\n\n    // we have to delay click event resolution to make time for possible double click events,\n    // which are thrown *after* two separate click events are thrown\n    this.clickDelayHandler = null;\n\n    this.mb.on('click', e => {\n      fire('restart_idle_timeout');\n      if (e.originalEvent.cancelBubble) {\n        return;\n      }\n      // cancel the previous click handler if it's still pending\n      clearTimeout(this.clickDelayHandler);\n      // if this is a real mouse double-click, we can simply return here\n      if (e.originalEvent.detail >= 2) {\n        return;\n      }\n      const pois = this.mb.queryRenderedFeatures(e.point, { layers: interactiveLayers });\n      // when clicking on a POI, just trigger the action without delay,\n      // as a subsequent double click isn't a problem\n      if (pois[0]) {\n        this.clickOnMap(e.lngLat, pois[0]);\n        return;\n      }\n      this.clickDelayHandler = setTimeout(() => {\n        // for touch UX we have to make sure a double tap zoom hasn't been made in the meantime\n        if (Date.now() - this.lastDoubleTapTimeStamp < this.DOUBLE_TAP_DELAY_MS) {\n          return;\n        }\n        this.clickOnMap(e.lngLat, null);\n      }, this.DOUBLE_TAP_DELAY_MS);\n    });\n\n    // Long touch polyfill (for mobile devices and touch screens)\n    // Custom implementation because the contextmenu event isn't supported by MapBox.\n    // Long touch is initiated on touchstart event, and canceled if a move, gesture or touchend occurs before 500ms.\n    // Sources:\n    // https://stackoverflow.com/a/1943768 (explanation of 500ms delay)\n    // https://stackoverflow.com/a/54746189 (polyfill implementation also using the 500ms delay)\n\n    let longTouchTimeout = null;\n    this.mb.on('touchstart', e => {\n      fire('restart_idle_timeout');\n      if (e.originalEvent.touches.length === 1) {\n        longTouchTimeout = setTimeout(() => {\n          this.clickOnMap(e.lngLat, null, { longTouch: true });\n          this.cancelClickAfterLongTouch = true;\n        }, LONG_TOUCH_DELAY_MS);\n      }\n    });\n\n    const longTouchCancellingEvents = [\n      'touchend',\n      // 'touchcancel', // ignore this event as it's always thrown by Firefox Android\n      // https://bugzilla.mozilla.org/show_bug.cgi?id=1481923\n      // Doesn't seem to change the behavior for other browsers\n      'touchmove',\n      'pointerdrag',\n      'pointermove',\n      'moveend',\n      'gesturestart',\n      'gesturechange',\n      'gestureend',\n    ];\n\n    const cancelLongTouch = e => {\n      if (longTouchTimeout) {\n        clearTimeout(longTouchTimeout);\n        longTouchTimeout = null;\n      }\n\n      if (this.cancelClickAfterLongTouch) {\n        e.originalEvent.preventDefault();\n        this.cancelClickAfterLongTouch = false;\n      }\n    };\n\n    longTouchCancellingEvents.forEach(event => {\n      this.mb.on(event, cancelLongTouch);\n    });\n\n    this.mb.on('dragstart', () => {\n      fire('map_user_interaction');\n    });\n    this.mb.on('pitchstart', () => {\n      fire('map_user_interaction');\n    });\n\n    this.mb.on('moveend', () => {\n      const { lng, lat } = this.mb.getCenter();\n      const zoom = this.mb.getZoom();\n      setLastLocation({ lng, lat, zoom });\n      window.app.updateHash(this.getLocationHash());\n      fire('map_moveend');\n    });\n\n    window.execOnMapLoaded = f => f();\n    fire('map_loaded');\n  });\n\n  listen('fit_map', (item, forceAnimate) => {\n    this.fitMap(item, forceAnimate);\n  });\n\n  listen('ensure_poi_visible', (poi, options) => {\n    this.ensureMarkerIsVisible(poi, options);\n  });\n\n  listen('create_poi_marker', poi => {\n    this.addMarker(poi);\n  });\n\n  listen('clean_marker', () => {\n    this.cleanMarker();\n  });\n\n  listen('save_location', () => {\n    this.saveLocation();\n  });\n\n  listen('restore_location', () => {\n    this.restoreLocation();\n  });\n\n  listen('move_mobile_bottom_ui', bottom => {\n    this.moveMobileBottomUI(bottom);\n  });\n\n  listen('move_mobile_geolocation_button', bottom => {\n    this.moveMobileGeolocationButton(bottom);\n  });\n\n  listen('mobile_geolocation_button_visibility', visible => {\n    this.mobileButtonVisibility('.maplibregl-ctrl-geolocate', visible);\n  });\n\n  listen('mobile_direction_button_visibility', visible => {\n    this.mobileButtonVisibility('.direction_shortcut', visible);\n  });\n\n  listen('update_map_paddings', () => {\n    this.mb.setPadding(getCurrentMapPaddings());\n  });\n};\n\nScene.prototype.clickOnMap = function (lngLat, clickedFeature, { longTouch = false } = {}) {\n  // Instantiate the place clicked as a PoI\n  const poi = clickedFeature ? new MapPoi(clickedFeature) : new LatLonPoi(lngLat);\n  if (document.querySelector('.directions-open')) {\n    // If Direction panel is open, tell it to fill its fields with this PoI\n    fire('set_direction_point', poi);\n  } else if (isMobileDevice() && !clickedFeature && !longTouch) {\n    // On mobile, simple clicks anywhere don't do anything\n    return;\n  } else {\n    // Default case: open the POI panel\n    window.app.navigateTo(`/place/${toUrl(poi)}`, { poi });\n  }\n};\n\nScene.prototype.saveLocation = function () {\n  this.savedLocation = this.getLocationHash();\n};\n\nScene.prototype.restoreLocation = function () {\n  if (this.savedLocation) {\n    const { zoom, lat, lng } = parseMapHash(this.savedLocation);\n    const flyOptions = {\n      center: [lng, lat],\n      zoom,\n      animate: true,\n      screenSpeed: 2,\n    };\n    this.mb.flyTo(flyOptions);\n  }\n};\n\nconst clamp = (min, max, value) => Math.min(max, Math.max(min, value));\n\nScene.prototype.isBBoxInExtendedViewport = function (bbox) {\n  const viewport = this.mb.getBounds();\n\n  const width = viewport.getEast() - viewport.getWest();\n  const height = viewport.getNorth() - viewport.getSouth();\n\n  // Compute extended viewport, with lats between -85 and 85\n  viewport.setNorthEast(\n    new LngLat(viewport.getEast() + width, clamp(-85, 85, viewport.getNorth() + height)).wrap()\n  );\n  viewport.setSouthWest(\n    new LngLat(viewport.getWest() - width, clamp(-85, 85, viewport.getSouth() - height)).wrap()\n  );\n\n  // Check if the bbox overlaps the viewport\n  return (\n    viewport.contains(bbox.getNorthWest()) ||\n    viewport.contains(bbox.getNorthEast()) ||\n    viewport.contains(bbox.getSouthEast()) ||\n    viewport.contains(bbox.getSouthWest())\n  );\n};\n\nScene.prototype.fitBbox = function (bbox, forceAnimate) {\n  // normalise bbox\n  if (bbox instanceof Array) {\n    bbox = new LngLatBounds(bbox);\n  }\n\n  // Animate if the zoom is big enough and if the BBox is (partially or fully) in\n  // the extended viewport.\n  const animate = forceAnimate || (this.mb.getZoom() > 10 && this.isBBoxInExtendedViewport(bbox));\n  this.mb.fitBounds(bbox, { animate });\n};\n\n// Move the map to focus on an item\nScene.prototype.fitMap = function (item, forceAnimate) {\n  // BBox\n  if (item instanceof LngLatBounds || Array.isArray(item)) {\n    this.fitBbox(item, forceAnimate);\n  } else {\n    // PoI\n    if (item.bbox) {\n      // poi Bbox\n      this.fitBbox(item.bbox, forceAnimate);\n    } else {\n      // poi center\n      const flyOptions = {\n        center: item.latLon,\n        zoom: getBestZoom(item),\n        screenSpeed: 1.5,\n        animate: false,\n      };\n\n      if (forceAnimate || (this.mb.getZoom() > 10 && this.isWindowedPoi(item))) {\n        flyOptions.animate = true;\n      }\n      this.mb.flyTo(flyOptions);\n    }\n  }\n};\n\nScene.prototype.ensureMarkerIsVisible = function (poi, options) {\n  if (poi.bbox) {\n    this.fitBbox(poi.bbox);\n    return;\n  }\n  const isMobile = isMobileDevice();\n  if (!options.centerMap) {\n    const isPoiUnderPanel = isPositionUnderUI(this.mb.project(poi.latLon), { isMobile });\n    if (this.isWindowedPoi(poi) && !isPoiUnderPanel) {\n      return;\n    }\n  }\n  this.mb.flyTo({\n    center: poi.latLon,\n    zoom: getBestZoom(poi),\n    maxDuration: 1200,\n  });\n};\n\nScene.prototype.addMarker = function (poi) {\n  const element = createDefaultPin();\n  element.onclick = function (e) {\n    // click event should not be propagated to the map itself;\n    e.stopPropagation();\n  };\n\n  if (this.currentMarker !== null) {\n    this.currentMarker.remove();\n  }\n\n  const marker = new Marker({ element, anchor: 'bottom', offset: [0, -5] })\n    .setLngLat(poi.latLon)\n    .addTo(this.mb);\n  this.currentMarker = marker;\n  return marker;\n};\n\nScene.prototype.cleanMarker = async function () {\n  if (this.currentMarker !== null) {\n    this.currentMarker.remove();\n    this.currentMarker = null;\n  }\n};\n\nScene.prototype.isWindowedPoi = function (poi) {\n  return this.mb.getBounds().contains(new LngLat(poi.latLon.lng, poi.latLon.lat));\n};\n\nScene.prototype.getLocationHash = function () {\n  const { lat, lng } = this.mb.getCenter();\n  return getMapHash(this.mb.getZoom(), lat, lng);\n};\n\nScene.prototype.restoreFromHash = function (hash, options = {}) {\n  const zll = parseMapHash(hash);\n  if (!zll) {\n    return;\n  }\n  const { zoom, lat, lng } = zll;\n  this.mb.flyTo({ zoom, center: [lng, lat], ...options });\n};\n\nScene.prototype.onHashChange = function () {\n  window.onhashchange = () => {\n    this.restoreFromHash(window.location.hash, { animate: false });\n  };\n};\n\nScene.prototype.translateUIControl = function (selector, bottom) {\n  const item = document.querySelector(selector);\n  if (item) {\n    item.style.transform = `translateY(${-bottom}px)`;\n  }\n};\n\nScene.prototype.moveMobileBottomUI = function (bottom = 0) {\n  if (!isMobileDevice() && bottom > 0) {\n    return;\n  }\n  const uiControls = [\n    '.map_control__scale_attribute_container',\n    '.maplibregl-ctrl-geolocate',\n    '.direction_shortcut',\n  ];\n  uiControls.forEach(uiControl => {\n    this.translateUIControl(uiControl, bottom);\n  });\n};\n\nScene.prototype.moveMobileGeolocationButton = function (bottom = 0) {\n  if (!isMobileDevice() && bottom > 0) {\n    return;\n  }\n  this.translateUIControl('.maplibregl-ctrl-geolocate', bottom);\n};\n\nScene.prototype.mobileButtonVisibility = function (selector, visible) {\n  if (!isMobileDevice()) {\n    return;\n  }\n  const item = document.querySelector(selector);\n  if (item) {\n    if (visible) {\n      item.classList.remove('hidden');\n    } else {\n      item.classList.add('hidden');\n    }\n  }\n};\n\nlisten('restart_idle_timeout', () => {\n  // Cancel idle status\n  showMobileScale();\n  clearTimeout(MOBILE_IDLE_TIMEOUT);\n\n  // Start a new 2s idle timeout\n  MOBILE_IDLE_TIMEOUT = setTimeout(() => {\n    hideMobileScale();\n  }, MOBILE_IDLE_DELAY_MS);\n});\n\nexport default Scene;\n"],"sourceRoot":""}